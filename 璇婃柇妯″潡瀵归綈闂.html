<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ¨¡å—å¯¹é½è¯Šæ–­å·¥å…·</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            padding: 40px;
            background: #f5f5f5;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 32px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        h1 {
            color: #000;
            margin-bottom: 24px;
        }
        .instruction {
            background: #fffbea;
            border-left: 4px solid #f39c12;
            padding: 16px;
            margin-bottom: 24px;
            line-height: 1.8;
        }
        .code-box {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 6px;
            font-family: 'Consolas', monospace;
            font-size: 12px;
            line-height: 1.6;
            margin-bottom: 24px;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 500px;
            overflow-y: auto;
        }
        .button {
            background: #000;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }
        .button:hover {
            background: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” Dashboardæ¨¡å—å¯¹é½è¯Šæ–­å·¥å…·</h1>
        
        <div class="instruction">
            <strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong><br>
            1. è®¿é—® <a href="http://localhost:8877" target="_blank">http://localhost:8877</a><br>
            2. æŒ‰ <kbd>F12</kbd> æ‰“å¼€å¼€å‘è€…å·¥å…·<br>
            3. åˆ‡æ¢åˆ° <strong>Console</strong> é€‰é¡¹å¡<br>
            4. å¤åˆ¶ä¸‹é¢çš„è¯Šæ–­ä»£ç å¹¶è¿è¡Œ
        </div>

        <h3>ğŸ”§ è¯Šæ–­ä»£ç ï¼š</h3>
        <div class="code-box" id="diagnosticCode">// Dashboardæ¨¡å—å¯¹é½æ·±åº¦è¯Šæ–­
console.clear();
console.log('%c=== Dashboardæ¨¡å—å¯¹é½æ·±åº¦è¯Šæ–­ ===', 'color: #000; font-size: 16px; font-weight: bold; background: #f0f0f0; padding: 10px;');
console.log('');

// 1. æ£€æŸ¥container
const container = document.querySelector('.container');
if (container) {
    const cRect = container.getBoundingClientRect();
    console.log('%cContainerä¿¡æ¯:', 'color: #0066cc; font-weight: bold;');
    console.log(`  Left: ${cRect.left.toFixed(1)}px`);
    console.log(`  Right: ${cRect.right.toFixed(1)}px`);
    console.log(`  Width: ${cRect.width.toFixed(1)}px`);
    console.log('');
} else {
    console.log('%câŒ æœªæ‰¾åˆ°.container!', 'color: red; font-weight: bold;');
}

// 2. æ£€æŸ¥æ‰€æœ‰æ¨¡å—
const selectors = [
    '.features-section',
    '.progress-section',
    '.todo-section',
    '.developer-section',
    '.architect-monitor',
    '.user-testing-section',
    '.ops-section',
    '.code-butler-section'
];

console.log('%cæ¨¡å—è¾¹ç•Œæ£€æŸ¥:', 'color: #0066cc; font-weight: bold;');
console.log('');

const modules = [];
selectors.forEach(selector => {
    const elements = document.querySelectorAll(selector);
    elements.forEach((el, idx) => {
        const rect = el.getBoundingClientRect();
        const computedStyle = window.getComputedStyle(el);
        
        // æ£€æŸ¥çˆ¶å…ƒç´ 
        const parent = el.parentElement;
        const parentClass = parent ? parent.className : 'none';
        const isInContainer = parent && parent.classList.contains('container');
        
        modules.push({
            selector: selector,
            index: idx,
            className: el.className,
            left: rect.left,
            right: rect.right,
            width: rect.width,
            parent: parentClass,
            inContainer: isInContainer,
            computedWidth: computedStyle.width,
            computedMaxWidth: computedStyle.maxWidth,
            computedMarginLeft: computedStyle.marginLeft,
            computedMarginRight: computedStyle.marginRight,
            computedPaddingLeft: computedStyle.paddingLeft,
            computedPaddingRight: computedStyle.paddingRight,
            computedBoxSizing: computedStyle.boxSizing
        });
    });
});

// æŒ‰ç…§åœ¨é¡µé¢ä¸­çš„é¡ºåºæ’åº
modules.sort((a, b) => {
    const aTop = document.querySelector(a.selector).getBoundingClientRect().top;
    const bTop = document.querySelector(b.selector).getBoundingClientRect().top;
    return aTop - bTop;
});

// æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
modules.forEach((m, idx) => {
    const prefix = m.inContainer ? 'âœ“' : 'âœ—';
    const containerStatus = m.inContainer ? 'åœ¨containerå†…' : 'âŒ ä¸åœ¨containerå†…';
    
    console.log(`${idx + 1}. ${prefix} ${m.className}`);
    console.log(`   Left: ${m.left.toFixed(1)}px | Right: ${m.right.toFixed(1)}px | Width: ${m.width.toFixed(1)}px`);
    console.log(`   Parent: ${m.parent} (${containerStatus})`);
    console.log(`   Computed width: ${m.computedWidth}`);
    console.log(`   Computed max-width: ${m.computedMaxWidth}`);
    console.log(`   Margin: ${m.computedMarginLeft} / ${m.computedMarginRight}`);
    console.log(`   Padding: ${m.computedPaddingLeft} / ${m.computedPaddingRight}`);
    console.log(`   Box-sizing: ${m.computedBoxSizing}`);
    console.log('');
});

// 3. å¯¹é½åˆ†æ
const leftValues = modules.map(m => m.left);
const rightValues = modules.map(m => m.right);

const minLeft = Math.min(...leftValues);
const maxLeft = Math.max(...leftValues);
const minRight = Math.min(...rightValues);
const maxRight = Math.max(...rightValues);

const leftDiff = maxLeft - minLeft;
const rightDiff = maxRight - minRight;

console.log('%cå¯¹é½åˆ†æ:', 'color: #0066cc; font-weight: bold;');
console.log(`å·¦è¾¹ç¼˜èŒƒå›´: ${minLeft.toFixed(1)}px ~ ${maxLeft.toFixed(1)}px (å·®å¼‚: ${leftDiff.toFixed(1)}px)`);
console.log(`å³è¾¹ç¼˜èŒƒå›´: ${minRight.toFixed(1)}px ~ ${maxRight.toFixed(1)}px (å·®å¼‚: ${rightDiff.toFixed(1)}px)`);
console.log('');

// 4. æ‰¾å‡ºä¸å¯¹é½çš„æ¨¡å—
if (leftDiff > 2 || rightDiff > 2) {
    console.log('%câŒ å‘ç°ä¸å¯¹é½çš„æ¨¡å—:', 'color: red; font-weight: bold;');
    modules.forEach((m, idx) => {
        const leftOff = Math.abs(m.left - minLeft);
        const rightOff = Math.abs(m.right - maxRight);
        if (leftOff > 2 || rightOff > 2) {
            console.log(`  ${idx + 1}. ${m.className}`);
            console.log(`     å·¦åç§»: ${leftOff.toFixed(1)}px`);
            console.log(`     å³åç§»: ${rightOff.toFixed(1)}px`);
            if (!m.inContainer) {
                console.log(`     âš ï¸ è¯¥æ¨¡å—ä¸åœ¨.containerå†…ï¼`);
            }
        }
    });
} else {
    console.log('%câœ… æ‰€æœ‰æ¨¡å—å®Œç¾å¯¹é½ï¼', 'color: green; font-weight: bold; font-size: 14px;');
}

console.log('');
console.log('%c=== è¯Šæ–­å®Œæˆ ===', 'color: #000; font-size: 16px; font-weight: bold; background: #f0f0f0; padding: 10px;');
</div>

        <button class="button" onclick="copyCode()">ğŸ“‹ å¤åˆ¶è¯Šæ–­ä»£ç </button>
    </div>

    <script>
        function copyCode() {
            const code = document.getElementById('diagnosticCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('âœ… è¯Šæ–­ä»£ç å·²å¤åˆ¶ï¼\n\nè¯·åˆ° Dashboard çš„æµè§ˆå™¨å¼€å‘è€…å·¥å…· Console ä¸­ç²˜è´´å¹¶è¿è¡Œã€‚');
            });
        }
    </script>
</body>
</html>

