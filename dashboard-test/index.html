<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>任务所·Flow - Ethereal Industrial Elegance</title>
    <style>
        /* ============================================
           任务所·Flow - 白色极简奢华设计系统
           Ethereal Industrial Elegance
           ============================================ */

        /* === 色彩系统 === */
        :root {
            /* 白色基调 - 12级精密层次 */
            --blanc-pure: #FFFFFF;
            --blanc-snow: #FAFBFC;
            --blanc-pearl: #F6F8FA;
            --blanc-silk: #F0F3F5;
            --blanc-mist: #E8ECEF;
            --blanc-cloud: #DFE4E8;

            /* 灰色层次 - 文字与界面元素 */
            --noir-ink: #0A0F14;
            --noir-charcoal: #1A2027;
            --noir-graphite: #2E3742;
            --noir-steel: #495057;
            --noir-silver: #6C757D;
            --noir-ash: #8B95A1;

            /* 奢华点缀色 */
            --accent-gold: #D4AF37;
            --accent-rose: #E8B4B8;
            --accent-platinum: #E5E4E2;

            /* 功能色系统 */
            --status-success: #4A7C59;
            --status-warning: #D4A574;
            --status-error: #C73E1D;
            --status-info: #5B7C99;
            --status-active: #667eea;

            /* 阴影系统 */
            --shadow-xs: 0 1px 3px rgba(0, 0, 0, 0.04);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.10);

            /* 字体系统 */
            --font-primary: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            --font-secondary: 'Georgia', serif;

            /* 字号系统 */
            --text-xs: 12px;
            --text-sm: 14px;
            --text-base: 16px;
            --text-lg: 18px;
            --text-xl: 21px;
            --text-2xl: 28px;
            --text-3xl: 36px;

            /* 字重系统 */
            --weight-light: 300;
            --weight-regular: 400;
            --weight-medium: 500;
            --weight-semibold: 600;

            /* 空间系统 */
            --space-1: 6px;
            --space-2: 12px;
            --space-3: 18px;
            --space-4: 24px;
            --space-5: 32px;
            --space-6: 40px;
            --space-7: 48px;
            --space-8: 64px;

            /* 动画时序 */
            --duration-fast: 200ms;
            --duration-normal: 300ms;
            --duration-slow: 400ms;
            --ease-luxury: cubic-bezier(0.23, 1, 0.32, 1);

            /* 布局 */
            --header-height: 88px;  /* 加高 */
            --container-max: 1400px;
        }

        /* === 全局样式重置 === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-primary);
            font-size: var(--text-base);
            color: var(--noir-graphite);
            background: var(--blanc-pearl);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* === 项目切换演示器 === */
        .project-switcher {
            position: fixed;
            top: 120px;
            right: 20px;
            z-index: 1000;
            background: white;
            border: 1px solid #E8ECEF;
            padding: 20px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
            max-width: 280px;
            border-radius: 0;
        }

        .switcher-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--noir-graphite);
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid #E8ECEF;
        }

        .project-option {
            padding: 10px 12px;
            margin-bottom: 8px;
            border: 1px solid #E8ECEF;
            background: white;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
            border-radius: 0;
        }

        .project-option:hover {
            background: #F6F8FA;
            border-color: var(--noir-ink);
        }

        .project-option.active {
            background: var(--noir-ink);
            color: white;
            border-color: var(--noir-ink);
        }

        /* === 顶部品牌栏（固定不变）=== */
        .brand-header {
            background: var(--noir-ink);
            border-bottom: 1px solid var(--noir-charcoal);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .brand-container {
            max-width: var(--container-max);
            margin: 0 auto;
            padding: 20px var(--space-6);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .brand-identity {
            flex: 1;
        }

        .brand-logo-line {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .brand-icon {
            width: 32px;
            height: 32px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: 600;
            color: var(--noir-ink);
            border-radius: 0;
        }

        .brand-name {
            font-size: 20px;
            font-weight: 500;
            color: white;
            letter-spacing: -0.01em;
        }

        .brand-slogan {
            font-size: 13px;
            color: var(--noir-silver);
            line-height: 1.5;
            margin-left: 44px;
        }

        .brand-actions {
            display: flex;
            gap: 12px;
        }

        .action-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border: 1px solid var(--noir-charcoal);
            background: rgba(255, 255, 255, 0.05);
            font-size: 12px;
            font-weight: 500;
            color: var(--blanc-cloud);
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 0;
        }

        .action-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .status-dot {
            width: 6px;
            height: 6px;
            background: var(--status-success);
            animation: pulse 2s infinite;
            border-radius: 50%;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        /* === Hero区（项目标识）=== */
        .page-hero {
            background: var(--noir-ink);
            position: relative;
            overflow: hidden;
            border-bottom: 1px solid var(--noir-charcoal);
        }

        .bg-grid {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.03;
            background-image: 
                linear-gradient(white 1px, transparent 1px),
                linear-gradient(90deg, white 1px, transparent 1px);
            background-size: 40px 40px;
        }

        .hero-container {
            max-width: var(--container-max);
            margin: 0 auto;
            padding: var(--space-8) var(--space-6);
            position: relative;
            z-index: 1;
        }

        .project-logo {
            width: 64px;
            height: 64px;
            background: white;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: 600;
            color: var(--noir-ink);
            margin-bottom: var(--space-4);
            transition: all 0.3s ease;
            border-radius: 0;
        }

        .project-title {
            font-family: var(--font-secondary);
            font-size: 48px;
            font-weight: 300;
            color: white;
            letter-spacing: -0.02em;
            margin-bottom: var(--space-3);
            line-height: 1.2;
        }

        .version-badge {
            display: inline-block;
            padding: 4px 12px;
            font-size: 11px;
            font-family: var(--font-mono);
            color: var(--blanc-cloud);
            border: 1px solid var(--noir-charcoal);
            margin-left: var(--space-3);
            vertical-align: middle;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0;
        }

        .project-description {
            font-size: 18px;
            color: var(--blanc-cloud);
            line-height: 1.75;
            max-width: 800px;
        }

        .project-meta-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-4);
            margin-top: var(--space-7);
        }

        .meta-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: var(--space-4);
            transition: all 0.3s ease;
            border-radius: 0;
        }

        .meta-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .meta-label {
            font-size: 12px;
            color: var(--noir-silver);
            margin-bottom: 8px;
        }

        .meta-value {
            font-size: 14px;
            color: var(--blanc-cloud);
            line-height: 1.6;
        }

        /* === 主容器 === */
        .main-container {
            max-width: var(--container-max);
            margin: 0 auto;
            padding: var(--space-8) var(--space-6);
        }

        /* === 页面标题区 === */
        .page-header {
            margin-bottom: var(--space-7);
        }

        .page-title {
            font-size: var(--text-xl);  /* 改为21px */
            font-weight: var(--weight-semibold);  /* 加粗 */
            color: var(--noir-ink);
            margin-bottom: var(--space-2);
            letter-spacing: 0.02em;
        }

        .page-description {
            font-size: var(--text-base);
            color: var(--noir-silver);
            font-weight: var(--weight-light);
        }

        /* === 项目信息框 === */
        .project-info-box {
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            border-radius: 0;  /* 直角 */
            padding: 0;
            margin-bottom: var(--space-7);
            overflow: hidden;
        }

        .project-info-table {
            width: 100%;
            border-collapse: collapse;
        }

        .project-info-table tr {
            border-bottom: 1px solid var(--blanc-mist);
        }

        .project-info-table tr:last-child {
            border-bottom: none;
        }

        .project-info-table td {
            padding: var(--space-4) var(--space-5);
            border-right: 1px solid var(--blanc-mist);
        }

        /* 标签列（第1、3列） */
        .project-info-table td:nth-child(4n+1),
        .project-info-table td:nth-child(4n+3) {
            width: 160px;
            font-size: var(--text-sm);
            color: var(--noir-silver);
            font-weight: var(--weight-medium);
            background: var(--blanc-snow);
        }

        /* 值列（第2、4列） */
        .project-info-table td:nth-child(4n+2),
        .project-info-table td:nth-child(4n) {
            font-size: var(--text-base);
            color: var(--noir-graphite);
            font-weight: var(--weight-regular);
        }

        /* 最后一列去掉右边框 */
        .project-info-table td:nth-child(4n) {
            border-right: none;
        }

        /* === 版本选择器 === */
        .version-selector {
            display: flex;
            gap: var(--space-2);
            margin-bottom: var(--space-6);
        }

        .version-content {
            display: none;
        }

        .version-content[data-version="1"] {
            display: block;
        }

        /* 记忆空间模块需要flex布局 */
        .memory-space-module.version-content[data-version="1"] {
            display: flex !important;
        }

        .version-btn {
            padding: var(--space-2) var(--space-4);
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            border-radius: 0;  /* 直角 */
            font-size: var(--text-sm);
            color: var(--noir-steel);
            cursor: pointer;
            transition: all var(--duration-normal) var(--ease-luxury);
        }

        .version-btn:hover {
            background: var(--blanc-snow);
            border-color: var(--blanc-cloud);
            transform: translateY(-1px);
        }

        .version-btn.active {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        /* === 统计卡片区域 === */
        .stats-section {
            margin-bottom: var(--space-7);
        }

        .stats-label {
            font-size: var(--text-base);  /* 改大一点 */
            color: var(--noir-steel);  /* 颜色深一点 */
            margin-bottom: var(--space-3);
            font-weight: var(--weight-semibold);  /* 加粗 */
            letter-spacing: 0.02em;
            text-transform: none;  /* 取消全大写 */
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: var(--space-4);
            margin-bottom: var(--space-5);
        }

        /* 统计卡片 */
        .stat-card {
            background: var(--blanc-pure);
            border-radius: 0;  /* 直角 */
            padding: var(--space-4);
            border: 1px solid var(--blanc-mist);
            box-shadow: var(--shadow-xs);
            transition: all var(--duration-slow) var(--ease-luxury);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent-gold), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s var(--ease-luxury);
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
            border-color: var(--blanc-cloud);
        }

        .stat-card:hover::before {
            transform: translateX(100%);
        }

        .stat-value {
            font-size: var(--text-3xl);
            font-weight: var(--weight-semibold);  /* 改为加粗，更醒目 */
            color: var(--noir-ink);
            margin-bottom: var(--space-1);
            letter-spacing: -0.01em;
        }

        .stat-label {
            font-size: var(--text-sm);
            color: var(--noir-steel);  /* 改深一点 */
            font-weight: var(--weight-medium);  /* 改为medium */
        }

        .stat-trend {
            font-size: var(--text-xs);
            color: var(--status-success);
            margin-top: var(--space-1);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .stat-meta-row {
            margin-top: 8px;
            font-size: 12px;
            color: var(--noir-silver);
        }

        /* === Tab导航区 === */
        .tabs-container {
            background: var(--blanc-pure);
            border-radius: 0;  /* 直角 */
            padding: var(--space-4);
            margin-bottom: var(--space-6);
            border: 1px solid var(--blanc-mist);
            box-shadow: var(--shadow-xs);
        }

        .tabs-wrapper {
            display: flex;
            gap: var(--space-2);
            flex-wrap: wrap;
            align-items: center;
        }

        .tab-button {
            padding: var(--space-2) var(--space-4);
            background: transparent;
            border: 1px solid transparent;
            border-radius: 0;  /* 直角 */
            font-size: var(--text-sm);
            color: var(--noir-steel);
            cursor: pointer;
            transition: all var(--duration-normal) var(--ease-luxury);
            position: relative;
            font-weight: var(--weight-medium);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .tab-button:hover {
            background: var(--blanc-snow);
            color: var(--noir-graphite);
        }

        .tab-button.active {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .tab-badge {
            background: var(--blanc-mist);
            color: var(--noir-steel);
            padding: 2px 8px;
            border-radius: 0;  /* 直角 */
            font-size: 11px;
            font-weight: var(--weight-medium);
        }

        .tab-button.active .tab-badge {
            background: rgba(255, 255, 255, 0.2);
            color: var(--blanc-pure);
        }

        /* === 筛选器 === */
        .filter-container {
            display: flex;
            gap: var(--space-2);
            margin-bottom: var(--space-5);
        }

        .filter-btn {
            padding: var(--space-2) var(--space-4);
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            border-radius: 0;  /* 直角 */
            font-size: var(--text-sm);
            color: var(--noir-steel);
            cursor: pointer;
            transition: all var(--duration-normal) var(--ease-luxury);
            font-weight: var(--weight-medium);
        }

        .filter-btn:hover {
            background: var(--blanc-silk);
            border-color: var(--blanc-cloud);
        }

        .filter-btn.active {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .filter-content {
            display: none;
        }

        .filter-content.active {
            display: block;
            animation: fadeIn var(--duration-slow) var(--ease-luxury);
        }

        /* === 内容区域 === */
        .content-section {
            min-height: 400px;
        }

        .content-view {
            display: none;
            animation: fadeIn var(--duration-slow) var(--ease-luxury);
        }

        .content-view.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* === 任务卡片 === */
        .task-card {
            background: var(--blanc-pure);
            border-radius: 0;  /* 直角 */
            padding: var(--space-5);
            margin-bottom: var(--space-4);
            border: 1px solid var(--blanc-mist);
            box-shadow: var(--shadow-sm);
            transition: all var(--duration-slow) var(--ease-luxury);
        }

        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .task-header {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            margin-bottom: var(--space-3);
            flex-wrap: wrap;
        }

        .task-priority {
            padding: 4px 10px;
            border-radius: 0;  /* 直角 */
            font-size: var(--text-xs);
            font-weight: var(--weight-semibold);
            background: var(--status-error);
            color: white;
        }

        .task-id {
            font-family: monospace;
            font-size: var(--text-sm);
            color: var(--noir-silver);
            background: var(--blanc-snow);
            padding: 4px 10px;
            border-radius: 0;  /* 直角 */
        }

        .task-assignee {
            font-size: var(--text-sm);
            color: var(--noir-steel);
        }

        .task-time {
            font-size: var(--text-sm);
            color: var(--noir-silver);
            margin-left: auto;
        }

        .task-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);  /* 加粗 */
            color: var(--noir-ink);
            margin-bottom: var(--space-3);
        }

        .task-divider {
            height: 1px;
            background: var(--blanc-mist);
            margin: var(--space-3) 0;
        }

        /* 隐藏事件、对话、记忆卡片中的分隔线 */
        .event-card .task-divider,
        .conversation-card .task-divider,
        .memory-card .task-divider {
            display: none;
        }

        /* 隐藏事件、对话、记忆卡片中的多余按钮 */
        .event-card .task-actions,
        .conversation-card .task-actions,
        .memory-card .task-actions {
            display: none;
        }

        .task-meta {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
            margin-bottom: var(--space-3);
        }

        .meta-row {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .task-actions {
            display: flex;
            gap: var(--space-2);
            flex-wrap: wrap;
        }

        .action-btn {
            padding: var(--space-2) var(--space-3);
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            border-radius: 0;  /* 直角 */
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            cursor: pointer;
            transition: all var(--duration-normal) var(--ease-luxury);
        }

        .action-btn:hover {
            background: var(--blanc-silk);
            border-color: var(--blanc-cloud);
            transform: translateY(-1px);
        }

        /* === 独立模块样式 === */
        .module-section {
            background: var(--blanc-pure);
            border-radius: 0;  /* 直角 */
            padding: var(--space-6);
            border: 1px solid var(--blanc-mist);
            box-shadow: var(--shadow-sm);
        }

        .module-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-6);
            padding-bottom: var(--space-4);
            border-bottom: 2px solid var(--blanc-mist);
        }

        .module-title {
            font-size: var(--text-xl);  /* 二级标题，小一号 */
            font-weight: var(--weight-semibold);  /* 加粗 */
            color: var(--noir-ink);
            margin-bottom: var(--space-2);
            letter-spacing: 0;
        }

        .module-description {
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .module-content {
            /* 模块内容区域 */
        }

        /* === 事件列表（紧凑单行样式） === */
        .event-item-compact {
            display: flex;
            align-items: center;
            padding: var(--space-3) var(--space-4);
            border-bottom: 1px solid var(--blanc-mist);
            gap: var(--space-3);
            position: relative;
            transition: background var(--duration-fast);
        }

        .event-item-compact:last-child {
            border-bottom: none;
        }

        .event-item-compact:hover {
            background: var(--blanc-snow);
        }

        .event-item-compact::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
        }

        .event-item-compact.success::before {
            background: var(--status-success);
        }

        .event-item-compact.warning::before {
            background: var(--status-warning);
        }

        .event-item-compact.info::before {
            background: var(--status-info);
        }

        .event-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .event-dot.success {
            background: var(--status-success);
        }

        .event-dot.warning {
            background: var(--status-warning);
        }

        .event-dot.info {
            background: var(--status-info);
        }

        .event-time-compact {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            min-width: 70px;
            flex-shrink: 0;
        }

        .event-category {
            font-size: var(--text-xs);
            color: var(--noir-steel);
            padding: 3px 10px;
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            border-radius: 0;
            min-width: 80px;
            text-align: center;
            flex-shrink: 0;
            font-weight: var(--weight-medium);
        }

        .event-content-compact {
            flex: 1;
            font-size: var(--text-sm);
            color: var(--noir-ink);
            font-weight: var(--weight-regular);
        }

        .event-actor {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            min-width: 100px;
            flex-shrink: 0;
        }

        .event-detail-link {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            text-decoration: none;
            padding: 4px 14px;
            border: 1px solid var(--blanc-mist);
            border-radius: 0;
            transition: all var(--duration-fast);
            flex-shrink: 0;
        }

        .event-detail-link:hover {
            background: var(--blanc-snow);
            color: var(--noir-ink);
        }

        .view-all-link {
            display: block;
            text-align: center;
            padding: var(--space-3);
            color: var(--status-error);
            text-decoration: none;
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            transition: all var(--duration-fast);
        }

        .view-all-link:hover {
            color: var(--noir-ink);
        }

        /* === 对话和记忆模块（两列卡片） === */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-6);
            margin-bottom: var(--space-8);
        }

        .module-card {
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            padding: var(--space-6);
            transition: all 0.3s ease;
            cursor: pointer;
            border-radius: 0;
        }

        .module-card:hover {
            box-shadow: var(--shadow-sm);
            transform: translateY(-2px);
        }

        .module-card.expanded {
            grid-column: 1 / -1;
            transform: none;
            position: relative;
        }

        .module-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-6);
            padding-bottom: var(--space-4);
            border-bottom: 1px solid var(--blanc-mist);
        }

        .module-title {
            font-size: var(--text-xl);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            letter-spacing: 0;
        }

        .module-action {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            text-decoration: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .module-action:hover {
            color: var(--noir-ink);
            transform: translateX(4px);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-4);
            margin-bottom: var(--space-6);
        }

        .stat-item {
            padding: var(--space-4) 0;
        }

        .stat-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            margin-bottom: 8px;
            letter-spacing: 0.02em;
        }

        .stat-value {
            font-size: var(--text-2xl);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            line-height: var(--leading-tight);
        }

        .recent-list {
            border-top: 1px solid var(--blanc-mist);
            padding-top: var(--space-4);
        }

        .list-header {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            margin-bottom: var(--space-3);
            letter-spacing: 0.02em;
        }

        .list-item {
            padding: var(--space-2) 0;
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            border-bottom: 1px solid var(--blanc-mist);
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .list-item:last-child {
            border-bottom: none;
        }

        .list-item::before {
            content: '';
            width: 4px;
            height: 4px;
            background: var(--noir-silver);
            flex-shrink: 0;
            border-radius: 50%;
        }

        .list-item:hover {
            color: var(--noir-ink);
            padding-left: 8px;
        }

        .list-item:hover::before {
            background: var(--noir-ink);
        }

        .expanded-content {
            display: none;
            margin-top: var(--space-6);
            padding-top: var(--space-6);
            border-top: 1px solid var(--blanc-mist);
        }

        .module-card.expanded .expanded-content {
            display: block;
        }

        .expanded-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-4);
        }

        .detail-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: var(--space-4);
            transition: all 0.3s ease;
            border-radius: 0;
        }

        .detail-card:hover {
            box-shadow: var(--shadow-xs);
            transform: translateX(4px);
        }

        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: var(--space-2);
        }

        .detail-title {
            font-size: var(--text-base);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
            margin-bottom: 6px;
        }

        .detail-meta {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .detail-description {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            line-height: var(--leading-relaxed);
            margin-top: var(--space-2);
        }

        .detail-tags {
            display: flex;
            gap: var(--space-2);
            margin-top: var(--space-3);
        }

        .detail-tag {
            padding: 4px 12px;
            font-size: 11px;
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
            border-radius: 0;
        }

        .close-button {
            position: absolute;
            top: var(--space-6);
            right: var(--space-6);
            padding: 8px 16px;
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            color: var(--noir-graphite);
            font-size: var(--text-sm);
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 0;
        }

        .close-button:hover {
            background: var(--blanc-pearl);
            color: var(--noir-ink);
        }

        /* === API状态条 === */
        .api-status-bar {
            max-width: 1600px;
            margin: 64px auto 48px auto;
            background: var(--blanc-pure);
            border: 1px solid var(--status-success);
            border-radius: 0;
            padding: var(--space-4) var(--space-5);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .api-status-left {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .api-status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--status-success);
            flex-shrink: 0;
        }

        .api-status-text {
            font-size: var(--text-base);
            font-weight: var(--weight-medium);
            color: var(--noir-ink);
        }

        .api-status-right {
            display: flex;
            gap: var(--space-6);
            font-size: var(--text-sm);
            color: var(--noir-steel);
        }

        .api-status-detail-link {
            font-size: var(--text-sm);
            color: var(--status-error);
            text-decoration: none;
            font-weight: var(--weight-medium);
        }

        .api-status-detail-link:hover {
            color: var(--noir-ink);
        }

        /* ==================== 项目透视模块 ==================== */
        .page-container {
            max-width: 1600px;
            margin: 64px auto 48px auto;
            height: 1200px;
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .page-header {
            background: var(--blanc-pure);
            border-bottom: 1px solid var(--blanc-mist);
            padding: var(--space-5) var(--space-6);
            flex-shrink: 0;
        }

        .page-header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-4);
        }

        .page-title {
            font-family: var(--font-secondary);
            font-size: var(--text-2xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            letter-spacing: -0.02em;
        }

        .page-status-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: 6px 16px;
            border: 1px solid var(--noir-silver);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
        }

        .page-status-dot {
            width: 6px;
            height: 6px;
            background: var(--status-success);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        .page-info-bar {
            display: flex;
            align-items: center;
            gap: var(--space-5);
            padding: var(--space-4);
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
        }

        .page-info-section {
            flex: 1;
        }

        .scan-meta-group {
            display: flex;
            gap: var(--space-6);
        }

        .scan-meta-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .scan-meta-label {
            color: var(--noir-silver);
            font-size: var(--text-xs);
        }

        .scan-meta-value {
            color: var(--noir-charcoal);
            font-weight: var(--weight-medium);
            font-size: var(--text-base);
        }

        .page-quick-stats {
            display: flex;
            gap: var(--space-6);
            padding-left: var(--space-6);
            border-left: 1px solid var(--blanc-mist);
        }

        .page-stat-item {
            text-align: center;
        }

        .page-stat-value {
            font-size: var(--text-xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            margin-bottom: 4px;
        }

        .page-stat-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        /* 主要内容 */
        .main-content {
            flex: 1;
            overflow-y: auto;           /* 滚动在这里 */
            padding: var(--space-5);
            min-height: 0;
            max-height: 1000px;         /* 限制高度才能滚动 */
        }

        /* 健康仪表盘 */
        .health-dashboard {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 32px;
            margin-bottom: 40px;
        }

        .dashboard-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: 24px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 32px;
        }

        .health-metric {
            text-align: center;
        }

        .metric-value {
            font-size: 42px;
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            margin-bottom: 8px;
            line-height: 1;
        }

        .metric-label {
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .metric-success { color: var(--status-success); }
        .metric-warning { color: var(--noir-steel); }
        .metric-alert { color: var(--noir-charcoal); }

        /* Tab导航 */
        .content-tabs {
            display: flex;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
            flex-shrink: 0;             /* 血泪教训: Tab导航不滚动 */
        }

        .tab-button {
            padding: var(--space-3) var(--space-6);
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-silver);
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-button:hover {
            color: var(--noir-graphite);
            background: var(--blanc-pearl);
        }

        .tab-button.active {
            color: var(--noir-ink);
            background: var(--blanc-pure);
            border-bottom-color: var(--noir-ink);
        }

        .tab-count {
            display: inline-block;
            margin-left: 8px;
            padding: 2px 8px;
            font-size: 11px;
            font-weight: var(--weight-semibold);
            background: var(--blanc-mist);
            color: var(--noir-steel);
        }

        .tab-button.active .tab-count {
            background: var(--noir-ink);
            color: var(--blanc-pure);
        }

        /* Tab内容面板 */
        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;             /* 恢复8820原始设计 */
        }

        /* 内容区域 */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .section-title {
            font-size: var(--text-base);
            font-weight: var(--weight-medium);
            color: var(--noir-ink);
        }

        .expand-button {
            padding: 8px 20px;
            font-size: var(--text-sm);
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            color: var(--noir-graphite);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .expand-button:hover {
            background: var(--blanc-pearl);
        }

        /* 功能模块卡片 */
        .feature-module {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 24px;
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }

        .feature-module:hover {
            box-shadow: var(--shadow-sm);
        }

        .module-header-content {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 20px;
        }

        .module-title-text {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 12px;
        }

        .completeness-bar {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .progress-bar {
            width: 140px;
            height: 6px;
            background: var(--blanc-mist);
            position: relative;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--noir-ink);
            transition: width 0.6s ease;
        }

        .module-meta {
            display: flex;
            gap: 24px;
            font-size: var(--text-sm);
            color: var(--noir-steel);
            margin-top: 12px;
        }

        .module-features {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--blanc-mist);
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            font-size: var(--text-sm);
            color: var(--noir-graphite);
        }

        .feature-check {
            width: 16px;
            height: 16px;
            border: 2px solid var(--noir-ink);
            background: var(--noir-ink);
            flex-shrink: 0;
        }

        .feature-percentage {
            margin-left: auto;
            color: var(--noir-silver);
            font-family: var(--font-mono);
            font-size: var(--text-xs);
        }

        /* 问题卡片 */
        .issue-card {
            background: var(--blanc-snow);
            border-left: 3px solid var(--noir-charcoal);
            padding: 24px;
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }

        .issue-card:hover {
            box-shadow: var(--shadow-sm);
        }

        .issue-card.p0 {
            border-left-color: var(--noir-ink);
            background: var(--blanc-snow);
        }

        .issue-card.p1 {
            border-left-color: var(--noir-charcoal);
        }

        .issue-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 20px;
        }

        .issue-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: 8px;
        }

        .issue-priority {
            padding: 6px 16px;
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
            white-space: nowrap;
        }

        .issue-priority.p0 {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .issue-details {
            margin: 20px 0;
        }

        .issue-detail-row {
            display: flex;
            gap: 16px;
            margin-bottom: 12px;
            font-size: var(--text-sm);
        }

        .detail-label {
            color: var(--noir-silver);
            min-width: 80px;
            flex-shrink: 0;
        }

        .detail-value {
            color: var(--noir-graphite);
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            line-height: var(--leading-relaxed);
        }

        .issue-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .view-code-button {
            padding: 10px 20px;
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            color: var(--noir-graphite);
            font-size: var(--text-sm);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .view-code-button:hover {
            background: var(--blanc-pearl);
        }

        .generate-task-button {
            padding: 10px 20px;
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border: none;
            font-size: var(--text-sm);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .generate-task-button:hover {
            background: var(--noir-charcoal);
        }

        /* 架构师建议卡片 */
        .recommendation-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 32px;
            margin-bottom: 24px;
            position: relative;
            transition: all 0.3s ease;
        }

        .recommendation-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .recommendation-header {
            margin-bottom: 24px;
        }

        .recommendation-id {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            font-family: var(--font-mono);
            margin-bottom: 12px;
        }

        .recommendation-title {
            font-size: var(--text-xl);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: 16px;
        }

        .rec-section {
            margin-bottom: 24px;
        }

        .rec-section-label {
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
            margin-bottom: 12px;
        }

        .rec-section-content {
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
        }

        .recommendation-metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            margin: 32px 0;
            padding: 24px;
            background: var(--blanc-pearl);
        }

        .metric-item {
            text-align: center;
        }

        .metric-item-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            margin-bottom: 8px;
        }

        .metric-item-value {
            font-size: var(--text-xl);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
        }

        .adopt-button {
            width: 100%;
            padding: 18px 32px;
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border: none;
            font-size: var(--text-base);
            font-weight: var(--weight-medium);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 32px;
        }

        .adopt-button:hover {
            background: var(--noir-charcoal);
        }

        .adopt-button:active {
            transform: scale(0.98);
        }

        .adopt-button.adopted {
            background: var(--blanc-mist);
            color: var(--noir-steel);
            cursor: not-allowed;
        }

        .adopted-badge {
            position: absolute;
            top: 32px;
            right: 32px;
            padding: 6px 16px;
            background: var(--noir-ink);
            color: var(--blanc-pure);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
        }

        /* 空状态 */
        .empty-state {
            text-align: center;
            padding: 80px 40px;
            color: var(--noir-silver);
        }

        .empty-state-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-medium);
            color: var(--noir-steel);
            margin-bottom: 12px;
        }

        .empty-state-description {
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        /* Toast动画 */
        @keyframes slideIn {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(400px); opacity: 0; }
        }

        /* ==================== 待开发任务模块（三层标头设计） ==================== */
        /* ==================== 继承架构师模块的设计系统 ==================== */
        :root {
            --blanc-pure: #FFFFFF;
            --blanc-snow: #FAFBFC;
            --blanc-pearl: #F6F8FA;
            --blanc-silk: #F0F3F5;
            --blanc-mist: #E8ECEF;
            --blanc-cloud: #DFE4E8;
            --noir-ink: #0A0F14;
            --noir-charcoal: #1A2027;
            --noir-graphite: #2E3742;
            --noir-steel: #495057;
            --noir-silver: #6C757D;
            --noir-ash: #8B95A1;
            --status-success: #4A7C59;
            --status-warning: #A67C52;
            --status-error: #7C4A52;
            --status-info: #527C9A;
            --shadow-xs: 0 1px 3px rgba(0, 0, 0, 0.04);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);
            --font-primary: 'SF Pro Display', 'Helvetica Neue', -apple-system, system-ui, sans-serif;
            --font-secondary: 'Playfair Display', Georgia, serif;
            --font-mono: 'SF Mono', Monaco, monospace;
            --text-xs: 12px;
            --text-sm: 14px;
            --text-base: 16px;
            --text-lg: 18px;
            --text-xl: 21px;
            --text-2xl: 28px;
            --weight-light: 300;
            --weight-regular: 400;
            --weight-medium: 500;
            --weight-semibold: 600;
            --leading-tight: 1.2;
            --leading-normal: 1.5;
            --leading-relaxed: 1.75;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-primary);
            background: var(--blanc-pearl);
            color: var(--noir-graphite);
            line-height: var(--leading-normal);
            padding: 40px;
        }

        .pending-features-module {
            max-width: 1600px;
            margin: 0 auto;
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            height: calc(100vh - 80px);
            display: flex;
            flex-direction: column;
        }

        /* ==================== 三层标头设计（完全对齐全栈工程师工作台） ==================== */
        .pending-features-module .module-header {
            display: flex;
            flex-direction: column;
            background: var(--blanc-pure);
        }

        /* 第0层：模块分类标题 */
        .pending-features-module .module-category {
            padding: 24px 40px 20px 40px;
            border-bottom: 1px solid var(--blanc-mist);
            width: 100%;
        }

        .pending-features-module .category-title {
            font-size: var(--text-xl);
            font-weight: var(--weight-regular);
            color: var(--noir-graphite);
            letter-spacing: -0.01em;
        }

        /* 第1层：身份信息卡片 */
        .pending-features-module .header-identity {
            padding: 24px 40px;
            background: var(--blanc-pure);
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            border-bottom: 1px solid var(--blanc-mist);
            width: 100%;  /* ✅ 确保占满宽度 */
        }

        .pending-features-module .identity-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .pending-features-module .module-avatar {
            width: 64px;
            height: 64px;
            background: var(--noir-ink);
            color: var(--blanc-pure);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: var(--weight-semibold);
            flex-shrink: 0;
        }

        .pending-features-module .module-info {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .pending-features-module .module-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            line-height: 1.2;
            margin: 0;
            letter-spacing: -0.01em;
        }

        .pending-features-module .module-meta {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .pending-features-module .meta-separator {
            color: var(--blanc-cloud);
        }

        .pending-features-module .sync-indicator {
            width: 6px;
            height: 6px;
            background: var(--status-success);
            border-radius: 50%;
            animation: pulse-green 2s ease-in-out infinite;
        }

        @keyframes pulse-green {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(0.85); }
        }

        /* 右侧统计数据 */
        .pending-features-module .identity-right {
            display: flex;
            align-items: flex-start;  /* ✅ 改为flex-start，与左侧对齐 */
            gap: 48px;
        }

        .pending-features-module .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .pending-features-module .stat-value {
            font-size: 28px;
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            line-height: 1;
            letter-spacing: -0.02em;
        }

        .pending-features-module .stat-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            font-weight: var(--weight-regular);
            line-height: 1;
            white-space: nowrap;
        }

        .pending-features-module .stat-item.highlight .stat-value {
            color: var(--status-error);
        }

        /* ==================== Tab导航 ==================== */
        .pending-features-module .tab-navigation {
            display: flex;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
        }

        .pending-features-module .tab-item {
            padding: 16px 32px;
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-silver);
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .pending-features-module .tab-item:hover {
            color: var(--noir-graphite);
            background: var(--blanc-pearl);
        }

        .pending-features-module .tab-item.active {
            color: var(--noir-ink);
            background: var(--blanc-pure);
            border-bottom-color: var(--noir-ink);
        }

        .pending-features-module .tab-badge {
            display: inline-block;
            margin-left: 8px;
            padding: 2px 8px;
            font-size: 11px;
            font-weight: var(--weight-semibold);
            background: var(--blanc-mist);
            color: var(--noir-steel);
            border-radius: 2px;
        }

        .pending-features-module .tab-item.active .tab-badge {
            background: var(--noir-ink);
            color: var(--blanc-pure);
        }

        /* ==================== Tab内容 ==================== */
        .pending-features-module .tab-content-wrapper {
            flex: 1;
            overflow: hidden;
        }

        .pending-features-module .tab-pane {
            display: none;
            height: 750px;  /* ✅ 固定高度，不是100% */
        }

        .pending-features-module .tab-pane.active {
            display: flex;           /* ✅ flex布局，不是block */
            flex-direction: column;
            min-height: 0;           /* ✅ 关键：允许收缩 */
        }

        /* ==================== 任务卡片 ==================== */
        .pending-features-module .task-grid {
            flex: 1;              /* ✅ 占满剩余空间 */
            overflow-y: auto;     /* ✅ 滚动条在这里 */
            padding: 40px;
            min-height: 0;        /* ✅ 关键：允许收缩 */
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(480px, 1fr));
            gap: 24px;
        }

        .pending-features-module .task-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 24px;
            transition: all 0.3s ease;
            position: relative;
        }

        .pending-features-module .task-card:hover {
            box-shadow: var(--shadow-sm);
            transform: translateY(-4px);
        }

        .pending-features-module .task-card.high-priority {
            border-left: 3px solid var(--status-error);
        }

        .pending-features-module .task-card.medium-priority {
            border-left: 3px solid var(--status-warning);
        }

        .pending-features-module .task-card.low-priority {
            border-left: 3px solid var(--status-info);
        }

        .pending-features-module .task-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 16px;
        }

        .pending-features-module .task-id {
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            color: var(--noir-silver);
            margin-bottom: 8px;
        }

        .pending-features-module .task-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: 8px;
        }

        .pending-features-module .task-source {
            display: inline-block;
            padding: 4px 12px;
            font-size: 11px;
            font-weight: var(--weight-medium);
            border-radius: 2px;
        }

        .pending-features-module .task-source.user {
            background: var(--status-info);
            color: var(--blanc-pure);
        }

        .pending-features-module .task-source.architect {
            background: var(--noir-ink);
            color: var(--blanc-pure);
        }

        .pending-features-module .task-description {
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
            margin: 16px 0;
        }

        .pending-features-module .task-requirements {
            background: var(--blanc-pearl);
            border-left: 2px solid var(--noir-ink);
            padding: 12px 16px;
            margin: 16px 0;
        }

        .pending-features-module .task-requirements-title {
            font-size: var(--text-xs);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .pending-features-module .task-requirements-list {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            line-height: var(--leading-relaxed);
            padding-left: 16px;
        }

        .pending-features-module .task-requirements-list li {
            margin-bottom: 4px;
        }

        .pending-features-module .task-meta {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            padding-top: 16px;
            border-top: 1px solid var(--blanc-mist);
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .pending-features-module .task-meta-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .pending-features-module .task-meta-label {
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .pending-features-module .task-meta-value {
            color: var(--noir-steel);
        }

        .pending-features-module .task-priority {
            display: inline-block;
            padding: 4px 12px;
            font-size: 11px;
            font-weight: var(--weight-medium);
            border-radius: 2px;
        }

        .pending-features-module .task-priority.high {
            background: var(--status-error);
            color: var(--blanc-pure);
        }

        .pending-features-module .task-priority.medium {
            background: var(--status-warning);
            color: var(--blanc-pure);
        }

        .pending-features-module .task-priority.low {
            background: var(--status-info);
            color: var(--blanc-pure);
        }

        .pending-features-module .task-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .pending-features-module .task-tag {
            padding: 4px 12px;
            font-size: 11px;
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
            border-radius: 2px;
        }

        /* ==================== 架构师审查信息 ==================== */
        .pending-features-module .review-info {
            background: var(--blanc-pearl);
            border-left: 2px solid var(--status-warning);
            padding: 12px 16px;
            margin: 16px 0;
        }

        .pending-features-module .review-info-title {
            font-size: var(--text-xs);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .pending-features-module .review-info-content {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            line-height: var(--leading-relaxed);
        }

        /* ==================== 用户决策区 ==================== */
        .pending-features-module .user-decision-area {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-cloud);
            padding: 16px 20px;
            margin-top: 16px;
        }

        .pending-features-module .decision-title {
            font-size: var(--text-xs);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .pending-features-module .decision-buttons {
            display: flex;
            gap: 12px;
        }

        .pending-features-module .decision-button {
            flex: 1;
            padding: 10px 20px;
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            color: var(--noir-graphite);
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 2px;
        }

        .pending-features-module .decision-button:hover {
            background: var(--blanc-pearl);
        }

        .pending-features-module .decision-button.accept {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .pending-features-module .decision-button.accept:hover {
            background: var(--noir-charcoal);
        }

        .pending-features-module .decision-button.reject {
            border-color: var(--status-error);
            color: var(--status-error);
        }

        .pending-features-module .decision-button.reject:hover {
            background: var(--status-error);
            color: var(--blanc-pure);
        }

        /* ==================== 架构师状态 ==================== */
        .pending-features-module .architect-status {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 16px;
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            margin-top: 16px;
            border-radius: 2px;
        }

        .pending-features-module .architect-status.processing {
            background: var(--status-info);
            color: var(--blanc-pure);
        }

        .pending-features-module .architect-status.completed {
            background: var(--status-success);
            color: var(--blanc-pure);
        }

        .pending-features-module .architect-status.pending {
            background: var(--blanc-mist);
            color: var(--noir-steel);
        }

        .pending-features-module .status-icon {
            width: 12px;
            height: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }

        /* ==================== 滚动条 ==================== */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--blanc-pearl);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--blanc-cloud);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--noir-silver);
        }

        /* ==================== 响应式 ==================== */
        @media (max-width: 1200px) {
            .task-grid {
                grid-template-columns: 1fr;
            }

            .identity-right {
                gap: 32px;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 0;
            }

            .pending-features-module {
                height: 100vh;
            }

            .module-category {
                padding: 20px 24px 16px 24px;
            }

            .category-title {
                font-size: var(--text-lg);
            }

            .header-identity {
                padding: 20px 24px;
                flex-direction: column;
                align-items: flex-start;
                gap: 20px;
            }

            .identity-left {
                width: 100%;
            }

            .module-avatar {
                width: 48px;
                height: 48px;
                font-size: 18px;
            }

            .module-title {
                font-size: var(--text-base);
            }

            .identity-right {
                width: 100%;
                gap: 24px;
            }

            .stat-value {
                font-size: 24px;
            }

            .tab-item {
                padding: 12px 16px;
            }

            .tab-pane {
                padding: 24px;
            }

            .task-meta {
                grid-template-columns: 1fr;
            }

            .decision-buttons {
                flex-direction: column;
            }
        }
        .architect-module {
            max-width: 1600px;
            margin: 64px auto 48px auto;
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            display: flex;
            flex-direction: column;
        }

        .architect-module-header {
            padding: var(--space-5) var(--space-6);
            border-bottom: 1px solid var(--blanc-mist);
        }

        .architect-header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-4);
        }

        .architect-module-title {
            font-family: var(--font-secondary);
            font-size: var(--text-2xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            letter-spacing: -0.02em;
        }

        .architect-status-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: 6px 16px;
            border: 1px solid var(--noir-silver);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
            border-radius: 0;
        }

        .architect-status-dot {
            width: 6px;
            height: 6px;
            background: #4A7C59;
            animation: pulse-green 2s ease-in-out infinite;
        }

        @keyframes pulse-green {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(0.9); }
        }

        .architect-info-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;  /* 左右对齐 */
            gap: var(--space-4);
            padding: var(--space-4);
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
        }

        .architect-info-section {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            flex: 0;  /* 不占用额外空间 */
        }

        .architect-avatar {
            width: 48px;
            height: 48px;
            flex-shrink: 0;
            background: var(--noir-ink);
            color: var(--blanc-pure);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-base);
            font-weight: var(--weight-medium);
            border-radius: 0;
        }

        .architect-details {
            flex: 1;
        }

        .architect-name {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 4px;
        }

        .architect-meta {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .architect-quick-stats {
            display: flex;
            gap: var(--space-6);
            /* 去掉左边框和padding，因为右对齐 */
        }

        .architect-stat-item {
            text-align: center;
        }

        .architect-stat-value {
            font-size: var(--text-xl);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: 4px;
        }

        .architect-stat-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .architect-tab-navigation {
            display: flex;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
        }

        .architect-tab-item {
            padding: var(--space-3) var(--space-6);
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-silver);
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .architect-tab-item:hover {
            color: var(--noir-graphite);
            background: var(--blanc-pearl);
        }

        .architect-tab-item.active {
            color: var(--noir-ink);
            background: var(--blanc-pure);
            border-bottom-color: var(--noir-ink);
        }

        .architect-tab-badge {
            display: inline-block;
            margin-left: var(--space-2);
            padding: 2px 8px;
            font-size: 11px;
            font-weight: var(--weight-semibold);
            background: var(--blanc-mist);
            color: var(--noir-steel);
            border-radius: 0;
        }

        .architect-tab-item.active .architect-tab-badge {
            background: var(--noir-ink);
            color: var(--blanc-pure);
        }

        .architect-tab-content-wrapper {
            flex: 1;
            overflow: hidden;
        }

        .architect-tab-pane {
            display: none;
            height: 700px;  /* 增加高度从500px到700px */
        }

        .architect-tab-pane.active {
            display: flex;
        }

        /* 事件时间轴 */
        .architect-event-timeline {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-6);
        }

        .architect-timeline-filters {
            display: flex;
            gap: var(--space-2);
            margin-bottom: var(--space-6);
            padding-bottom: var(--space-4);
            border-bottom: 1px solid var(--blanc-mist);
        }

        .architect-filter-chip {
            padding: 6px 16px;
            font-size: var(--text-sm);
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            color: var(--noir-graphite);
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 0;
        }

        .architect-filter-chip:hover {
            border-color: var(--noir-steel);
        }

        .architect-filter-chip.active {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .architect-timeline-item {
            position: relative;
            padding-left: 40px;
            padding-bottom: var(--space-6);
        }

        .architect-timeline-item::before {
            content: '';
            position: absolute;
            left: 11px;
            top: 24px;
            bottom: 0;
            width: 1px;
            background: var(--blanc-mist);
        }

        .architect-timeline-item:last-child::before {
            display: none;
        }

        .architect-timeline-marker {
            position: absolute;
            left: 0;
            top: 0;
            width: 24px;
            height: 24px;
            border: 2px solid var(--noir-ink);
            background: var(--blanc-pure);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0;
        }

        .architect-event-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: var(--space-4);
            transition: all 0.3s ease;
            border-radius: 0;
        }

        .architect-event-card:hover {
            box-shadow: var(--shadow-sm);
            transform: translateX(4px);
        }

        .architect-event-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: var(--space-2);
        }

        .architect-event-title {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 6px;
        }

        .architect-event-meta {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .architect-event-time {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            white-space: nowrap;
        }

        .architect-event-description {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            line-height: var(--leading-relaxed);
            margin-top: var(--space-2);
        }

        .architect-event-tags {
            display: flex;
            gap: var(--space-2);
            margin-top: var(--space-3);
        }

        .architect-event-tag {
            padding: 4px 12px;
            font-size: 11px;
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
            border-radius: 0;
        }

        /* 提示词面板 */
        .architect-prompt-panel {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-6);
        }

        .architect-prompt-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .architect-prompt-header {
            margin-bottom: var(--space-6);
            padding-bottom: var(--space-4);
            border-bottom: 1px solid var(--blanc-mist);
        }

        .architect-prompt-title {
            font-size: var(--text-xl);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: var(--space-2);
        }

        .architect-prompt-meta {
            display: flex;
            gap: var(--space-4);
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .architect-prompt-content {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: var(--space-6);
            margin-bottom: var(--space-4);
            border-radius: 0;
        }

        .architect-prompt-text {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            line-height: var(--leading-relaxed);
            color: var(--noir-graphite);
            white-space: pre-wrap;
            max-height: 600px;
            overflow-y: auto;
        }

        .architect-copy-button {
            width: 100%;
            padding: var(--space-3) var(--space-6);
            font-size: var(--text-base);
            font-weight: var(--weight-medium);
            color: var(--blanc-pure);
            background: var(--noir-ink);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 0;
        }

        .architect-copy-button:hover {
            background: var(--noir-charcoal);
        }

        .architect-copy-button:active {
            transform: scale(0.98);
        }

        /* 对话布局 */
        .architect-conversation-layout {
            flex: 1;  /* ✅ 改为flex，对标事件流 */
            overflow-y: auto;  /* ✅ 滚动条在这里，最右边 */
            min-height: 0;  /* ✅ 关键：允许收缩 */
            display: flex;
        }

        .architect-conversation-list {
            width: 380px;
            border-right: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
            display: flex;
            flex-direction: column;
        }

        .architect-conversation-search {
            padding: var(--space-4);
            border-bottom: 1px solid var(--blanc-mist);
        }

        .architect-search-input {
            width: 100%;
            padding: var(--space-2) var(--space-3);
            border: 1px solid var(--blanc-cloud);
            font-size: var(--text-sm);
            background: var(--blanc-pure);
            color: var(--noir-graphite);
            border-radius: 0;
        }

        .architect-search-input:focus {
            outline: none;
            border-color: var(--noir-silver);
        }

        .architect-conversation-items {
            flex: 1;
            overflow-y: auto;
        }

        .architect-conversation-item {
            padding: var(--space-4);
            border-bottom: 1px solid var(--blanc-mist);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .architect-conversation-item:hover {
            background: var(--blanc-pearl);
        }

        .architect-conversation-item.active {
            background: var(--blanc-pure);
            border-left: 2px solid var(--noir-ink);
        }

        .architect-conversation-item-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: var(--space-2);
        }

        .architect-conversation-item-title {
            font-size: var(--text-sm);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
        }

        .architect-conversation-item-time {
            font-size: 11px;
            color: var(--noir-silver);
        }

        .architect-conversation-item-preview {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-bottom: var(--space-2);
        }

        .architect-conversation-item-meta {
            display: flex;
            gap: var(--space-3);
            font-size: 11px;
            color: var(--noir-silver);
        }

        .architect-conversation-detail {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--blanc-pure);
        }

        .architect-detail-header {
            padding: var(--space-4) var(--space-6);
            border-bottom: 1px solid var(--blanc-mist);
        }

        .architect-detail-title {
            font-size: var(--text-xl);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: var(--space-2);
        }

        .architect-detail-meta {
            display: flex;
            gap: var(--space-4);
            font-size: var(--text-sm);
            color: var(--noir-steel);
        }

        .architect-messages-container {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-6);
        }

        .architect-message {
            display: flex;
            gap: var(--space-3);
            margin-bottom: var(--space-6);
        }

        .architect-message-avatar {
            width: 40px;
            height: 40px;
            flex-shrink: 0;
            background: var(--noir-ink);
            color: var(--blanc-pure);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            border-radius: 0;
        }

        .architect-message-avatar.user {
            background: var(--noir-graphite);
        }

        .architect-message-content {
            flex: 1;
        }

        .architect-message-header {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            margin-bottom: var(--space-2);
        }

        .architect-message-sender {
            font-size: var(--text-sm);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
        }

        .architect-message-time {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .architect-message-text {
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
            padding: var(--space-3) var(--space-4);
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            border-radius: 0;
        }

        .architect-message-text pre {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            padding: var(--space-3);
            margin: var(--space-3) 0;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            overflow-x: auto;
            border-radius: 0;
        }

        .architect-message-text strong {
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
        }

        .architect-empty-state {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--space-8);
            text-align: center;
        }

        .architect-empty-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
            margin-bottom: var(--space-2);
        }

        .architect-empty-description {
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        /* ==================== 全栈工程师模块 ==================== */

        /* ==================== 全栈工程师工作台（完整版） ==================== */
        /* ==================== 白色奢华美学系统（严格遵循架构师工作台） ==================== */
        :root {
            /* 白色光谱 */
            --blanc-pure: #FFFFFF;
            --blanc-snow: #FAFBFC;
            --blanc-pearl: #F6F8FA;
            --blanc-silk: #F0F3F5;
            --blanc-mist: #E8ECEF;
            --blanc-cloud: #DFE4E8;

            /* 黑色层次 */
            --noir-ink: #0A0F14;
            --noir-charcoal: #1A2027;
            --noir-graphite: #2E3742;
            --noir-steel: #495057;
            --noir-silver: #6C757D;
            --noir-ash: #8B95A1;

            /* 阴影 */
            --shadow-xs: 0 1px 3px rgba(0, 0, 0, 0.04);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);

            /* 字体系统 */
            --font-primary: 'SF Pro Display', 'Helvetica Neue', -apple-system, system-ui, sans-serif;
            --font-secondary: 'Playfair Display', Georgia, serif;
            --font-mono: 'SF Mono', Monaco, monospace;

            /* 字号 */
            --text-xs: 12px;
            --text-sm: 14px;
            --text-base: 16px;
            --text-lg: 18px;
            --text-xl: 21px;
            --text-2xl: 28px;

            /* 字重 */
            --weight-light: 300;
            --weight-regular: 400;
            --weight-medium: 500;
            --weight-semibold: 600;

            /* 行高 */
            --leading-tight: 1.2;
            --leading-normal: 1.5;
            --leading-relaxed: 1.75;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-primary);
            background: var(--blanc-pearl);
            color: var(--noir-graphite);
            line-height: var(--leading-normal);
            padding: 40px;
        }

        .engineer-module {
            max-width: 1600px;
            margin: 0 auto;
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            height: calc(100vh - 80px);
            display: flex;
            flex-direction: column;
        }

        /* ==================== 模块头部 ==================== */
        .engineer-module .module-header {
            padding: 32px 40px;
            border-bottom: 1px solid var(--blanc-mist);
            display: block;  /* ✅ 关键！确保子元素垂直排列 */
        }

        .engineer-module .header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .engineer-module .module-title {
            font-family: var(--font-secondary);
            font-size: var(--text-2xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            letter-spacing: -0.02em;
        }

        .engineer-module .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 16px;
            border: 1px solid var(--noir-silver);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
        }

        .engineer-module .status-dot {
            width: 6px;
            height: 6px;
            background: #4A7C59;
            animation: pulse-green 2s ease-in-out infinite;
        }

        @keyframes pulse-green {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(0.9); }
        }

        .engineer-module .engineer-info {
            display: flex;
            align-items: center;
            gap: 24px;
            padding: 20px;
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
        }

        .engineer-module .info-section {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .engineer-module .engineer-avatar {
            width: 48px;
            height: 48px;
            background: var(--noir-ink);
            color: var(--blanc-pure);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-base);
            font-weight: var(--weight-medium);
        }

        .engineer-module .engineer-details {
            flex: 1;
        }

        .engineer-module .engineer-name {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 4px;
        }

        .engineer-module .engineer-meta {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .engineer-module .quick-stats {
            display: flex;
            gap: 32px;
            padding-left: 32px;
            border-left: 1px solid var(--blanc-mist);
        }

        .engineer-module .stat-item {
            text-align: center;
        }

        .engineer-module .stat-value {
            font-size: var(--text-xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            margin-bottom: 4px;
        }

        .engineer-module .stat-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        /* ==================== Tab导航 ==================== */
        .engineer-module .tab-navigation {
            display: flex;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
        }

        .engineer-module .tab-item {
            padding: 16px 32px;
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-silver);
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .engineer-module .tab-item:hover {
            color: var(--noir-graphite);
            background: var(--blanc-pearl);
        }

        .engineer-module .tab-item.active {
            color: var(--noir-ink);
            background: var(--blanc-pure);
            border-bottom-color: var(--noir-ink);
        }

        .engineer-module .tab-badge {
            display: inline-block;
            margin-left: 8px;
            padding: 2px 8px;
            font-size: 11px;
            font-weight: var(--weight-semibold);
            background: var(--blanc-mist);
            color: var(--noir-steel);
        }

        .engineer-module .tab-item.active .tab-badge {
            background: var(--noir-ink);
            color: var(--blanc-pure);
        }

        /* ==================== Tab内容 ==================== */
        .engineer-module .tab-content-wrapper {
            flex: 1;
            overflow: hidden;
        }

        .engineer-module .tab-pane {
            display: none;
            height: 1200px;  /* ✅ 增加高度，从750px增加到1200px，显示更多任务 */
        }

        .engineer-module .tab-pane.active {
            display: flex;
            flex-direction: column;
            min-height: 0;  /* ✅ 关键：允许收缩 */
        }

        /* ==================== 事件流（与架构师工作台完全一致） ==================== */
        .engineer-module .event-timeline {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
        }

        .engineer-module .timeline-filters {
            display: flex;
            gap: 12px;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .engineer-module .filter-chip {
            padding: 8px 16px;
            font-size: var(--text-sm);
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            color: var(--noir-graphite);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .engineer-module .filter-chip:hover {
            border-color: var(--noir-steel);
        }

        .engineer-module .filter-chip.active {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .engineer-module .timeline-item {
            position: relative;
            padding-left: 40px;
            padding-bottom: 32px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: 11px;
            top: 24px;
            bottom: 0;
            width: 1px;
            background: var(--blanc-mist);
        }

        .timeline-item:last-child::before {
            display: none;
        }

        .engineer-module .timeline-marker {
            position: absolute;
            left: 0;
            top: 0;
            width: 24px;
            height: 24px;
            border: 2px solid var(--noir-ink);
            background: var(--blanc-pure);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .engineer-module .event-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 24px;
            transition: all 0.3s ease;
        }

        .engineer-module .event-card:hover {
            box-shadow: var(--shadow-sm);
            transform: translateX(4px);
        }

        .engineer-module .event-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }

        .engineer-module .event-title {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 6px;
        }

        .engineer-module .event-meta {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .engineer-module .event-time {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            white-space: nowrap;
        }

        .engineer-module .event-description {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            line-height: var(--leading-relaxed);
            margin-top: 12px;
        }

        .engineer-module .event-tags {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }

        .engineer-module .event-tag {
            padding: 4px 12px;
            font-size: 11px;
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
        }

        /* ==================== 任务看板（优化为3列） ==================== */
        /* 任务看板容器 */
        .engineer-module .task-board-container {
            flex: 1;  /* ✅ 改为flex布局 */
            overflow-y: auto;  /* ✅ 滚动条在这里 */
            padding: 0;  /* ✅ 无padding，滚动条紧贴右边 */
            min-height: 0;  /* ✅ 关键：允许收缩 */
            display: flex;
            flex-direction: column;
        }

        .engineer-module .task-board-header {
            padding: 24px 40px;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
            flex-shrink: 0;
        }

        /* 任务列表容器（替代3列看板） - 优化滚动条位置 */
        .engineer-module .task-list-container {
            flex: 1;
            overflow-y: auto;
            padding: 40px 0 40px 40px;  /* 右侧无padding，让滚动条紧贴边缘 */
            min-height: 0;  /* ✅ 关键：允许收缩 */
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        /* 任务卡片容器 - 添加右侧边距 */
        .engineer-module .task-list-container > .task-card {
            max-width: 100%;
            margin-right: 40px;  /* 卡片右侧边距，确保内容不贴边 */
        }

        .engineer-module .filter-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .engineer-module .filter-chips {
            display: flex;
            gap: 12px;
        }

        .engineer-module .sort-select {
            padding: 8px 16px;
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .engineer-module .sort-select:hover {
            border-color: var(--noir-steel);
        }

        .engineer-module .sort-select:focus {
            outline: none;
            border-color: var(--noir-ink);
        }

        /* 任务列表容器（替代3列看板） */
        .engineer-module .task-list-container {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .engineer-module .kanban-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            padding: 40px;
            flex: 1;
            overflow-y: auto;
        }

        .engineer-module .kanban-column {
            background: var(--blanc-pearl);
            border: 1px solid var(--blanc-mist);
            display: flex;
            flex-direction: column;
            min-height: 400px;
        }

        .engineer-module .column-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
        }

        .engineer-module .column-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
        }

        .engineer-module .column-count {
            padding: 2px 10px;
            font-size: 11px;
            font-family: var(--font-mono);
            background: var(--blanc-mist);
            color: var(--noir-steel);
        }

        .engineer-module .column-cards {
            padding: 24px;
            overflow-y: auto;
            flex: 1;
        }

        /* ==================== 任务卡片 ==================== */
        .engineer-module .task-card {
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .engineer-module .task-card:hover {
            box-shadow: var(--shadow-sm);
            transform: translateX(4px);
        }

        .engineer-module .task-card-header {
            margin-bottom: 12px;
        }

        .engineer-module .task-id {
            display: inline-block;
            padding: 4px 12px;
            font-size: 11px;
            font-family: var(--font-mono);
            background: var(--noir-ink);
            color: var(--blanc-pure);
            margin-bottom: 8px;
        }

        .engineer-module .task-title {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 8px;
        }

        .engineer-module .task-status-badge {
            display: inline-block;
            padding: 4px 12px;
            font-size: 11px;
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
            background: var(--blanc-pearl);
            white-space: nowrap;  /* ✅ 禁止换行 */
            flex-shrink: 0;  /* ✅ 不允许收缩 */
        }

        .engineer-module .task-status-badge.parallel {
            background: var(--noir-graphite);
            color: var(--blanc-pure);
            border-color: var(--noir-graphite);
        }

        .engineer-module .task-description {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            line-height: var(--leading-relaxed);
            margin: 12px 0;
        }

        .engineer-module .task-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 16px 0 0 0;
            padding-top: 16px;
            border-top: 1px solid var(--blanc-mist);
            font-size: var(--text-xs);
            color: var(--noir-silver);
            flex-wrap: nowrap;  /* ✅ 禁止换行 */
            gap: 12px;
            min-height: 32px;  /* ✅ 最小高度 */
        }

        .engineer-module .task-meta-left {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;  /* ✅ 恢复flex: 1 */
            min-width: 0;  /* ✅ 关键：允许flex子项收缩 */
            flex-shrink: 1;  /* ✅ 允许收缩 */
        }

        .engineer-module .task-meta-right {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;  /* ✅ 不允许收缩，保证标签完整显示 */
            white-space: nowrap;  /* ✅ 禁止换行 */
        }

        .engineer-module .task-estimate {
            font-family: var(--font-mono);
        }

        .engineer-module .task-status-indicator {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            font-size: 11px;
            background: var(--blanc-pearl);
            color: var(--noir-graphite);
            white-space: nowrap;  /* ✅ 禁止文本换行 */
            flex-shrink: 0;  /* ✅ 不允许收缩 */
        }

        /* ✅ 确保task-meta-left的子元素不换行 */
        .engineer-module .task-meta-left > span {
            white-space: nowrap;
            flex-shrink: 0;
        }

        .engineer-module .status-dot-small {
            width: 4px;
            height: 4px;
            background: var(--noir-silver);
        }

        .engineer-module .status-dot-small.pending {
            background: var(--noir-silver);
        }

        .engineer-module .status-dot-small.in-progress {
            background: var(--noir-ink);
            animation: pulse-dark 2s ease-in-out infinite;
        }

        @keyframes pulse-dark {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }

        .engineer-module .priority-badge {
            padding: 4px 10px;
            font-size: 11px;
            font-family: var(--font-mono);
            white-space: nowrap;  /* ✅ 禁止换行 */
            flex-shrink: 0;  /* ✅ 不允许收缩 */
        }

        .engineer-module .priority-badge.p0 {
            background: var(--noir-ink);
            color: var(--blanc-pure);
        }

        .engineer-module .priority-badge.p1 {
            background: var(--noir-graphite);
            color: var(--blanc-pure);
        }

        .engineer-module .priority-badge.p2 {
            border: 1px solid var(--noir-steel);
            color: var(--noir-steel);
        }

        .engineer-module .task-actions {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        .engineer-module .task-action-button {
            flex: 1;
            padding: 8px 16px;
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .engineer-module .task-action-button:hover {
            background: var(--blanc-pearl);
        }

        .engineer-module .task-action-button.primary {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .engineer-module .task-action-button.primary:hover {
            background: var(--noir-charcoal);
        }

        /* ==================== 代码审查时间线 ==================== */
        .engineer-module .code-review-container {
            flex: 1;  /* ✅ 改为flex */
            overflow-y: auto;  /* ✅ 滚动在这里 */
            padding: 40px 40px 40px 80px;  /* ✅ 直接在容器上 */
            min-height: 0;  /* ✅ 关键 */
        }

        .engineer-module .code-review-timeline {
            /* ✅ 改为普通容器，滚动移到父级 */
        }

        .code-review-timeline::before {
            content: '';
            position: absolute;
            left: 40px;
            top: 80px;
            bottom: 0;
            width: 2px;
            background: var(--blanc-mist);
        }

        .engineer-module .review-filters {
            display: flex;
            gap: 12px;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .engineer-module .review-item {
            position: relative;
            margin-bottom: 48px;
        }

        .engineer-module .review-marker {
            position: absolute;
            left: -48px;
            top: 0;
            width: 16px;
            height: 16px;
            border: 2px solid var(--noir-ink);
            background: var(--blanc-pure);
        }

        .engineer-module .review-marker.approved {
            background: var(--noir-ink);
        }

        .engineer-module .review-marker.pending {
            background: var(--blanc-pure);
        }

        .engineer-module .review-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 24px;
            transition: all 0.3s ease;
        }

        .engineer-module .review-card:hover {
            box-shadow: var(--shadow-sm);
        }

        .engineer-module .review-card-header {
            margin-bottom: 16px;
        }

        .engineer-module .review-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: 8px;
        }

        .engineer-module .review-meta {
            display: flex;
            gap: 16px;
            align-items: center;
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .engineer-module .review-status {
            display: inline-block;
            padding: 4px 12px;
            font-size: var(--text-xs);
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
        }

        .engineer-module .review-status.approved {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .engineer-module .review-status.pending {
            background: var(--blanc-pearl);
        }

        .engineer-module .review-content {
            margin: 24px 0;
        }

        .engineer-module .content-label {
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
            margin-bottom: 12px;
        }

        .engineer-module .content-list {
            padding-left: 20px;
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
        }

        .engineer-module .content-item {
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .content-item::before {
            content: '├─';
            color: var(--noir-silver);
            font-family: var(--font-mono);
        }

        .content-item:last-child::before {
            content: '└─';
        }

        .engineer-module .review-comment {
            background: var(--blanc-pearl);
            border-left: 2px solid var(--noir-ink);
            padding: 16px 20px;
            margin: 24px 0;
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
        }

        .engineer-module .review-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .engineer-module .review-action-button {
            padding: 8px 16px;
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .engineer-module .review-action-button:hover {
            background: var(--blanc-pearl);
        }

        .engineer-module .review-action-button.approve {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .engineer-module .review-action-button.approve:hover {
            background: var(--noir-charcoal);
        }

        /* ==================== 技术文档库 ==================== */
        .engineer-module .docs-container {
            flex: 1;  /* ✅ 改为flex */
            overflow-y: auto;  /* ✅ 滚动条在这里 */
            min-height: 0;  /* ✅ 关键 */
            display: flex;
        }

        .engineer-module .docs-sidebar {
            width: 280px;
            border-right: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
            display: flex;
            flex-direction: column;
        }

        .engineer-module .docs-search {
            padding: 20px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .engineer-module .docs-categories {
            flex: 1;
            overflow-y: auto;
        }

        .engineer-module .category-group {
            border-bottom: 1px solid var(--blanc-mist);
        }

        .engineer-module .category-header {
            padding: 16px 20px;
            font-size: var(--text-sm);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            background: var(--blanc-pearl);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .engineer-module .category-header:hover {
            background: var(--blanc-silk);
        }

        .engineer-module .category-items {
            display: none;
        }

        .engineer-module .category-items.active {
            display: block;
        }

        .engineer-module .doc-item {
            padding: 12px 20px 12px 40px;
            font-size: var(--text-sm);
            color: var(--noir-steel);
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 2px solid transparent;
        }

        .engineer-module .doc-item:hover {
            background: var(--blanc-pearl);
            color: var(--noir-graphite);
        }

        .engineer-module .doc-item.active {
            background: var(--blanc-pure);
            color: var(--noir-ink);
            border-left-color: var(--noir-ink);
        }

        .engineer-module .docs-content {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
        }

        .engineer-module .doc-header {
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .engineer-module .doc-title {
            font-family: var(--font-secondary);
            font-size: var(--text-2xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            margin-bottom: 12px;
        }

        .engineer-module .doc-meta {
            display: flex;
            gap: 24px;
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .engineer-module .doc-body {
            max-width: 800px;
        }

        .engineer-module .doc-section {
            margin-bottom: 32px;
        }

        .engineer-module .doc-section-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 16px;
        }

        .engineer-module .doc-section-content {
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
        }

        .engineer-module .doc-code-block {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            padding: 20px;
            margin: 20px 0;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            line-height: var(--leading-relaxed);
                overflow-x: auto;
        }

        /* ==================== 对话历史（与架构师工作台一致） ==================== */
        .engineer-module .conversation-layout {
            flex: 1;  /* ✅ 改为flex */
            overflow-y: auto;  /* ✅ 滚动条在这里 */
            min-height: 0;  /* ✅ 关键 */
            display: flex;
        }

        .engineer-module .conversation-list {
            width: 380px;
            border-right: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
            display: flex;
                flex-direction: column;
        }

        .engineer-module .conversation-search {
            padding: 20px 20px 16px 20px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .engineer-module .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--blanc-cloud);
            font-size: var(--text-sm);
            background: var(--blanc-pure);
            color: var(--noir-graphite);
        }

        .engineer-module .search-input:focus {
            outline: none;
            border-color: var(--noir-silver);
        }

        .engineer-module .conversation-items {
            flex: 1;
            overflow-y: auto;
        }

        .engineer-module .conversation-item {
            padding: 20px;
            border-bottom: 1px solid var(--blanc-mist);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .engineer-module .conversation-item:hover {
            background: var(--blanc-pearl);
        }

        .engineer-module .conversation-item.active {
            background: var(--blanc-pure);
            border-left: 2px solid var(--noir-ink);
        }

        .engineer-module .conversation-item-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 8px;
        }

        .engineer-module .conversation-item-title {
            font-size: var(--text-sm);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
        }

        .engineer-module .conversation-item-time {
            font-size: 11px;
            color: var(--noir-silver);
        }

        .engineer-module .conversation-item-preview {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-bottom: 8px;
        }

        .engineer-module .conversation-item-meta {
            display: flex;
            gap: 16px;
            font-size: 11px;
            color: var(--noir-silver);
        }

        .engineer-module .conversation-detail {
            flex: 1;
            display: flex;
                flex-direction: column;
            background: var(--blanc-pure);
        }

        .engineer-module .detail-header {
            padding: 24px 32px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .engineer-module .detail-title {
            font-size: var(--text-xl);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: 12px;
        }

        .engineer-module .detail-meta {
            display: flex;
            gap: 24px;
            font-size: var(--text-sm);
            color: var(--noir-steel);
        }

        .engineer-module .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 32px;
        }

        .engineer-module .message {
            display: flex;
            gap: 16px;
            margin-bottom: 32px;
        }

        .engineer-module .message-avatar {
            width: 40px;
            height: 40px;
            flex-shrink: 0;
            background: var(--noir-ink);
            color: var(--blanc-pure);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
        }

        .engineer-module .message-avatar.user {
            background: var(--noir-graphite);
        }

        .engineer-module .message-content {
            flex: 1;
        }

        .engineer-module .message-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .engineer-module .message-sender {
            font-size: var(--text-sm);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
        }

        .engineer-module .message-time {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .engineer-module .message-text {
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
            padding: 16px 20px;
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
        }

        .engineer-module .message-text pre {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            padding: 16px;
            margin: 16px 0;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            overflow-x: auto;
        }

        .engineer-module .message-text strong {
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
        }

        /* ==================== 滚动条（优化为右侧固定） ==================== */
        .engineer-module .task-list-container::-webkit-scrollbar {
            width: 8px;
        }

        .engineer-module .task-list-container::-webkit-scrollbar-track {
            background: var(--blanc-pearl);
            border-left: 1px solid var(--blanc-mist);
        }

        .engineer-module .task-list-container::-webkit-scrollbar-thumb {
            background: var(--blanc-cloud);
            transition: background 0.3s ease;
        }

        .engineer-module .task-list-container::-webkit-scrollbar-thumb:hover {
            background: var(--noir-silver);
        }

        /* 其他滚动条保持原样 */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--blanc-pearl);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--blanc-cloud);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--noir-silver);
        }

        /* ==================== 响应式 ==================== */
        @media (max-width: 1400px) {
            .kanban-board {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 1200px) {
            .engineer-module .quick-stats {
                display: none;
            }
            
            .conversation-list {
                width: 320px;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 0;
            }

            .engineer-module {
                height: 100vh;
            }

            .conversation-layout {
                flex-direction: column;
            }

            .conversation-list {
                width: 100%;
                height: 40%;
                border-right: none;
                border-bottom: 1px solid var(--blanc-mist);
            }

            .docs-container {
                flex-direction: column;
            }

            .docs-sidebar {
                width: 100%;
                height: 200px;
                border-right: none;
                border-bottom: 1px solid var(--blanc-mist);
            }
        }

        .memory-space-module {
            max-width: 1600px;
            margin: 64px auto 48px auto;
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            height: 750px;  /* ✅ 固定高度 */
            display: flex;
        }

        .memory-space-module .memory-overview {
            width: 380px;
            border-right: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            min-height: 0;  /* ✅ 关键：允许收缩 */
        }

        .memory-space-module .overview-header {
            padding: 32px 24px 24px 24px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .memory-space-module .overview-title {
            font-family: var(--font-secondary);
            font-size: var(--text-xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            margin-bottom: 8px;
            letter-spacing: -0.02em;
        }

        .memory-space-module .overview-subtitle {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .memory-space-module .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            padding: 24px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .memory-space-module .stat-card {
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .memory-space-module .stat-card:hover {
            box-shadow: var(--shadow-sm);
            transform: translateY(-2px);
        }

        .memory-space-module .engineer-module .stat-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            margin-bottom: 8px;
        }

        .memory-space-module .engineer-module .stat-value {
            font-size: var(--text-2xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            font-family: var(--font-mono);
        }

        .memory-space-module .recent-memories {
            padding: 24px;
        }

        .memory-space-module .recent-header {
            font-size: var(--text-sm);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 16px;
        }

        .memory-space-module .recent-item {
            padding: 12px 0;
            border-bottom: 1px solid var(--blanc-mist);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .memory-space-module .recent-item:last-child {
            border-bottom: none;
        }

        .memory-space-module .recent-item:hover {
            padding-left: 8px;
        }

        .memory-space-module .recent-item-type {
            font-size: 11px;
            color: var(--noir-silver);
            margin-bottom: 4px;
        }

        .memory-space-module .recent-item-title {
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-tight);
        }

        .memory-space-module .memory-stream {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--blanc-pure);
            min-height: 0;  /* ✅ 血泪教训：关键属性 */
            overflow: hidden;  /* ✅ 隐藏溢出，滚动在子元素 */
        }

        .memory-space-module .stream-filters {
            display: flex;
            gap: 12px;
            flex-shrink: 0;  /* ✅ 筛选栏不收缩 */
            padding: 24px 32px;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
        }

        .memory-space-module .filter-chip {
            padding: 8px 16px;
            font-size: var(--text-sm);
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            color: var(--noir-graphite);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .memory-space-module .filter-chip:hover {
            border-color: var(--noir-steel);
        }

        .memory-space-module .filter-chip.active {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .memory-space-module .memory-timeline {
            flex: 1;
            overflow-y: auto;
            padding: 40px 32px 40px 72px;
            position: relative;
            min-height: 0;
        }

        .memory-space-module .memory-timeline::before {
            content: '';
            position: absolute;
            left: 32px;
            top: 0;
            bottom: 0;
            width: 1px;
            background: var(--blanc-mist);
        }

        .memory-space-module .memory-item {
            position: relative;
            margin-bottom: 32px;
            transition: all 0.3s ease;
        }

        .memory-space-module .memory-marker {
            position: absolute;
            left: -48px;
            top: 0;
            width: 16px;
            height: 16px;
            border: 2px solid var(--noir-ink);
            background: var(--blanc-pure);
        }

        .memory-space-module .memory-marker.decision {
            background: var(--noir-ink);
        }

        .memory-space-module .memory-marker.solution {
            border-color: var(--noir-graphite);
        }

        .memory-space-module .memory-marker.knowledge {
            border-color: var(--noir-silver);
            background: var(--blanc-snow);
        }

        .memory-space-module .memory-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 24px;
            transition: all 0.3s ease;
        }

        .memory-space-module .memory-card:hover {
            box-shadow: var(--shadow-sm);
            transform: translateX(4px);
        }

        .memory-space-module .memory-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }

        .memory-space-module .memory-type-badge {
            display: inline-block;
            padding: 4px 12px;
            font-size: 11px;
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
            margin-bottom: 8px;
        }

        .memory-space-module .memory-type-badge.decision {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .memory-space-module .memory-type-badge.solution {
            border-color: var(--noir-graphite);
        }

        .memory-space-module .memory-type-badge.knowledge {
            border-color: var(--noir-silver);
        }

        .memory-space-module .memory-title {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 6px;
        }

        .memory-space-module .memory-meta {
            display: flex;
            gap: 16px;
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .memory-space-module .memory-content {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            line-height: var(--leading-relaxed);
            margin-top: 12px;
        }

        .memory-space-module .memory-tags {
            display: flex;
            gap: 8px;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        .memory-space-module .memory-tag {
            padding: 4px 12px;
            font-size: 11px;
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
        }

        /* ==================== 实时脉动模块 ==================== */
        .pulse-module.version-content[data-version="1"] {
            display: flex !important;
            flex-direction: column !important;
        }

        .pulse-module {
            max-width: 1600px;
            margin: 64px auto 48px auto;
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            height: 750px;  /* ✅ 固定高度 */
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .pulse-module-header {
            padding: 32px 40px;
            border-bottom: 1px solid var(--blanc-mist);
            flex-shrink: 0;
        }

        .pulse-header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .pulse-module-title {
            font-family: var(--font-secondary);
            font-size: var(--text-2xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            letter-spacing: -0.02em;
        }

        .pulse-status-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: 6px 16px;
            border: 1px solid var(--noir-silver);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
        }

        .pulse-status-dot {
            width: 6px;
            height: 6px;
            background: #4A7C59;
            animation: pulse-green 2s ease-in-out infinite;
        }

        .pulse-info-bar {
            display: flex;
            align-items: center;
            gap: 24px;
            padding: 20px;
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
        }

        .pulse-info-section {
            display: flex;
            align-items: center;
            gap: 16px;
            flex: 1;
        }

        .pulse-avatar {
            width: 48px;
            height: 48px;
            flex-shrink: 0;
            background: var(--noir-graphite);
            color: var(--blanc-pure);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-base);
            font-weight: var(--weight-medium);
        }

        .pulse-details {
            flex: 1;
        }

        .pulse-name {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 4px;
        }

        .pulse-meta {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .pulse-quick-stats {
            display: flex;
            gap: 32px;
            padding-left: 32px;
            border-left: 1px solid var(--blanc-mist);
        }

        .pulse-stat-item {
            text-align: center;
        }

        .pulse-stat-value {
            font-size: var(--text-xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            line-height: 1;
            margin-bottom: 4px;
        }

        .pulse-stat-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            line-height: 1;
        }

        .pulse-module .tab-nav {
            display: flex;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
            flex-shrink: 0;
        }

        .pulse-module .tab-item {
            padding: 16px 32px;
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-silver);
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pulse-module .tab-item:hover {
            color: var(--noir-graphite);
            background: var(--blanc-pearl);
        }

        .pulse-module .tab-item.active {
            color: var(--noir-ink);
            background: var(--blanc-pure);
            border-bottom-color: var(--noir-ink);
        }

        .pulse-module .tab-badge {
            display: inline-block;
            margin-left: 8px;
            padding: 2px 8px;
            font-size: 11px;
            font-weight: var(--weight-semibold);
            background: var(--blanc-mist);
            color: var(--noir-steel);
        }

        .pulse-module .tab-item.active .tab-badge {
            background: var(--noir-ink);
            color: var(--blanc-pure);
        }

        .pulse-module .tab-content {
            flex: 1;
            overflow-y: auto;
            background: var(--blanc-pure);
            min-height: 0;
        }

        .pulse-module .tab-pane {
            display: none;
        }

        .pulse-module .tab-pane.active {
            display: block;
        }

        .pulse-module .content-filters {
            padding: 20px 40px;
            border-bottom: 1px solid var(--blanc-mist);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--blanc-pure);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .pulse-module .filter-chips {
            display: flex;
            gap: 12px;
        }

        .pulse-module .filter-chip {
            padding: 8px 20px;
            font-size: var(--text-sm);
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            color: var(--noir-graphite);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pulse-module .filter-chip:hover {
            border-color: var(--noir-steel);
            background: var(--blanc-pearl);
        }

        .pulse-module .filter-chip.active {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .pulse-module .search-input {
            width: 280px;
            padding: 8px 16px;
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            font-size: var(--text-sm);
            color: var(--noir-graphite);
        }

        .pulse-module .search-input:focus {
            outline: none;
            border-color: var(--noir-steel);
        }

        .pulse-module .search-input::placeholder {
            color: var(--noir-ash);
        }

        .pulse-module .event-list {
            background: var(--blanc-pure);
        }

        .pulse-module .event-item {
            display: flex;
            gap: 20px;
            padding: 24px 40px;
            border-bottom: 1px solid var(--blanc-mist);
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .pulse-module .event-item:hover {
            background: var(--blanc-pearl);
        }

        .pulse-module .event-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            flex-shrink: 0;
            margin-top: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pulse-module .event-checkbox:hover {
            border-color: var(--noir-steel);
        }

        .pulse-module .event-content {
            flex: 1;
        }

        .pulse-module .event-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 20px;
            margin-bottom: 8px;
        }

        .pulse-module .event-title-section {
            flex: 1;
        }

        .pulse-module .event-title {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: 4px;
            line-height: var(--leading-tight);
        }

        .pulse-module .event-meta {
            font-size: var(--text-sm);
            color: var(--noir-silver);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .pulse-module .event-time {
            font-size: var(--text-sm);
            color: var(--noir-silver);
            white-space: nowrap;
        }

        .pulse-module .event-description {
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
            margin-bottom: 8px;
        }

        .pulse-module .event-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .pulse-module .event-tag {
            padding: 4px 12px;
            border: 1px solid var(--blanc-cloud);
            font-size: var(--text-xs);
            color: var(--noir-graphite);
        }

        .pulse-module .timeline-view {
            padding: 40px 40px 40px 80px;
            position: relative;
        }

        .pulse-module .timeline-view::before {
            content: '';
            position: absolute;
            left: 40px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--blanc-mist);
        }

        .pulse-module .timeline-date-group {
            margin-bottom: 48px;
        }

        .pulse-module .date-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
            position: relative;
            left: -48px;
        }

        .pulse-module .date-marker {
            width: 16px;
            height: 16px;
            background: var(--noir-ink);
            flex-shrink: 0;
        }

        .pulse-module .date-label {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
        }

        .pulse-module .date-count {
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .pulse-module .timeline-event {
            position: relative;
            margin-bottom: 32px;
        }

        .pulse-module .timeline-event::before {
            content: '';
            position: absolute;
            left: -48px;
            top: 0;
            width: 16px;
            height: 16px;
            border: 2px solid var(--noir-ink);
            background: var(--blanc-pure);
        }

        .pulse-module .timeline-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 24px;
            transition: all 0.3s ease;
        }

        .pulse-module .timeline-card:hover {
            box-shadow: var(--shadow-sm);
            transform: translateX(4px);
        }

        .pulse-module .timeline-card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }

        .pulse-module .timeline-card-title {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 6px;
        }

        .pulse-module .timeline-card-meta {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .pulse-module .timeline-card-time {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            font-family: var(--font-mono);
        }

        .pulse-module .timeline-card-description {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            line-height: var(--leading-relaxed);
            margin-top: 12px;
        }

        .pulse-module .timeline-card-tags {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }

        .pulse-module .timeline-card-tag {
            padding: 4px 12px;
            font-size: 11px;
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
        }

        .pulse-module .analytics-container {
            padding: 40px;
        }

        .pulse-module .overview-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
            margin-bottom: 40px;
        }

        .pulse-module .overview-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 24px;
            transition: all 0.3s ease;
        }

        .pulse-module .overview-card:hover {
            box-shadow: var(--shadow-sm);
        }

        .pulse-module .overview-label {
            font-size: var(--text-sm);
            color: var(--noir-silver);
            margin-bottom: 12px;
        }

        .pulse-module .overview-value {
            font-size: 42px;
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            line-height: 1;
            margin-bottom: 8px;
        }

        .pulse-module .overview-change {
            font-size: var(--text-xs);
            color: var(--noir-steel);
        }

        .pulse-module .chart-section {
            margin-bottom: 40px;
        }

        .pulse-module .section-header {
            padding-bottom: 16px;
            border-bottom: 1px solid var(--blanc-mist);
            margin-bottom: 24px;
        }

        .pulse-module .section-title {
            font-size: var(--text-xl);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: 4px;
        }

        .pulse-module .section-description {
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .pulse-module .trend-chart {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 32px;
            height: 320px;
            position: relative;
        }

        .pulse-module .chart-bars {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            height: 240px;
            gap: 12px;
        }

        .pulse-module .chart-bar-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
        }

        .pulse-module .chart-bar {
            width: 100%;
            background: var(--noir-ink);
            transition: all 0.3s ease;
            position: relative;
        }

        .pulse-module .chart-bar:hover {
            background: var(--noir-charcoal);
        }

        .pulse-module .chart-bar-value {
            position: absolute;
            top: -24px;
            left: 50%;
            transform: translateX(-50%);
            font-size: var(--text-xs);
            color: var(--noir-graphite);
            font-weight: var(--weight-medium);
        }

        .pulse-module .chart-bar-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            text-align: center;
        }

        .pulse-module .category-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }

        .pulse-module .category-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 24px;
        }

        .pulse-module .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .pulse-module .category-title {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
        }

        .pulse-module .category-total {
            font-size: var(--text-xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
        }

        .pulse-module .category-items {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .pulse-module .category-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--blanc-pearl);
        }

        .pulse-module .category-item:last-child {
            border-bottom: none;
        }

        .pulse-module .category-item-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .pulse-module .category-item-bar {
            width: 80px;
            height: 6px;
            background: var(--blanc-mist);
            position: relative;
        }

        .pulse-module .category-item-bar-fill {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background: var(--noir-ink);
        }

        .pulse-module .category-item-name {
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            min-width: 120px;
        }

        .pulse-module .category-item-count {
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
        }

        .pulse-module .category-item-percent {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            margin-left: 8px;
        }

        .pulse-module .heatmap-section {
            margin-top: 40px;
        }

        .pulse-module .heatmap {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 32px;
        }

        .pulse-module .heatmap-grid {
            display: grid;
            grid-template-columns: auto repeat(7, 1fr);
            gap: 8px;
        }

        .pulse-module .heatmap-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 12px;
        }

        .pulse-module .heatmap-cell {
            aspect-ratio: 1;
            background: var(--blanc-mist);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            color: var(--noir-silver);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .pulse-module .heatmap-cell:hover {
            box-shadow: var(--shadow-xs);
        }

        .pulse-module .heatmap-cell.level-1 { background: var(--blanc-cloud); }
        .pulse-module .heatmap-cell.level-2 { background: var(--noir-ash); color: var(--blanc-pure); }
        .pulse-module .heatmap-cell.level-3 { background: var(--noir-steel); color: var(--blanc-pure); }
        .pulse-module .heatmap-cell.level-4 { background: var(--noir-graphite); color: var(--blanc-pure); }
        .pulse-module .heatmap-cell.level-5 { background: var(--noir-ink); color: var(--blanc-pure); }

        .pulse-module .heatmap-legend {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--blanc-mist);
        }

        .pulse-module .legend-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            margin-right: 8px;
        }

        .pulse-module .legend-item {
            width: 20px;
            height: 20px;
            border: 1px solid var(--blanc-mist);
        }

        .devops-module {
            max-width: 1600px;
            margin: 64px auto 48px auto;
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            display: flex;
            flex-direction: column;
        }

        .devops-module-header {
            padding: var(--space-5) var(--space-6);
            border-bottom: 1px solid var(--blanc-mist);
        }

        .devops-header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-4);
        }

        .devops-module-title {
            font-family: var(--font-secondary);
            font-size: var(--text-2xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            letter-spacing: -0.02em;
        }

        .devops-status-badge {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: 6px 16px;
            border: 1px solid var(--noir-silver);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
        }

        .devops-status-dot {
            width: 6px;
            height: 6px;
            background: var(--status-success);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        .devops-info-bar {
            display: flex;
            align-items: center;
            gap: var(--space-5);
            padding: var(--space-4);
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
        }

        .devops-info-section {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .devops-details {
            flex: 1;
        }

        .devops-name {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 4px;
        }

        .devops-meta {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .devops-quick-stats {
            display: flex;
            gap: var(--space-6);
            padding-left: var(--space-6);
            border-left: 1px solid var(--blanc-mist);
        }

        .devops-stat-item {
            text-align: center;
        }

        .devops-stat-value {
            font-size: var(--text-xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            margin-bottom: 4px;
        }

        .devops-stat-value.alert {
            color: var(--status-critical);
        }

        .devops-stat-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .devops-tab-navigation {
            display: flex;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
        }

        .devops-tab-item {
            padding: var(--space-3) var(--space-6);
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-silver);
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .devops-tab-item:hover {
            color: var(--noir-graphite);
            background: var(--blanc-pearl);
        }

        .devops-tab-item.active {
            color: var(--noir-ink);
            background: var(--blanc-pure);
            border-bottom-color: var(--noir-ink);
        }

        .devops-tab-badge {
            display: inline-block;
            margin-left: var(--space-2);
            padding: 2px 8px;
            font-size: 11px;
            font-weight: var(--weight-semibold);
            background: var(--blanc-mist);
            color: var(--noir-steel);
        }

        .devops-tab-badge.alert {
            background: var(--status-critical);
            color: var(--blanc-pure);
        }

        .devops-tab-item.active .devops-tab-badge {
            background: var(--noir-ink);
            color: var(--blanc-pure);
        }

        .devops-tab-item.active .devops-tab-badge.alert {
            background: var(--status-critical);
        }

        .devops-tab-content-wrapper {
            flex: 1;
            overflow: hidden;
        }

        .devops-tab-pane {
            display: none;
            height: 750px;
        }

        .devops-tab-pane.active {
            display: flex;
            flex-direction: column;
        }

        .devops-info {
            display: flex;
            align-items: center;
            gap: 24px;
            padding: 20px;
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
        }

        .devops-avatar {
            width: 48px;
            height: 48px;
            background: var(--noir-ink);
            color: var(--blanc-pure);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-base);
            font-weight: var(--weight-medium);
        }

        .devops-details {
            flex: 1;
        }

        .devops-name {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 4px;
        }

        .devops-meta {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .devops-module .tab-navigation {
            display: flex;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
        }

        .devops-module .tab-item {
            padding: 16px 32px;
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-silver);
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .devops-module .tab-item:hover {
            color: var(--noir-graphite);
            background: var(--blanc-pearl);
        }

        .devops-module .tab-item.active {
            color: var(--noir-ink);
            background: var(--blanc-pure);
            border-bottom-color: var(--noir-ink);
        }

        .devops-module .tab-badge.alert {
            background: var(--status-critical);
            color: var(--blanc-pure);
        }

        .devops-module .tab-item.active .tab-badge.alert {
            background: var(--status-critical);
        }

        .devops-module .tab-content-wrapper {
            flex: 1;
            overflow: hidden;
        }

        .devops-module .tab-pane {
            display: none;
            height: 750px;
        }

        .devops-module .tab-pane.active {
            display: flex;
            flex-direction: column;
        }

        /* 运维日志时间轴 */
        .log-filters {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px 40px;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
            flex-shrink: 0;
        }

        .filter-group {
            display: flex;
            gap: 12px;
        }

        .log-timeline {
            flex: 1;
            overflow-y: auto;
            padding: 40px 40px 40px 80px;
            position: relative;
        }

        .log-timeline::before {
            content: '';
            position: absolute;
            left: 40px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--blanc-mist);
        }

        .log-item {
            position: relative;
            margin-bottom: 48px;
        }

        .log-marker {
            position: absolute;
            left: -48px;
            top: 0;
            width: 16px;
            height: 16px;
            border: 2px solid var(--noir-ink);
            background: var(--blanc-pure);
        }

        .log-marker.critical {
            border-color: var(--status-critical);
            background: var(--status-critical);
        }

        .log-marker.warning {
            border-color: var(--status-warning);
            background: var(--status-warning);
        }

        .log-marker.normal {
            border-color: var(--status-success);
            background: var(--blanc-pure);
        }

        .log-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 24px;
            transition: all 0.3s ease;
        }

        .log-card:hover {
            box-shadow: var(--shadow-sm);
            transform: translateX(4px);
        }

        .log-card.critical {
            border-left: 3px solid var(--status-critical);
        }

        .log-card.normal {
            border-left: 3px solid var(--status-success);
        }

        .log-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 16px;
        }

        .log-title-group {
            flex: 1;
        }

        .log-type {
            display: inline-block;
            padding: 4px 12px;
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            margin-bottom: 8px;
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-charcoal);
        }

        .log-type.critical {
            border-color: var(--status-critical);
            color: var(--status-critical);
        }

        .log-type.warning {
            border-color: var(--status-warning);
            color: var(--status-warning);
        }

        .log-type.normal {
            border-color: var(--status-success);
            color: var(--status-success);
        }

        .log-type.update {
            border-color: var(--noir-steel);
            color: var(--noir-steel);
        }

        .log-title {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
        }

        .log-time {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            white-space: nowrap;
            font-family: var(--font-mono);
        }

        .log-content {
            margin-bottom: 16px;
        }

        .log-description {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            line-height: var(--leading-relaxed);
            margin-bottom: 12px;
        }

        .log-metrics {
            display: flex;
            gap: 24px;
            flex-wrap: wrap;
        }

        .metric {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            font-family: var(--font-mono);
        }

        .log-footer {
            display: flex;
            align-items: center;
            gap: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--blanc-mist);
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .log-category {
            flex: 1;
        }

        .log-status {
            padding: 4px 12px;
            border: 1px solid var(--blanc-cloud);
            font-weight: var(--weight-medium);
        }

        .log-status.resolved {
            background: var(--status-success);
            color: var(--blanc-pure);
            border-color: var(--status-success);
        }

        .log-status.pending {
            background: var(--status-warning);
            color: var(--blanc-pure);
            border-color: var(--status-warning);
        }

        .log-actions {
            display: flex;
            gap: 8px;
        }

        .log-action-btn {
            padding: 4px 12px;
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            color: var(--noir-graphite);
            font-size: var(--text-xs);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .log-action-btn:hover {
            background: var(--blanc-pearl);
        }

        /* Bug看板 */
        .bug-board {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
        }

        .bug-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
        }

        .bug-filters {
            display: flex;
            gap: 12px;
        }

        .bug-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
        }

        .bug-column {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 20px;
        }

        .bug-column-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--noir-ink);
        }

        .bug-column-title {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
        }

        .bug-column-count {
            font-size: var(--text-sm);
            font-family: var(--font-mono);
            color: var(--noir-silver);
        }

        .bug-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .bug-card {
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            padding: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .bug-card:hover {
            box-shadow: var(--shadow-sm);
            transform: translateY(-2px);
        }

        .bug-id {
            font-size: var(--text-xs);
            font-family: var(--font-mono);
            color: var(--noir-silver);
            margin-bottom: 8px;
        }

        .bug-title {
            font-size: var(--text-sm);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 8px;
        }

        .bug-description {
            font-size: var(--text-xs);
            color: var(--noir-steel);
            line-height: var(--leading-relaxed);
            margin-bottom: 12px;
        }

        .bug-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .bug-priority {
            padding: 2px 8px;
            border: 1px solid var(--blanc-cloud);
            font-weight: var(--weight-medium);
        }

        .bug-priority.p0 {
            border-color: var(--status-critical);
            color: var(--status-critical);
        }

        .bug-priority.p1 {
            border-color: var(--status-warning);
            color: var(--status-warning);
        }

        .bug-priority.p2 {
            border-color: var(--noir-steel);
            color: var(--noir-steel);
        }

        /* 系统状态 */
        .system-status {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
        }

        .status-overview {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
            margin-bottom: 40px;
        }

        .status-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 24px;
            text-align: center;
        }

        .status-value {
            font-size: var(--text-2xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            margin-bottom: 8px;
            font-family: var(--font-mono);
        }

        .status-value.success {
            color: var(--status-success);
        }

        .status-value.critical {
            color: var(--status-critical);
        }

        .status-label {
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .service-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .service-item {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 20px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .service-info {
            flex: 1;
        }

        .service-name {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 4px;
        }

        .service-endpoint {
            font-size: var(--text-xs);
            font-family: var(--font-mono);
            color: var(--noir-silver);
        }

        .service-metrics {
            display: flex;
            gap: 32px;
            align-items: center;
        }

        .service-metric {
            text-align: center;
        }

        .service-metric .metric-value {
            font-size: var(--text-base);
            font-weight: var(--weight-medium);
            font-family: var(--font-mono);
            color: var(--noir-charcoal);
            margin-bottom: 4px;
        }

        .service-metric .metric-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .service-status-indicator {
            width: 12px;
            height: 12px;
            background: var(--status-success);
        }

        .service-status-indicator.offline {
            background: var(--status-critical);
        }

        /* 知识库 */
        .knowledge-base {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
        }

        .kb-categories {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            margin-bottom: 40px;
        }

        .kb-category {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .kb-category:hover {
            box-shadow: var(--shadow-sm);
            transform: translateY(-4px);
        }

        .kb-category-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 12px;
        }

        .kb-category-count {
            font-size: var(--text-sm);
            color: var(--noir-silver);
            margin-bottom: 16px;
        }

        .kb-category-description {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            line-height: var(--leading-relaxed);
        }

        .kb-recent {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 32px;
        }

        .kb-section-title {
            font-size: var(--text-xl);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: 24px;
        }

        .kb-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .kb-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            border: 1px solid var(--blanc-mist);
            background: var(--blanc-pure);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .kb-item:hover {
            background: var(--blanc-pearl);
        }

        .kb-item-info {
            flex: 1;
        }

        .kb-item-title {
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
            margin-bottom: 4px;
        }

        .kb-item-meta {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .kb-item-action {
            padding: 6px 16px;
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            color: var(--noir-graphite);
            font-size: var(--text-xs);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .kb-item-action:hover {
            background: var(--blanc-pearl);
        }
        /* ==================== Noah AI代码管家模块 ==================== */
        .code-manager-module.version-content[data-version="1"] {
            display: flex !important;
            flex-direction: column !important;
        }

        .code-manager-module {
            max-width: 1600px;
            margin: 64px auto 48px auto;
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            display: flex;
            flex-direction: column;
            /* ✅ 不设置固定height，让背景自适应 */
        }

        .code-manager-module .module-header {
            padding: 32px 40px !important;
            border-bottom: 1px solid var(--blanc-mist) !important;
            display: block !important;  /* ← 关键！确保子元素垂直排列 */
            flex-shrink: 0 !important;
        }

        .code-manager-module .header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .code-manager-module .module-title {
            font-family: var(--font-secondary);
            font-size: var(--text-2xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            letter-spacing: -0.02em;
        }

        .code-manager-module .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 16px;
            border: 1px solid var(--noir-silver);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
        }

        .code-manager-module .status-dot {
            width: 6px;
            height: 6px;
            background: var(--code-green);
            animation: pulse-green 2s ease-in-out infinite;
        }

        .code-manager-module .code-stats-grid {
            display: grid !important;
            grid-template-columns: repeat(4, 1fr) !important;
            gap: 20px !important;
        }

        .code-manager-module .stat-card {
            padding: 20px;
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            transition: all 0.3s ease;
        }

        .code-manager-module .stat-card:hover {
            background: var(--blanc-pearl);
            box-shadow: var(--shadow-sm);
        }

        .code-manager-module .stat-value {
            font-family: var(--font-mono);
            font-size: var(--text-3xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            margin-bottom: 8px;
            letter-spacing: -0.03em;
        }

        .code-manager-module .stat-label {
            font-size: var(--text-sm);
            color: var(--noir-silver);
            font-weight: var(--weight-regular);
        }

        .code-manager-module .stat-change {
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            color: var(--noir-ash);
            margin-top: 4px;
        }

        .code-manager-module .stat-change.positive {
            color: var(--code-green);
        }

        .code-manager-module .stat-change.negative {
            color: var(--code-red);
        }

        .code-manager-module .tab-navigation {
            display: flex;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
        }

        .code-manager-module .tab-item {
            padding: 16px 32px;
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-silver);
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .code-manager-module .tab-item:hover {
            color: var(--noir-graphite);
            background: var(--blanc-pearl);
        }

        .code-manager-module .tab-item.active {
            color: var(--noir-ink);
            background: var(--blanc-pure);
            border-bottom-color: var(--noir-ink);
        }

        .code-manager-module .tab-badge {
            display: inline-block;
            margin-left: 8px;
            padding: 2px 8px;
            font-size: 11px;
            font-weight: var(--weight-semibold);
            background: var(--blanc-mist);
            color: var(--noir-steel);
            font-family: var(--font-mono);
        }

        .code-manager-module .tab-item.active .tab-badge {
            background: var(--noir-ink);
            color: var(--blanc-pure);
        }

        .code-manager-module .tab-content-wrapper {
            flex: 1;
            overflow: hidden;
            min-height: 0;
        }

        .code-manager-module .tab-pane {
            display: none;
            height: 750px;  /* ✅ 固定高度 */
            flex-direction: column;
        }

        .code-manager-module .tab-pane.active {
            display: flex;
            flex-direction: column;
            min-height: 0;  /* ✅ 关键：允许收缩 */
        }

        .code-manager-module .search-header {
            padding: 24px 40px;
            background: var(--blanc-snow);
            border-bottom: 1px solid var(--blanc-mist);
        }

        .code-manager-module .search-box-wrapper {
            position: relative;
            max-width: 800px;
        }

        .code-manager-module .search-box {
            width: 100%;
            padding: 16px 48px 16px 20px;
            font-size: var(--text-base);
            font-family: var(--font-mono);
            background: var(--blanc-pure);
            border: 2px solid var(--blanc-mist);
            color: var(--noir-ink);
            transition: all 0.3s ease;
        }

        .code-manager-module .search-box:focus {
            outline: none;
            border-color: var(--noir-ink);
            box-shadow: var(--shadow-sm);
        }

        .code-manager-module .search-box::placeholder {
            color: var(--noir-ash);
            font-family: var(--font-mono);
        }

        .code-manager-module .search-icon {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .code-manager-module .search-filters {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        .code-manager-module .filter-chip {
            padding: 6px 12px;
            font-size: var(--text-xs);
            font-family: var(--font-mono);
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            color: var(--noir-graphite);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .code-manager-module .filter-chip:hover {
            border-color: var(--noir-steel);
        }

        .code-manager-module .filter-chip.active {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .code-manager-module .code-list {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            min-height: 0;
        }

        .code-manager-module .code-directory {
            margin-bottom: 40px;
        }

        .code-manager-module .directory-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            margin-bottom: 16px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .code-manager-module .directory-icon {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .code-manager-module .directory-path {
            font-family: var(--font-mono);
            font-size: var(--text-base);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
        }

        .code-manager-module .directory-count {
            margin-left: auto;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            color: var(--noir-ash);
        }

        .code-manager-module .code-item {
            padding: 20px;
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            margin-bottom: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .code-manager-module .code-item:hover {
            background: var(--blanc-pearl);
            box-shadow: var(--shadow-sm);
            transform: translateX(4px);
        }

        .code-manager-module .code-item-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 12px;
        }

        .code-manager-module .code-filename {
            font-family: var(--font-mono);
            font-size: var(--text-base);
            font-weight: var(--weight-medium);
            color: var(--noir-ink);
        }

        .code-manager-module .code-extension {
            padding: 2px 8px;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            background: var(--blanc-mist);
            color: var(--noir-steel);
        }

        .code-manager-module .code-lines {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .code-manager-module .code-item-meta {
            display: flex;
            gap: 24px;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            color: var(--noir-ash);
        }

        .code-manager-module .code-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .code-manager-module .code-tag {
            padding: 4px 10px;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            background: var(--blanc-pearl);
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
        }

        .code-manager-module .code-detail-view {
            display: flex;
            height: 100%;
        }

        .code-manager-module .code-detail-sidebar {
            width: 320px;
            border-right: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
            overflow-y: auto;
            padding: 32px;
        }

        .code-manager-module .detail-section {
            margin-bottom: 32px;
        }

        .code-manager-module .detail-section-title {
            font-size: var(--text-sm);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .code-manager-module .detail-info-grid {
            display: grid;
            gap: 16px;
        }

        .code-manager-module .detail-info-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .code-manager-module .detail-info-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .code-manager-module .detail-info-value {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--noir-ink);
            word-break: break-all;
        }

        .code-manager-module .code-detail-main {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
        }

        .code-manager-module .code-preview {
            background: var(--noir-ink);
            border: 1px solid var(--noir-charcoal);
            padding: 24px;
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            line-height: var(--leading-relaxed);
            color: var(--blanc-snow);
            overflow-x: auto;
        }

        .code-manager-module .code-line {
            display: flex;
            gap: 24px;
        }

        .code-manager-module .line-number {
            color: var(--noir-silver);
            user-select: none;
            text-align: right;
            min-width: 40px;
        }

        .code-manager-module .line-content {
            flex: 1;
            color: var(--blanc-pearl);
        }

        .code-manager-module .changelog-container {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            min-height: 0;
        }

        .code-manager-module .changelog-item {
            position: relative;
            padding-left: 40px;
            padding-bottom: 32px;
        }

        .code-manager-module .changelog-item::before {
            content: '';
            position: absolute;
            left: 11px;
            top: 24px;
            bottom: 0;
            width: 1px;
            background: var(--blanc-mist);
        }

        .code-manager-module .changelog-item:last-child::before {
            display: none;
        }

        .code-manager-module .changelog-marker {
            position: absolute;
            left: 4px;
            top: 4px;
            width: 16px;
            height: 16px;
            background: var(--blanc-pure);
            border: 2px solid var(--noir-ink);
        }

        .code-manager-module .changelog-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 24px;
            transition: all 0.3s ease;
        }

        .code-manager-module .changelog-card:hover {
            box-shadow: var(--shadow-sm);
        }

        .code-manager-module .changelog-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .code-manager-module .changelog-time {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .code-manager-module .changelog-type {
            padding: 4px 10px;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            border: 1px solid var(--blanc-cloud);
        }

        .code-manager-module .changelog-type.added {
            color: var(--code-green);
            border-color: var(--code-green);
        }

        .code-manager-module .changelog-type.modified {
            color: var(--code-orange);
            border-color: var(--code-orange);
        }

        .code-manager-module .changelog-type.deleted {
            color: var(--code-red);
            border-color: var(--code-red);
        }

        .code-manager-module .changelog-description {
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
            margin-bottom: 12px;
        }

        .code-manager-module .changelog-files {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .code-manager-module .changelog-file {
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            padding: 4px 10px;
            background: var(--blanc-pearl);
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
        }

        .code-manager-module .conflict-warning {
            padding: 24px 40px;
            background: var(--blanc-snow);
            border-bottom: 1px solid var(--blanc-mist);
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .code-manager-module .warning-icon {
            font-family: var(--font-mono);
            font-size: var(--text-lg);
            color: var(--code-orange);
        }

        .code-manager-module .warning-text {
            flex: 1;
        }

        .code-manager-module .warning-title {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: 4px;
        }

        .code-manager-module .warning-description {
            font-size: var(--text-sm);
            color: var(--noir-steel);
        }

        .code-manager-module .conflict-list {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            min-height: 0;
        }

        .code-manager-module .conflict-card {
            background: var(--blanc-snow);
            border: 2px solid var(--code-orange);
            padding: 24px;
            margin-bottom: 20px;
        }

        .code-manager-module .conflict-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .code-manager-module .conflict-title {
            font-family: var(--font-mono);
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
        }

        .code-manager-module .conflict-severity {
            padding: 4px 12px;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            background: var(--code-orange);
            color: var(--blanc-pure);
        }

        .code-manager-module .conflict-description {
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
            margin-bottom: 16px;
        }

        .code-manager-module .conflict-files-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-top: 16px;
        }

        .code-manager-module .conflict-file-box {
            padding: 16px;
            background: var(--blanc-pearl);
            border: 1px solid var(--blanc-cloud);
        }

        .code-manager-module .conflict-file-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            margin-bottom: 8px;
        }

        .code-manager-module .conflict-file-path {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--noir-ink);
            word-break: break-all;
        }

        .code-manager-module .stats-dashboard {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            min-height: 0;
        }

        .code-manager-module .stats-section {
            margin-bottom: 48px;
        }

        .code-manager-module .stats-section-title {
            font-family: var(--font-secondary);
            font-size: var(--text-xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            margin-bottom: 24px;
        }

        .code-manager-module .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .code-manager-module .stats-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 32px;
            text-align: center;
        }

        .code-manager-module .stats-card-value {
            font-family: var(--font-mono);
            font-size: var(--text-3xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            margin-bottom: 8px;
        }

        .code-manager-module .stats-card-label {
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .code-manager-module .language-breakdown {
            margin-top: 32px;
        }

        .code-manager-module .language-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            margin-bottom: 12px;
        }

        .code-manager-module .language-name {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-ink);
            min-width: 120px;
        }

        .code-manager-module .language-bar {
            flex: 1;
            height: 8px;
            background: var(--blanc-pearl);
            position: relative;
            overflow: hidden;
        }

        .code-manager-module .language-bar-fill {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background: var(--noir-ink);
            transition: width 0.6s ease;
        }

        .code-manager-module .language-percentage {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--noir-silver);
            min-width: 60px;
            text-align: right;
        }

    
        /* ==================== 全栈工程师模块（完整版） ==================== */

        /* ==================== 白色奢华美学系统（严格遵循架构师工作台） ==================== */
        

        

        

        .fullstack-complete-module {
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            margin-bottom: var(--space-7);  /* ✅ 和架构师模块一致 */
            display: flex;
            flex-direction: column;
        }

        /* ==================== 模块头部 ==================== */
        .fullstack-complete-module .module-header {
            padding: 32px 40px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .fullstack-complete-module .header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .fullstack-complete-module .module-title {
            font-family: var(--font-secondary);
            font-size: var(--text-2xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            letter-spacing: -0.02em;
        }

        .fullstack-complete-module .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 16px;
            border: 1px solid var(--noir-silver);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
        }

        .fullstack-complete-module .status-dot {
            width: 6px;
            height: 6px;
            background: #4A7C59;
            animation: pulse-green 2s ease-in-out infinite;
        }

        @keyframes pulse-green {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(0.9); }
        }

        .fullstack-complete-module .engineer-info {
            display: flex;
            align-items: center;
            gap: 24px;
            padding: 20px;
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
        }

        .fullstack-complete-module .info-section {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .fullstack-complete-module .engineer-avatar {
            width: 48px;
            height: 48px;
            background: var(--noir-ink);
            color: var(--blanc-pure);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-base);
            font-weight: var(--weight-medium);
        }

        .fullstack-complete-module .engineer-details {
            flex: 1;
        }

        .fullstack-complete-module .engineer-name {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 4px;
        }

        .fullstack-complete-module .engineer-meta {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .fullstack-complete-module .quick-stats {
            display: flex;
            gap: 32px;
            padding-left: 32px;
            border-left: 1px solid var(--blanc-mist);
        }

        .fullstack-complete-module .stat-item {
            text-align: center;
        }

        .fullstack-complete-module .stat-value {
            font-size: var(--text-xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            margin-bottom: 4px;
        }

        .fullstack-complete-module .stat-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        /* ==================== Tab导航 ==================== */
        .fullstack-complete-module .tab-navigation {
            display: flex;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
        }

        .fullstack-complete-module .tab-item {
            padding: 16px 32px;
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-silver);
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .tab-item:hover {
            color: var(--noir-graphite);
            background: var(--blanc-pearl);
        }

        .tab-item.active {
            color: var(--noir-ink);
            background: var(--blanc-pure);
            border-bottom-color: var(--noir-ink);
        }

        .fullstack-complete-module .tab-badge {
            display: inline-block;
            margin-left: 8px;
            padding: 2px 8px;
            font-size: 11px;
            font-weight: var(--weight-semibold);
            background: var(--blanc-mist);
            color: var(--noir-steel);
        }

        .tab-item.active .fullstack-complete-module .tab-badge {
            background: var(--noir-ink);
            color: var(--blanc-pure);
        }

        /* ==================== Tab内容 ==================== */
        .fullstack-complete-module .tab-content-wrapper {
            flex: 1;
            overflow: hidden;
        }

        .fullstack-complete-module .tab-pane {
            display: none;
            height: 750px;  /* ✅ 固定高度 */
        }

        .fullstack-complete-module .tab-pane.active {
            display: flex;           /* ✅ flex布局 */
            flex-direction: column;
            min-height: 0;           /* ✅ 关键属性：允许收缩 */
        }

        /* ==================== 事件流（与架构师工作台完全一致） ==================== */
        .fullstack-complete-module .event-timeline {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            min-height: 0;  /* ✅ 关键：允许flex收缩，滚动条生效 */
        }

        .fullstack-complete-module .timeline-filters {
            display: flex;
            gap: 12px;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .fullstack-complete-module .filter-chip {
            padding: 8px 16px;
            font-size: var(--text-sm);
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            color: var(--noir-graphite);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-chip:hover {
            border-color: var(--noir-steel);
        }

        .filter-chip.active {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .fullstack-complete-module .timeline-item {
            position: relative;
            padding-left: 40px;
            padding-bottom: 32px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: 11px;
            top: 24px;
            bottom: 0;
            width: 1px;
            background: var(--blanc-mist);
        }

        .timeline-item:last-child::before {
            display: none;
        }

        .fullstack-complete-module .timeline-marker {
            position: absolute;
            left: 0;
            top: 0;
            width: 24px;
            height: 24px;
            border: 2px solid var(--noir-ink);
            background: var(--blanc-pure);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fullstack-complete-module .event-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 24px;
            transition: all 0.3s ease;
        }

        .event-card:hover {
            box-shadow: var(--shadow-sm);
            transform: translateX(4px);
        }

        .fullstack-complete-module .event-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }

        .fullstack-complete-module .event-title {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 6px;
        }

        .fullstack-complete-module .event-meta {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .fullstack-complete-module .event-time {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            white-space: nowrap;
        }

        .fullstack-complete-module .event-description {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            line-height: var(--leading-relaxed);
            margin-top: 12px;
        }

        .fullstack-complete-module .event-tags {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }

        .fullstack-complete-module .event-tag {
            padding: 4px 12px;
            font-size: 11px;
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
        }

        /* ==================== 任务看板（优化为3列） ==================== */
        .fullstack-complete-module .task-board-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .fullstack-complete-module .task-board-header {
            padding: 24px 40px;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
        }

        .fullstack-complete-module .filter-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .fullstack-complete-module .filter-chips {
            display: flex;
            gap: 12px;
        }

        .fullstack-complete-module .sort-select {
            padding: 8px 16px;
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .sort-select:hover {
            border-color: var(--noir-steel);
        }

        .sort-select:focus {
            outline: none;
            border-color: var(--noir-ink);
        }

        .fullstack-complete-module .kanban-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            padding: 40px;
            flex: 1;
            overflow-y: auto;
            min-height: 0;  /* ✅ 关键：允许flex收缩，滚动条生效 */
        }

        .fullstack-complete-module .kanban-column {
            background: var(--blanc-pearl);
            border: 1px solid var(--blanc-mist);
            display: flex;
            flex-direction: column;
            min-height: 400px;
        }

        .fullstack-complete-module .column-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
        }

        .fullstack-complete-module .column-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
        }

        .fullstack-complete-module .column-count {
            padding: 2px 10px;
            font-size: 11px;
            font-family: var(--font-mono);
            background: var(--blanc-mist);
            color: var(--noir-steel);
        }

        .fullstack-complete-module .column-cards {
            padding: 24px;
            overflow-y: auto;
            flex: 1;
        }

        /* ==================== 任务卡片 ==================== */
        .fullstack-complete-module .task-card {
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .task-card:hover {
            box-shadow: var(--shadow-sm);
            transform: translateX(4px);
        }

        .fullstack-complete-module .task-card-header {
            margin-bottom: 12px;
        }

        .fullstack-complete-module .task-id {
            display: inline-block;
            padding: 4px 12px;
            font-size: 11px;
            font-family: var(--font-mono);
            background: var(--noir-ink);
            color: var(--blanc-pure);
            margin-bottom: 8px;
        }

        .fullstack-complete-module .task-title {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 8px;
        }

        .fullstack-complete-module .task-status-badge {
            display: inline-block;
            padding: 4px 12px;
            font-size: 11px;
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
            background: var(--blanc-pearl);
        }

        .task-status-badge.parallel {
            background: var(--noir-graphite);
            color: var(--blanc-pure);
            border-color: var(--noir-graphite);
        }

        .fullstack-complete-module .task-description {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            line-height: var(--leading-relaxed);
            margin: 12px 0;
        }

        .fullstack-complete-module .task-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 16px 0;
            padding-top: 12px;
            border-top: 1px solid var(--blanc-mist);
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .fullstack-complete-module .task-estimate {
            font-family: var(--font-mono);
        }

        .fullstack-complete-module .priority-badge {
            padding: 4px 10px;
            font-size: 11px;
            font-family: var(--font-mono);
        }

        .priority-badge.p0 {
            background: var(--noir-ink);
            color: var(--blanc-pure);
        }

        .priority-badge.p1 {
            background: var(--noir-graphite);
            color: var(--blanc-pure);
        }

        .priority-badge.p2 {
            border: 1px solid var(--noir-steel);
            color: var(--noir-steel);
        }

        .fullstack-complete-module .task-assignee {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .fullstack-complete-module .assignee-avatar {
            width: 24px;
            height: 24px;
            background: var(--noir-ink);
            color: var(--blanc-pure);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: var(--weight-medium);
        }

        .fullstack-complete-module .task-actions {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        .fullstack-complete-module .task-action-button {
            flex: 1;
            padding: 8px 16px;
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .task-action-button:hover {
            background: var(--blanc-pearl);
        }

        .task-action-button.primary {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .task-action-button.primary:hover {
            background: var(--noir-charcoal);
        }

        /* ==================== 代码审查时间线 ==================== */
        .fullstack-complete-module .code-review-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .fullstack-complete-module .code-review-timeline {
            flex: 1;
            overflow-y: auto;
            padding: 40px 40px 40px 80px;
            position: relative;
            min-height: 0;  /* ✅ 关键：允许flex收缩，滚动条生效 */
        }

        .code-review-timeline::before {
            content: '';
            position: absolute;
            left: 40px;
            top: 80px;
            bottom: 0;
            width: 2px;
            background: var(--blanc-mist);
        }

        .fullstack-complete-module .review-filters {
            display: flex;
            gap: 12px;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .fullstack-complete-module .review-item {
            position: relative;
            margin-bottom: 48px;
        }

        .fullstack-complete-module .review-marker {
            position: absolute;
            left: -48px;
            top: 0;
            width: 16px;
            height: 16px;
            border: 2px solid var(--noir-ink);
            background: var(--blanc-pure);
        }

        .review-marker.approved {
            background: var(--noir-ink);
        }

        .review-marker.pending {
            background: var(--blanc-pure);
        }

        .fullstack-complete-module .review-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 24px;
            transition: all 0.3s ease;
        }

        .review-card:hover {
            box-shadow: var(--shadow-sm);
        }

        .fullstack-complete-module .review-card-header {
            margin-bottom: 16px;
        }

        .fullstack-complete-module .review-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: 8px;
        }

        .fullstack-complete-module .review-meta {
            display: flex;
            gap: 16px;
            align-items: center;
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .fullstack-complete-module .review-status {
            display: inline-block;
            padding: 4px 12px;
            font-size: var(--text-xs);
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
        }

        .review-status.approved {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .review-status.pending {
            background: var(--blanc-pearl);
        }

        .fullstack-complete-module .review-content {
            margin: 24px 0;
        }

        .fullstack-complete-module .content-label {
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
            margin-bottom: 12px;
        }

        .fullstack-complete-module .content-list {
            padding-left: 20px;
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
        }

        .fullstack-complete-module .content-item {
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .content-item::before {
            content: '├─';
            color: var(--noir-silver);
            font-family: var(--font-mono);
        }

        .content-item:last-child::before {
            content: '└─';
        }

        .fullstack-complete-module .review-comment {
            background: var(--blanc-pearl);
            border-left: 2px solid var(--noir-ink);
            padding: 16px 20px;
            margin: 24px 0;
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
        }

        .fullstack-complete-module .review-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .fullstack-complete-module .review-action-button {
            padding: 8px 16px;
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .review-action-button:hover {
            background: var(--blanc-pearl);
        }

        .review-action-button.approve {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        .review-action-button.approve:hover {
            background: var(--noir-charcoal);
        }

        /* ==================== 技术文档库 ==================== */
        .fullstack-complete-module .docs-container {
            display: flex;
            height: 100%;
        }

        .fullstack-complete-module .docs-sidebar {
            width: 280px;
            border-right: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
            display: flex;
            flex-direction: column;
        }

        .fullstack-complete-module .docs-search {
            padding: 20px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .fullstack-complete-module .docs-categories {
            flex: 1;
            overflow-y: auto;
        }

        .fullstack-complete-module .category-group {
            border-bottom: 1px solid var(--blanc-mist);
        }

        .fullstack-complete-module .category-header {
            padding: 16px 20px;
            font-size: var(--text-sm);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            background: var(--blanc-pearl);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-header:hover {
            background: var(--blanc-silk);
        }

        .fullstack-complete-module .category-items {
            display: none;
        }

        .category-items.active {
            display: block;
        }

        .fullstack-complete-module .doc-item {
            padding: 12px 20px 12px 40px;
            font-size: var(--text-sm);
            color: var(--noir-steel);
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 2px solid transparent;
        }

        .doc-item:hover {
            background: var(--blanc-pearl);
            color: var(--noir-graphite);
        }

        .doc-item.active {
            background: var(--blanc-pure);
            color: var(--noir-ink);
            border-left-color: var(--noir-ink);
        }

        .fullstack-complete-module .docs-content {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            min-height: 0;  /* ✅ 关键：允许flex收缩，滚动条生效 */
        }

        .fullstack-complete-module .doc-header {
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .fullstack-complete-module .doc-title {
            font-family: var(--font-secondary);
            font-size: var(--text-2xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            margin-bottom: 12px;
        }

        .fullstack-complete-module .doc-meta {
            display: flex;
            gap: 24px;
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .doc-

        .fullstack-complete-module .doc-section {
            margin-bottom: 32px;
        }

        .fullstack-complete-module .doc-section-title {
            font-size: var(--text-lg);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 16px;
        }

        .fullstack-complete-module .doc-section-content {
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
        }

        .fullstack-complete-module .doc-code-block {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            padding: 20px;
            margin: 20px 0;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            line-height: var(--leading-relaxed);
            overflow-x: auto;
        }

        /* ==================== 对话历史（与架构师工作台一致） ==================== */
        .fullstack-complete-module .conversation-layout {
            display: flex;
            height: 100%;
        }

        .fullstack-complete-module .conversation-list {
            width: 380px;
            border-right: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
            display: flex;
            flex-direction: column;
        }

        .fullstack-complete-module .conversation-search {
            padding: 20px 20px 16px 20px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .fullstack-complete-module .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--blanc-cloud);
            font-size: var(--text-sm);
            background: var(--blanc-pure);
            color: var(--noir-graphite);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--noir-silver);
        }

        .fullstack-complete-module .conversation-items {
            flex: 1;
            overflow-y: auto;
        }

        .fullstack-complete-module .conversation-item {
            padding: 20px;
            border-bottom: 1px solid var(--blanc-mist);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .conversation-item:hover {
            background: var(--blanc-pearl);
        }

        .conversation-item.active {
            background: var(--blanc-pure);
            border-left: 2px solid var(--noir-ink);
        }

        .fullstack-complete-module .conversation-item-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 8px;
        }

        .fullstack-complete-module .conversation-item-title {
            font-size: var(--text-sm);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
        }

        .fullstack-complete-module .conversation-item-time {
            font-size: 11px;
            color: var(--noir-silver);
        }

        .fullstack-complete-module .conversation-item-preview {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-bottom: 8px;
        }

        .fullstack-complete-module .conversation-item-meta {
            display: flex;
            gap: 16px;
            font-size: 11px;
            color: var(--noir-silver);
        }

        .fullstack-complete-module .conversation-detail {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--blanc-pure);
        }

        .fullstack-complete-module .detail-header {
            padding: 24px 32px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .fullstack-complete-module .detail-title {
            font-size: var(--text-xl);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: 12px;
        }

        .fullstack-complete-module .detail-meta {
            display: flex;
            gap: 24px;
            font-size: var(--text-sm);
            color: var(--noir-steel);
        }

        .fullstack-complete-module .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 32px;
            min-height: 0;  /* ✅ 关键：允许flex收缩，滚动条生效 */
        }

        .fullstack-complete-module .message {
            display: flex;
            gap: 16px;
            margin-bottom: 32px;
        }

        .fullstack-complete-module .message-avatar {
            width: 40px;
            height: 40px;
            flex-shrink: 0;
            background: var(--noir-ink);
            color: var(--blanc-pure);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
        }

        .message-avatar.user {
            background: var(--noir-graphite);
        }

        .fullstack-complete-module .message-content {
            flex: 1;
        }

        .fullstack-complete-module .message-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .fullstack-complete-module .message-sender {
            font-size: var(--text-sm);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
        }

        .fullstack-complete-module .message-time {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .fullstack-complete-module .message-text {
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
            padding: 16px 20px;
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
        }

        .message-text pre {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            padding: 16px;
            margin: 16px 0;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            overflow-x: auto;
        }

        .message-text strong {
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
        }

        /* ==================== 滚动条 ==================== */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--blanc-pearl);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--blanc-cloud);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--noir-silver);
        }

        /* ==================== 响应式 ==================== */
        @media (max-width: 1400px) {
            .fullstack-complete-module .kanban-board {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 1200px) {
            .fullstack-complete-module .quick-stats {
                display: none;
            }
            
            .fullstack-complete-module .conversation-list {
                width: 320px;
            }
        }

        @media (max-width: 768px) {
            

            .fullstack-complete-module {
                margin: 0;  /* ✅ 移动端取消上下边距 */
            }

            .fullstack-complete-module .conversation-layout {
                flex-direction: column;
            }

            .fullstack-complete-module .conversation-list {
                width: 100%;
                height: 40%;
                border-right: none;
                border-bottom: 1px solid var(--blanc-mist);
            }

            .fullstack-complete-module .docs-container {
                flex-direction: column;
            }

            .fullstack-complete-module .docs-sidebar {
                width: 100%;
                height: 200px;
                border-right: none;
                border-bottom: 1px solid var(--blanc-mist);
            }
        }

        /* ==================== Footer 主容器 ==================== */
        .taskflow-footer {
            background: var(--blanc-pure);
            border-top: 1px solid var(--blanc-mist);
            margin-top: var(--space-8);
        }

        /* ==================== Footer 内容区 ==================== */
        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--space-8) var(--space-6);
        }

        /* ==================== 上部分：品牌与链接 ==================== */
        .footer-main {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 1.5fr;
            gap: var(--space-8);
            padding-bottom: var(--space-8);
            border-bottom: 1px solid var(--blanc-mist);
            margin-bottom: var(--space-6);
        }

        /* 品牌区 */
        .footer-brand {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .footer-logo {
            font-size: var(--text-xl);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            letter-spacing: -0.01em;
            margin-bottom: var(--space-2);
        }

        .footer-tagline {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            line-height: var(--leading-relaxed);
            max-width: 300px;
        }

        .footer-tagline-en {
            color: var(--noir-silver);
            font-size: var(--text-xs);
            margin-top: var(--space-2);
            font-style: italic;
        }

        /* 链接列 */
        .footer-column {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .footer-column-title {
            font-size: var(--text-sm);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: var(--space-2);
            letter-spacing: 0.05em;
        }

        .footer-link {
            font-size: var(--text-sm);
            color: var(--noir-steel);
            text-decoration: none;
            transition: all var(--duration-normal) var(--ease-luxury);
            display: inline-block;
        }

        .footer-link:hover {
            color: var(--noir-ink);
            transform: translateX(4px);
        }

        .footer-link-badge {
            display: inline-block;
            margin-left: var(--space-2);
            padding: 2px 8px;
            background: var(--noir-ink);
            color: var(--blanc-pure);
            font-size: 10px;
            font-weight: var(--weight-medium);
            letter-spacing: 0.05em;
        }

        /* 订阅区 */
        .footer-subscribe {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .footer-subscribe-title {
            font-size: var(--text-sm);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: var(--space-2);
        }

        .footer-subscribe-desc {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            line-height: var(--leading-relaxed);
        }

        .subscribe-form {
            display: flex;
            gap: 0;
            margin-top: var(--space-2);
        }

        .subscribe-input {
            flex: 1;
            padding: 10px 16px;
            border: 1px solid var(--blanc-cloud);
            border-right: none;
            background: var(--blanc-snow);
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            font-family: var(--font-primary);
            transition: all var(--duration-normal) var(--ease-luxury);
        }

        .subscribe-input:focus {
            outline: none;
            background: var(--blanc-pure);
            border-color: var(--noir-steel);
        }

        .subscribe-input::placeholder {
            color: var(--noir-ash);
        }

        .subscribe-button {
            padding: 10px 20px;
            background: var(--noir-ink);
            border: 1px solid var(--noir-ink);
            color: var(--blanc-pure);
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            cursor: pointer;
            transition: all var(--duration-normal) var(--ease-luxury);
        }

        .subscribe-button:hover {
            background: var(--noir-charcoal);
            border-color: var(--noir-charcoal);
        }

        /* ==================== 中部分：统计数据 ==================== */
        .footer-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-6);
            padding: var(--space-6) 0;
            border-bottom: 1px solid var(--blanc-mist);
            margin-bottom: var(--space-6);
        }

        .stat-item {
            text-align: center;
            padding: var(--space-4);
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            transition: all var(--duration-normal) var(--ease-luxury);
        }

        .stat-item:hover {
            background: var(--blanc-pure);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .stat-value {
            font-size: 28px;
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: var(--space-2);
            letter-spacing: -0.02em;
        }

        .stat-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            letter-spacing: 0.05em;
        }

        /* ==================== 下部分：版权与备案 ==================== */
        .footer-bottom {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: var(--space-5);
        }

        .footer-copyright {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }

        .copyright-text {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .copyright-links {
            display: flex;
            gap: var(--space-4);
        }

        .copyright-link {
            font-size: var(--text-xs);
            color: var(--noir-steel);
            text-decoration: none;
            transition: all var(--duration-normal) var(--ease-luxury);
        }

        .copyright-link:hover {
            color: var(--noir-ink);
        }

        .footer-meta {
            display: flex;
            align-items: center;
            gap: var(--space-5);
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .meta-badge {
            padding: 4px 10px;
            background: var(--blanc-pearl);
            border: 1px solid var(--blanc-cloud);
            font-size: 10px;
            font-weight: var(--weight-medium);
            color: var(--noir-steel);
            letter-spacing: 0.05em;
        }
    
</style>
</head>
<body>
    <!-- 项目切换演示器 -->
    <div class="project-switcher">
        <div class="switcher-title">切换项目/模块 ↓</div>
        <div class="project-option active" onclick="switchProject('zhihuicang')">指挥舱 v1.7</div>
        <div class="project-option" onclick="switchProject('datacenter')">数据中心 v2.0</div>
        <div class="project-option" onclick="switchProject('monitor')">监控台 v1.5</div>
        <div class="project-option" onclick="switchProject('workflow')">工作流 v3.2</div>
    </div>

    <!-- 顶部品牌栏（固定不变） -->
    <header class="brand-header">
        <div class="brand-container">
            <!-- 品牌标识 + Slogan -->
            <div class="brand-identity">
                <div class="brand-logo-line">
                    <div class="brand-icon">F</div>
                    <h1 class="brand-name">任务所·Flow</h1>
                </div>
                <p class="brand-slogan">用对话开工，用流程收工 —— AI开发工厂新实践</p>
            </div>
            <!-- 操作区 -->
            <div class="brand-actions">
                <div class="action-item">
                    <span class="status-dot"></span>
                    <span>ONLINE</span>
                </div>
                <div class="action-item" onclick="clearCache()">
                    <span>清除缓存</span>
                </div>
            </div>
        </div>
    </header>

    <!-- 项目Hero区（可切换不同项目/模块） -->
    <section class="page-hero">
        <div class="bg-grid"></div>
        
        <div class="hero-container">
            <!-- 项目标识 -->
            <div class="project-brand">
                <div class="project-logo" id="projectIcon">F</div>
                <h2 class="project-title">
                    <span id="projectName">指挥舱</span>
                    <span class="version-badge" id="projectVersion">v1.7</span>
                </h2>
                <p class="project-description" id="projectDesc">
                    企业级AI任务中枢 | 多项目支持 · 智能跟踪管理
                </p>
            </div>
            <!-- 项目元数据 -->
            <div class="project-meta-grid" id="projectMeta">
                <!-- 动态生成 -->
            </div>
        </div>
    </section>

    <!-- 主容器 -->
    <main class="main-container">

        <!-- 版本选择器 -->
        <div class="version-selector">
            <button class="version-btn active" data-version="1">版本1.0</button>
            <button class="version-btn" data-version="2">版本2.0</button>
            <button class="version-btn" data-version="3">版本3.0</button>
        </div>

        <!-- 版本2和3的空状态提示 -->
        <div id="emptyVersionMessage" style="display: none; text-align: center; padding: var(--space-8); background: var(--blanc-pure); border: 1px solid var(--blanc-mist); margin-bottom: var(--space-7);">
            <div style="font-size: 64px; margin-bottom: var(--space-4); opacity: 0.2;">▢</div>
            <div style="font-size: var(--text-xl); font-weight: var(--weight-semibold); color: var(--noir-steel); margin-bottom: var(--space-2);">此版本正在开发中</div>
            <div style="font-size: var(--text-sm); color: var(--noir-silver);">版本2.0 和版本3.0 的功能模块架构已规划，内容将在后续版本中完善</div>
        </div>

        <!-- 现有6个统计卡片 -->
        <div class="stats-section version-content" data-version="1">
            <div class="stats-label">现有统计</div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">57</div>
                    <div class="stat-label">总任务数</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">24</div>
                    <div class="stat-label">待处理</div>
                    <div class="stat-trend">↑ +3 今天</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">1</div>
                    <div class="stat-label">进行中</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">29</div>
                    <div class="stat-label">已完成</div>
                    <div class="stat-trend">↑ +2 今天</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">4</div>
                    <div class="stat-label">已取消</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">850K</div>
                    <div class="stat-label">Token使用</div>
                    <div class="stat-trend">↑ +25K 今天</div>
                </div>
            </div>
        </div>

        <!-- 新增3个统计卡片 -->
        <div class="stats-section version-content" data-version="1">
            <div class="stats-label">新增统计</div>
            <div class="stats-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                <div class="stat-card">
                    <div class="stat-value">156</div>
                    <div class="stat-label">事件数</div>
                    <div class="stat-trend">↑ +12 今天</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">5</div>
                    <div class="stat-label">会话</div>
                    <div class="stat-meta-row">156 消息</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">45</div>
                    <div class="stat-label">记忆</div>
                    <div class="stat-meta-row">12 决策</div>
                </div>
            </div>
        </div>

        <!-- ========== 项目透视模块 ========== -->
        <div class="page-container version-content" data-version="1">
            <!-- 模块头部 -->
            <div class="page-header">
                <div class="page-header-row">
                    <h2 class="page-title">项目透视塔</h2>
                    <div style="display: flex; gap: 12px; align-items: center;">
                    <span class="page-status-badge">
                        <span class="page-status-dot"></span>
                        监控中
                    </span>
                    </div>
                </div>

                <div class="page-info-bar">
                    <div class="page-info-section">
                        <div class="scan-meta-group">
                            <div class="scan-meta-item">
                                <span class="scan-meta-label">最后扫描</span>
                                <span class="scan-meta-value" id="lastScanTime">2025-11-19 14:30</span>
                            </div>
                            <div class="scan-meta-item">
                                <span class="scan-meta-label">扫描文件</span>
                                <span class="scan-meta-value" id="scanFilesCount">1,247</span>
                            </div>
                            <div class="scan-meta-item">
                                <span class="scan-meta-label">代码行数</span>
                                <span class="scan-meta-value" id="scanLinesCount">45,892</span>
                            </div>
                        </div>
                    </div>
                    <div class="page-quick-stats">
                        <div class="page-stat-item">
                            <div class="page-stat-value" id="insightImplementedCount">132</div>
                            <div class="page-stat-label">已实现</div>
                        </div>
                        <div class="page-stat-item">
                            <div class="page-stat-value" id="insightPartialCount">24</div>
                            <div class="page-stat-label">部分实现</div>
                        </div>
                        <div class="page-stat-item">
                            <div class="page-stat-value" id="insightIssuesCount">15</div>
                            <div class="page-stat-label">问题</div>
                        </div>
                        <div class="page-stat-item">
                            <div class="page-stat-value" id="insightSuggestionsCount">12</div>
                            <div class="page-stat-label">建议</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 主要内容 -->
            <div class="main-content">
                <!-- Tab导航 -->
                <div class="content-tabs">
                    <button class="tab-button active" onclick="switchTab('implemented')">
                        已实现功能
                        <span class="tab-count">132</span>
                    </button>
                    <button class="tab-button" onclick="switchTab('partial')">
                        部分实现
                        <span class="tab-count">24</span>
                    </button>
                    <button class="tab-button" onclick="switchTab('issues')">
                        问题清单
                        <span class="tab-count">15</span>
                    </button>
                    <button class="tab-button" onclick="switchTab('recommendations')">
                        架构建议
                        <span class="tab-count">12</span>
                    </button>
                    <button class="tab-button" onclick="switchTab('quickstart')">
                        架构师扫描
                        <span class="tab-count">指令</span>
                    </button>
                </div>

                <!-- Tab 1: 已实现功能 -->
                <div id="implemented" class="tab-panel active">
                    <div class="section-header">
                        <h2 class="section-title">已实现功能（132项）</h2>
                        <button class="expand-button">展开全部</button>
                    </div>

                    <div class="feature-module">
                        <div class="module-header-content">
                            <div>
                                <div class="module-title-text">Dashboard 模块</div>
                                <div class="completeness-bar">
                                    <span>完整度</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 92%"></div>
                                    </div>
                                    <span>92%</span>
                                </div>
                            </div>
                        </div>
                        <div class="module-meta">
                            <span>📂 src/components/Dashboard/</span>
                            <span>📄 TaskBoard.tsx +8个文件</span>
                        </div>
                        <div class="module-features">
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>任务看板可视化（支持拖拽、筛选、排序）</span>
                                <span class="feature-percentage">95%</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>事件流时间线（实时更新、多维度筛选）</span>
                                <span class="feature-percentage">88%</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>对话历史展示（搜索、分页、导出）</span>
                                <span class="feature-percentage">92%</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>统计图表模块（多种图表类型支持）</span>
                                <span class="feature-percentage">90%</span>
                            </div>
                        </div>
                    </div>

                    <div class="feature-module">
                        <div class="module-header-content">
                            <div>
                                <div class="module-title-text">知识库模块</div>
                                <div class="completeness-bar">
                                    <span>完整度</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 85%"></div>
                                    </div>
                                    <span>85%</span>
                                </div>
                            </div>
                        </div>
                        <div class="module-meta">
                            <span>📂 src/services/knowledge/</span>
                            <span>📄 Neo4jService.ts +5个文件</span>
                        </div>
                        <div class="module-features">
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>Neo4j 图数据库集成（CRUD操作完整）</span>
                                <span class="feature-percentage">90%</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>知识图谱可视化（D3.js渲染）</span>
                                <span class="feature-percentage">78%</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>语义搜索功能（向量检索+关键词）</span>
                                <span class="feature-percentage">82%</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>知识点关联推荐算法</span>
                                <span class="feature-percentage">88%</span>
                            </div>
                        </div>
                    </div>

                    <div class="feature-module">
                        <div class="module-header-content">
                            <div>
                                <div class="module-title-text">AI 对话模块</div>
                                <div class="completeness-bar">
                                    <span>完整度</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 75%"></div>
                                    </div>
                                    <span>75%</span>
                                </div>
                            </div>
                        </div>
                        <div class="module-meta">
                            <span>📂 src/services/ai/</span>
                            <span>📄 ClaudeAPI.ts +3个文件</span>
                        </div>
                        <div class="module-features">
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>Claude API 集成（多模型支持）</span>
                                <span class="feature-percentage">80%</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>流式响应处理（SSE实时推送）</span>
                                <span class="feature-percentage">70%</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>对话历史管理（持久化+缓存）</span>
                                <span class="feature-percentage">75%</span>
                            </div>
                        </div>
                    </div>

                    <div class="feature-module">
                        <div class="module-header-content">
                            <div>
                                <div class="module-title-text">Notion 集成模块</div>
                                <div class="completeness-bar">
                                    <span>完整度</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 68%"></div>
                                    </div>
                                    <span>68%</span>
                                </div>
                            </div>
                        </div>
                        <div class="module-meta">
                            <span>📂 src/services/notion/</span>
                            <span>📄 NotionAPI.ts +4个文件</span>
                        </div>
                        <div class="module-features">
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>Notion API 基础集成（OAuth认证）</span>
                                <span class="feature-percentage">75%</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>页面/数据库同步功能</span>
                                <span class="feature-percentage">60%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: 部分实现 -->
                <div id="partial" class="tab-panel">
                    <div class="section-header">
                        <h2 class="section-title">部分实现功能（24个）</h2>
                        <button class="expand-button">展开全部</button>
                    </div>

                    <!-- PARTIAL-001 -->
                    <div class="feature-module">
                        <div class="module-header-content">
                            <div>
                                <div class="module-title-text">REQ-010-D 事件监听器</div>
                                <div class="completeness-bar">
                                    <span>完整度</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 60%"></div>
                                    </div>
                                    <span>60%</span>
                                </div>
                            </div>
                        </div>
                        <div class="module-meta">
                            <span>📂 packages/core-domain/src/services/event_service.py</span>
                            <span>⏱️ 预估: 2.0h</span>
                            <span class="issue-priority p1">P1</span>
                        </div>
                        <div class="module-features">
                            <div style="margin-bottom: 12px; color: var(--noir-steel); font-size: 13px; font-weight: 600;">✅ 已完成:</div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>事件类型定义</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>EventEmitter实现</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>EventStore实现</span>
                            </div>
                            <div style="margin: 16px 0 12px 0; color: var(--status-warning); font-size: 13px; font-weight: 600;">❌ 缺失:</div>
                            <div class="feature-item" style="opacity: 0.6;">
                                <div class="feature-check" style="background: transparent; border: 2px solid var(--noir-steel);"></div>
                                <span>自动化监听器</span>
                            </div>
                            <div class="feature-item" style="opacity: 0.6;">
                                <div class="feature-check" style="background: transparent; border: 2px solid var(--noir-steel);"></div>
                                <span>智能推荐功能</span>
                            </div>
                        </div>
                    </div>

                    <!-- PARTIAL-002 -->
                    <div class="feature-module">
                        <div class="module-header-content">
                            <div>
                                <div class="module-title-text">Dashboard事件流完整可视化</div>
                                <div class="completeness-bar">
                                    <span>完整度</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 75%"></div>
                                    </div>
                                    <span>75%</span>
                                </div>
                            </div>
                        </div>
                        <div class="module-meta">
                            <span>📂 apps/dashboard/src/industrial_dashboard/templates.py</span>
                            <span>⏱️ 预估: 2.0h</span>
                            <span class="issue-priority p0">P0</span>
                        </div>
                        <div class="module-features">
                            <div style="margin-bottom: 12px; color: var(--noir-steel); font-size: 13px; font-weight: 600;">✅ 已完成:</div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>基础事件流展示</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>事件列表渲染</span>
                            </div>
                            <div style="margin: 16px 0 12px 0; color: var(--status-warning); font-size: 13px; font-weight: 600;">❌ 缺失:</div>
                            <div class="feature-item" style="opacity: 0.6;">
                                <div class="feature-check" style="background: transparent; border: 2px solid var(--noir-steel);"></div>
                                <span>事件筛选UI增强</span>
                            </div>
                            <div class="feature-item" style="opacity: 0.6;">
                                <div class="feature-check" style="background: transparent; border: 2px solid var(--noir-steel);"></div>
                                <span>统计图表</span>
                            </div>
                            <div class="feature-item" style="opacity: 0.6;">
                                <div class="feature-check" style="background: transparent; border: 2px solid var(--noir-steel);"></div>
                                <span>实时推送</span>
                            </div>
                        </div>
                    </div>

                    <!-- PARTIAL-003 -->
                    <div class="feature-module">
                        <div class="module-header-content">
                            <div>
                                <div class="module-title-text">项目记忆空间Dashboard UI</div>
                                <div class="completeness-bar">
                                    <span>完整度</span>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 50%"></div>
                                    </div>
                                    <span>50%</span>
                                </div>
                            </div>
                        </div>
                        <div class="module-meta">
                            <span>📂 apps/dashboard/</span>
                            <span>⏱️ 预估: 3.0h</span>
                            <span class="issue-priority p0">P0</span>
                        </div>
                        <div class="module-features">
                            <div style="margin-bottom: 12px; color: var(--noir-steel); font-size: 13px; font-weight: 600;">✅ 已完成:</div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>ProjectMemoryService完整</span>
                            </div>
                            <div class="feature-item">
                                <div class="feature-check"></div>
                                <span>API端点完整(11个)</span>
                            </div>
                            <div style="margin: 16px 0 12px 0; color: var(--status-warning); font-size: 13px; font-weight: 600;">❌ 缺失:</div>
                            <div class="feature-item" style="opacity: 0.6;">
                                <div class="feature-check" style="background: transparent; border: 2px solid var(--noir-steel);"></div>
                                <span>Dashboard记忆空间Tab UI</span>
                            </div>
                            <div class="feature-item" style="opacity: 0.6;">
                                <div class="feature-check" style="background: transparent; border: 2px solid var(--noir-steel);"></div>
                                <span>记忆搜索UI</span>
                            </div>
                            <div class="feature-item" style="opacity: 0.6;">
                                <div class="feature-check" style="background: transparent; border: 2px solid var(--noir-steel);"></div>
                                <span>记忆关系可视化</span>
                            </div>
                        </div>
                    </div>

                    <!-- 继续添加PARTIAL-004到PARTIAL-024，格式相同 -->
                    <!-- 为了简洁，这里省略，实际需要全部24个 -->
                    
                    <div class="empty-state" style="margin-top: 40px; padding: 40px; background: var(--blanc-snow); border: 1px dashed var(--blanc-cloud);">
                        <div class="empty-state-description">
                            💡 提示：以上展示前3个部分实现功能作为示例<br>
                            完整的24个功能数据已准备在 partial-features.json 中<br>
                            需要通过API端点动态加载显示
                        </div>
                    </div>
                </div>

                <!-- Tab 3: 问题清单 -->
                <div id="issues" class="tab-panel">
                    <div class="section-header">
                        <h2 class="section-title">问题清单（15个，按优先级排序）</h2>
                        <button class="expand-button">展开全部</button>
                    </div>

                    <div class="issue-card p0">
                        <div class="issue-header">
                            <div>
                                <div class="issue-title">API密钥硬编码暴露风险</div>
                            </div>
                            <div class="issue-priority p0">P0 严重</div>
                        </div>
                        <div class="issue-details">
                            <div class="issue-detail-row">
                                <span class="detail-label">位置</span>
                                <span class="detail-value">src/services/claude-api.ts:12-15</span>
                            </div>
                            <div class="issue-detail-row">
                                <span class="detail-label">影响</span>
                                <span class="detail-value">严重安全漏洞。API密钥直接写在代码中，一旦代码泄露可能导致API滥用和巨额费用损失。影响范围：所有Claude API调用。</span>
                            </div>
                            <div class="issue-detail-row">
                                <span class="detail-label">建议修复</span>
                                <span class="detail-value">立即迁移到环境变量（.env文件），使用 process.env.CLAUDE_API_KEY 读取。添加 .env 到 .gitignore，提供 .env.example 模板。</span>
                            </div>
                        </div>
                        <div class="issue-actions">
                            <button class="view-code-button">查看代码</button>
                            <button class="generate-task-button" onclick="generateTask('ISSUE-001')">生成任务</button>
                        </div>
                    </div>

                    <div class="issue-card p1">
                        <div class="issue-header">
                            <div>
                                <div class="issue-title">Props Drilling 过度嵌套导致维护困难</div>
                            </div>
                            <div class="issue-priority p1">P1 重要</div>
                        </div>
                        <div class="issue-details">
                            <div class="issue-detail-row">
                                <span class="detail-label">位置</span>
                                <span class="detail-value">src/components/Dashboard/TaskBoard.tsx</span>
                            </div>
                            <div class="issue-detail-row">
                                <span class="detail-label">影响</span>
                                <span class="detail-value">组件层级达到6层深度，状态通过props逐层传递。代码冗余度高，修改成本大，性能也受影响（不必要的re-render）。</span>
                            </div>
                            <div class="issue-detail-row">
                                <span class="detail-label">建议修复</span>
                                <span class="detail-value">引入状态管理方案：推荐 Zustand（轻量）或 Jotai（原子化）。也可考虑使用 React Context API + useReducer。</span>
                            </div>
                        </div>
                        <div class="issue-actions">
                            <button class="view-code-button">查看代码</button>
                            <button class="generate-task-button" onclick="generateTask('ISSUE-002')">生成任务</button>
                        </div>
                    </div>

                    <div class="issue-card p1">
                        <div class="issue-header">
                            <div>
                                <div class="issue-title">缺少全局错误边界导致白屏风险</div>
                            </div>
                            <div class="issue-priority p1">P1 重要</div>
                        </div>
                        <div class="issue-details">
                            <div class="issue-detail-row">
                                <span class="detail-label">位置</span>
                                <span class="detail-value">全局（未实现 ErrorBoundary 组件）</span>
                            </div>
                            <div class="issue-detail-row">
                                <span class="detail-label">影响</span>
                                <span class="detail-value">任何组件崩溃都会导致整个应用白屏，用户体验极差且难以追踪错误原因。生产环境问题难以复现和修复。</span>
                            </div>
                            <div class="issue-detail-row">
                                <span class="detail-label">建议修复</span>
                                <span class="detail-value">实现全局 ErrorBoundary 组件，捕获渲染错误并展示友好的错误页面。集成 Sentry 进行错误监控和日志上报。</span>
                            </div>
                        </div>
                        <div class="issue-actions">
                            <button class="view-code-button">查看代码</button>
                            <button class="generate-task-button" onclick="generateTask('ISSUE-003')">生成任务</button>
                        </div>
                    </div>

                    <div class="issue-card p1">
                        <div class="issue-header">
                            <div>
                                <div class="issue-title">代码重复：API调用逻辑分散在多处</div>
                            </div>
                            <div class="issue-priority p1">P1 重要</div>
                        </div>
                        <div class="issue-details">
                            <div class="issue-detail-row">
                                <span class="detail-label">位置</span>
                                <span class="detail-value">src/services/* (多个文件)</span>
                            </div>
                            <div class="issue-detail-row">
                                <span class="detail-label">影响</span>
                                <span class="detail-value">ClaudeAPI、NotionAPI、Neo4j各有独立的错误处理、重试逻辑、超时设置。修改一处需要同步修改多处，容易遗漏。</span>
                            </div>
                            <div class="issue-detail-row">
                                <span class="detail-label">建议修复</span>
                                <span class="detail-value">创建统一的 APIClient 基类，封装通用的请求拦截、错误处理、重试机制。各个API服务继承基类并专注于业务逻辑。</span>
                            </div>
                        </div>
                        <div class="issue-actions">
                            <button class="view-code-button">查看代码</button>
                            <button class="generate-task-button" onclick="generateTask('ISSUE-004')">生成任务</button>
                        </div>
                    </div>
                </div>

                <!-- Tab 4: 架构建议 -->
                <div id="recommendations" class="tab-panel">
                    <div class="section-header">
                        <h2 class="section-title">架构师建议（12条优化方案）</h2>
                        <button class="expand-button">展开全部</button>
                    </div>

                    <div class="recommendation-card">
                        <div class="recommendation-header">
                            <div class="recommendation-id">RECOMMENDATION-001</div>
                            <div class="recommendation-title">引入轻量级状态管理库（Zustand）</div>
                        </div>
                        <div class="rec-section">
                            <div class="rec-section-label">当前状态分析</div>
                            <div class="rec-section-content">
                                组件间通过 Props Drilling 传递状态，导致代码冗余和维护困难。Dashboard 组件层级达到 6 层，
                                每次状态更新需要逐层传递 props。TaskBoard、EventStream、ConversationHub 三个核心模块
                                都需要共享 user、project、theme 等全局状态，当前实现方式效率低下。
                            </div>
                        </div>
                        <div class="rec-section">
                            <div class="rec-section-label">建议方案</div>
                            <div class="rec-section-content">
                                引入 Zustand 作为轻量级状态管理方案。相比 Redux，Zustand API 更简洁（无需 Provider、action、reducer），
                                bundle size 仅 1KB，完全符合 React Hooks 风格。创建全局 store 管理用户信息、项目配置、主题设置等
                                共享状态，组件通过 useStore Hook 直接访问，彻底消除 Props Drilling。
                            </div>
                        </div>
                        <div class="recommendation-metrics">
                            <div class="metric-item">
                                <div class="metric-item-label">预期收益</div>
                                <div class="metric-item-value">代码量 -30%</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-item-label">预估工时</div>
                                <div class="metric-item-value">8 小时</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-item-label">影响范围</div>
                                <div class="metric-item-value">3 个核心模块</div>
                            </div>
                        </div>
                        <button class="adopt-button" onclick="adoptRecommendation('REC-001', this)">
                            采纳建议 → 生成任务卡片
                        </button>
                    </div>

                    <div class="recommendation-card">
                        <div class="recommendation-header">
                            <div class="recommendation-id">RECOMMENDATION-002</div>
                            <div class="recommendation-title">实现代码分割和路由懒加载</div>
                        </div>
                        <div class="rec-section">
                            <div class="rec-section-label">当前状态分析</div>
                            <div class="rec-section-content">
                                所有模块在首次加载时一次性打包，main bundle 达到 2.8MB（gzip后850KB），首屏加载时间
                                在 3G 网络下超过 4 秒。用户可能只使用 Dashboard 或 KnowledgeGraph 其中一个模块，
                                但被迫加载了所有未使用的代码，造成带宽和时间浪费。
                            </div>
                        </div>
                        <div class="rec-section">
                            <div class="rec-section-label">建议方案</div>
                            <div class="rec-section-content">
                                使用 React.lazy() 和 Suspense 实现路由级别的代码分割。Dashboard、KnowledgeGraph、
                                ConversationHub、ArchitectConsole 等大模块按需加载，配合 Loading 骨架屏提升加载体验。
                                预计首屏 bundle 可压缩至 400KB，首屏时间降至 1.5 秒以内，LCP 指标提升 60%。
                            </div>
                        </div>
                        <div class="recommendation-metrics">
                            <div class="metric-item">
                                <div class="metric-item-label">预期收益</div>
                                <div class="metric-item-value">首屏时间 -62%</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-item-label">预估工时</div>
                                <div class="metric-item-value">6 小时</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-item-label">影响范围</div>
                                <div class="metric-item-value">5 个大模块</div>
                            </div>
                        </div>
                        <button class="adopt-button" onclick="adoptRecommendation('REC-002', this)">
                            采纳建议 → 生成任务卡片
                        </button>
                    </div>

                    <div class="recommendation-card">
                        <span class="adopted-badge">已采纳</span>
                        <div class="recommendation-header">
                            <div class="recommendation-id">RECOMMENDATION-003</div>
                            <div class="recommendation-title">统一 API 错误处理和监控机制</div>
                        </div>
                        <div class="rec-section">
                            <div class="rec-section-label">当前状态分析</div>
                            <div class="rec-section-content">
                                各个 API 调用点分散处理错误，缺少统一的错误拦截和用户提示机制。Claude API、Notion API、
                                Neo4j 各有不同的错误处理逻辑，导致错误提示不一致，日志格式混乱，难以追踪 API 调用失败的
                                根本原因。生产环境问题排查效率低下。
                            </div>
                        </div>
                        <div class="rec-section">
                            <div class="rec-section-label">建议方案</div>
                            <div class="rec-section-content">
                                创建统一的 API Client 基类，使用 Axios 拦截器统一处理请求和响应。实现全局 Toast 提示系统，
                                根据 HTTP 状态码自动展示友好的错误信息。集成 Sentry 进行错误监控和日志上报，
                                包含错误堆栈、用户信息、请求参数等上下文，便于问题追踪和复现。
                            </div>
                        </div>
                        <div class="recommendation-metrics">
                            <div class="metric-item">
                                <div class="metric-item-label">预期收益</div>
                                <div class="metric-item-value">可维护性 +45%</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-item-label">预估工时</div>
                                <div class="metric-item-value">10 小时</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-item-label">影响范围</div>
                                <div class="metric-item-value">8 个 API 端点</div>
                            </div>
                        </div>
                        <button class="adopt-button adopted" disabled>
                            已生成任务 TASK-052
                        </button>
                    </div>

                    <div class="recommendation-card">
                        <div class="recommendation-header">
                            <div class="recommendation-id">RECOMMENDATION-004</div>
                            <div class="recommendation-title">优化 Neo4j 查询性能（添加索引）</div>
                        </div>
                        <div class="rec-section">
                            <div class="rec-section-label">当前状态分析</div>
                            <div class="rec-section-content">
                                知识图谱查询性能随着数据量增长显著下降。当前节点数超过 10,000 个后，复杂查询（3层关系遍历）
                                响应时间超过 2 秒，严重影响用户体验。主要原因是缺少针对高频查询字段的索引，
                                导致 Neo4j 需要全表扫描。
                            </div>
                        </div>
                        <div class="rec-section">
                            <div class="rec-section-label">建议方案</div>
                            <div class="rec-section-content">
                                分析慢查询日志，识别高频查询模式。为 KnowledgeNode 的 title、type、created_at 等字段
                                创建索引。为常用的关系查询路径创建复合索引。考虑引入缓存层（Redis）缓存热点查询结果，
                                TTL 设置为 5 分钟。预计查询性能提升 10-15 倍。
                            </div>
                        </div>
                        <div class="recommendation-metrics">
                            <div class="metric-item">
                                <div class="metric-item-label">预期收益</div>
                                <div class="metric-item-value">查询速度 +1200%</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-item-label">预估工时</div>
                                <div class="metric-item-value">5 小时</div>
                            </div>
                            <div class="metric-item">
                                <div class="metric-item-label">影响范围</div>
                                <div class="metric-item-value">知识图谱模块</div>
                            </div>
                        </div>
                        <button class="adopt-button" onclick="adoptRecommendation('REC-004', this)">
                            采纳建议 → 生成任务卡片
                        </button>
                    </div>
                                </div>

                <!-- Tab 5: 架构师扫描指令 -->
                <div id="quickstart" class="tab-panel">

                    <!-- 说明区域 -->
                    <div style="background: var(--blanc-snow); padding: var(--space-5); margin-bottom: var(--space-5); border: 1px solid var(--blanc-cloud);">
                        <div style="margin-bottom: var(--space-4);">
                            <h3 style="color: var(--noir-ink); font-size: var(--text-base); margin-bottom: var(--space-3); font-weight: var(--weight-semibold);">
                                使用说明
                            </h3>
                            <p style="color: var(--noir-steel); font-size: var(--text-sm); line-height: 1.7; margin-bottom: var(--space-3);">
                                透视塔数据更新需要架构师AI深度分析，不是简单的自动扫描。
                            </p>
                            <div style="color: var(--noir-graphite); font-size: var(--text-sm); line-height: 1.8;">
                                <div style="margin-bottom: 8px;">扫描代码，判断哪些功能完整实现</div>
                                <div style="margin-bottom: 8px;">识别哪些功能部分实现，缺什么部分</div>
                                <div style="margin-bottom: 8px;">发现新的架构问题和技术债</div>
                                <div>提出新的优化建议和改进方案</div>
                            </div>
                        </div>

                        <div style="border-top: 1px solid var(--blanc-cloud); padding-top: var(--space-4);">
                            <h3 style="color: var(--noir-ink); font-size: var(--text-base); margin-bottom: var(--space-3); font-weight: var(--weight-semibold);">
                                操作步骤
                            </h3>
                            <div style="color: var(--noir-graphite); font-size: var(--text-sm); line-height: 1.8;">
                                <div style="margin-bottom: 8px;">1. 点击下方复制指令按钮</div>
                                <div style="margin-bottom: 8px;">2. 打开新的Cursor窗口</div>
                                <div style="margin-bottom: 8px;">3. 粘贴指令，架构师AI自动开始工作</div>
                                <div style="margin-bottom: 8px;">4. 等待分析完成，约3-5分钟</div>
                                <div>5. 回到此页面刷新，查看更新结果</div>
                            </div>
                        </div>
                    </div>

                    <!-- 指令内容 - 使用滚动容器 -->
                    <div style="display: flex; flex-direction: column; min-height: 0; flex: 1;">
                        <div style="background: var(--blanc-pure); padding: var(--space-4); border: 1px solid var(--blanc-cloud); flex: 1; overflow-y: auto; min-height: 0;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-4); padding-bottom: var(--space-3); border-bottom: 1px solid var(--blanc-cloud);">
                                <h3 style="color: var(--noir-ink); font-size: var(--text-base); font-weight: var(--weight-semibold); margin: 0;">扫描指令内容</h3>
                                <button onclick="copyArchitectPrompt()" style="padding: 8px 20px; background: var(--noir-ink); color: var(--blanc-pure); border: none; cursor: pointer; font-size: var(--text-sm); font-weight: var(--weight-medium);">
                                    复制指令
                                </button>
                            </div>
                            
                            <pre id="architectPrompt" style="background: var(--blanc-pearl); padding: var(--space-4); font-size: 13px; line-height: 1.6; color: var(--noir-graphite); border: 1px solid var(--blanc-cloud); font-family: 'Menlo', 'Monaco', 'Courier New', monospace; white-space: pre-wrap; word-wrap: break-word; margin: 0;">你好，我任命你为本项目的架构师AI，请立即执行透视塔数据更新任务。

任务：深度扫描项目，更新透视塔4个数据文件

目标文件（必须更新）：
1. apps/dashboard/automation-data/v17-complete-features.json
2. apps/dashboard/automation-data/partial-features.json  
3. apps/dashboard/automation-data/project-issues.json
4. apps/dashboard/automation-data/architecture-suggestions.json

扫描要求：

第一步：扫描已完成任务
- 打开 database/data/tasks.db
- 查询 status='completed' 的所有任务
- 每个任务都是一个已实现功能

第二步：分析代码实现
- 检查各模块实际实现情况
- 判断功能是否完整可用
- 识别部分实现的功能（缺什么部分）

第三步：发现问题
- 代码质量问题
- 架构问题
- 技术债
- 安全隐患

第四步：提出建议
- 优化方案
- 重构建议
- 技术选型改进

第五步：更新JSON文件
保持现有格式，增量更新，不删除旧数据。

完成后请明确报告：更新了多少项功能、问题、建议。</pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        

        <!-- ========== 待开发任务模块（三层标头设计） ========== -->
    <div class="pending-features-module">
        <!-- ==================== 三层标头设计（完全对齐全栈工程师工作台） ==================== -->
        <div class="module-header">
            <!-- 第0层：模块分类标题 -->
            <div class="module-category">
                <h2 class="category-title">待开发任务池</h2>
            </div>

            <!-- 第1层：身份信息卡片 -->
            <div class="header-identity">
                <div class="identity-left">
                    <div class="module-avatar">PT</div>
                    <div class="module-info">
                        <h1 class="module-title">Pending Tasks Manager</h1>
                        <div class="module-meta">
                            <span>任务管理</span>
                            <span class="meta-separator">·</span>
                            <span>2025-11-20 15:42</span>
                            <span class="meta-separator">·</span>
                            <span class="sync-indicator"></span>
                            <span>实时同步</span>
                        </div>
                    </div>
                </div>
                <div class="identity-right">
                    <div class="stat-item">
                        <div class="stat-value">8</div>
                        <div class="stat-label">总任务</div>
                    </div>
                    <div class="stat-item highlight">
                        <div class="stat-value">2</div>
                        <div class="stat-label">待审核</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">4</div>
                        <div class="stat-label">进行中</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab导航 -->
        <div class="tab-navigation">
            <button class="tab-item active" onclick="switchPendingTab('user-requests')">
                用户需求
                <span class="tab-badge">4</span>
            </button>
            <button class="tab-item" onclick="switchPendingTab('architect-suggestions')">
                架构师建议
                <span class="tab-badge">4</span>
            </button>
        </div>

        <!-- Tab内容 -->
        <div class="tab-content-wrapper">
            <!-- Tab 1: 用户需求 -->
            <div id="user-requests" class="tab-pane active">
                <div class="task-grid">
                    <!-- 用户需求示例1 - 已转交开发 -->
                    <div class="task-card high-priority">
                        <div class="task-header">
                            <div>
                                <div class="task-id">REQ-USER-001</div>
                                <h3 class="task-title">实现实时协作编辑功能</h3>
                            </div>
                            <span class="task-source user">用户需求</span>
                        </div>
                        <div class="task-description">
                            用户希望能够像Google Docs一样，多人同时编辑任务描述和文档，实时看到其他人的修改。
                        </div>
                        <div class="task-requirements">
                            <div class="task-requirements-title">架构师优化后的需求</div>
                            <ul class="task-requirements-list">
                                <li>支持多人同时编辑，实时同步内容（WebSocket）</li>
                                <li>显示其他用户的光标位置和选区</li>
                                <li>自动解决内容冲突（CRDT算法）</li>
                                <li>完整的版本历史和回滚功能</li>
                                <li>离线编辑支持，上线后自动同步</li>
                            </ul>
                        </div>
                        <div class="task-tags">
                            <span class="task-tag">实时协作</span>
                            <span class="task-tag">WebSocket</span>
                            <span class="task-tag">CRDT</span>
                        </div>
                        <div class="task-meta">
                            <div class="task-meta-item">
                                <span class="task-meta-label">优先级</span>
                                <span class="task-priority high">P0 - 紧急</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">预计工时</span>
                                <span class="task-meta-value">20-24小时</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">提交时间</span>
                                <span class="task-meta-value">2025-11-18 10:30</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">当前状态</span>
                                <span class="task-meta-value">架构师已转交开发</span>
                            </div>
                        </div>
                        <div class="architect-status completed">
                            <span class="status-icon">✓</span>
                            <span>架构师已优化并分配给全栈工程师</span>
                        </div>
                    </div>

                    <!-- 用户需求示例2 - 架构师正在处理 -->
                    <div class="task-card medium-priority">
                        <div class="task-header">
                            <div>
                                <div class="task-id">REQ-USER-002</div>
                                <h3 class="task-title">移动端App开发</h3>
                            </div>
                            <span class="task-source user">用户需求</span>
                        </div>
                        <div class="task-description">
                            用户希望能在手机上随时随地管理任务，查看进度，接收通知。
                        </div>
                        <div class="task-requirements">
                            <div class="task-requirements-title">架构师优化后的需求</div>
                            <ul class="task-requirements-list">
                                <li>采用React Native实现跨平台（降低成本）</li>
                                <li>完整的任务管理功能（CRUD）</li>
                                <li>推送通知集成（Firebase Cloud Messaging）</li>
                                <li>离线模式支持（本地SQLite缓存）</li>
                                <li>与Web端数据同步（增量同步策略）</li>
                            </ul>
                        </div>
                        <div class="task-tags">
                            <span class="task-tag">移动端</span>
                            <span class="task-tag">React Native</span>
                        </div>
                        <div class="task-meta">
                            <div class="task-meta-item">
                                <span class="task-meta-label">优先级</span>
                                <span class="task-priority medium">P1 - 重要</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">预计工时</span>
                                <span class="task-meta-value">80-100小时</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">提交时间</span>
                                <span class="task-meta-value">2025-11-17 14:20</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">当前状态</span>
                                <span class="task-meta-value">架构师正在评估方案</span>
                            </div>
                        </div>
                        <div class="architect-status processing">
                            <span class="status-icon">⟳</span>
                            <span>架构师正在制定技术方案</span>
                        </div>
                    </div>

                    <!-- 用户需求示例3 - 等待处理 -->
                    <div class="task-card medium-priority">
                        <div class="task-header">
                            <div>
                                <div class="task-id">REQ-USER-003</div>
                                <h3 class="task-title">集成第三方日历（Google Calendar）</h3>
                            </div>
                            <span class="task-source user">用户需求</span>
                        </div>
                        <div class="task-description">
                            用户希望将任务截止日期自动同步到Google Calendar，并支持双向同步。
                        </div>
                        <div class="task-tags">
                            <span class="task-tag">第三方集成</span>
                            <span class="task-tag">Google API</span>
                        </div>
                        <div class="task-meta">
                            <div class="task-meta-item">
                                <span class="task-meta-label">优先级</span>
                                <span class="task-priority medium">P1 - 重要</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">预计工时</span>
                                <span class="task-meta-value">12-16小时</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">提交时间</span>
                                <span class="task-meta-value">2025-11-16 09:15</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">当前状态</span>
                                <span class="task-meta-value">待架构师审查</span>
                            </div>
                        </div>
                        <div class="architect-status pending">
                            <span class="status-icon">○</span>
                            <span>排队等待架构师处理</span>
                        </div>
                    </div>

                    <!-- 用户需求示例4 -->
                    <div class="task-card low-priority">
                        <div class="task-header">
                            <div>
                                <div class="task-id">REQ-USER-004</div>
                                <h3 class="task-title">支持自定义任务模板</h3>
                            </div>
                            <span class="task-source user">用户需求</span>
                        </div>
                        <div class="task-description">
                            用户希望能够创建任务模板，快速生成重复性任务。例如：每周例会模板、项目启动模板等。
                        </div>
                        <div class="task-tags">
                            <span class="task-tag">模板系统</span>
                            <span class="task-tag">效率工具</span>
                        </div>
                        <div class="task-meta">
                            <div class="task-meta-item">
                                <span class="task-meta-label">优先级</span>
                                <span class="task-priority low">P2 - 正常</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">预计工时</span>
                                <span class="task-meta-value">8-10小时</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">提交时间</span>
                                <span class="task-meta-value">2025-11-15 16:50</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">当前状态</span>
                                <span class="task-meta-value">待架构师审查</span>
                            </div>
                        </div>
                        <div class="architect-status pending">
                            <span class="status-icon">○</span>
                            <span>低优先级，等待架构师排期</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 2: 架构师建议 -->
            <div id="architect-suggestions" class="tab-pane">
                <div class="task-grid">
                    <!-- 架构师建议示例1 -->
                    <div class="task-card high-priority">
                        <div class="task-header">
                            <div>
                                <div class="task-id">SUGGEST-ARCH-001</div>
                                <h3 class="task-title">修复任务状态流转权限漏洞</h3>
                            </div>
                            <span class="task-source architect">架构师建议</span>
                        </div>
                        <div class="task-description">
                            在安全扫描中发现，任务状态流转逻辑与权限系统不一致。普通用户可以绕过"审查中"状态直接将任务标记为"已完成"，违反了权限控制规则。
                        </div>
                        <div class="review-info">
                            <div class="review-info-title">架构师诊断</div>
                            <div class="review-info-content">
                                发现时间: 2025-11-19 09:30 | 
                                扫描来源: 自动化安全审计 | 
                                风险等级: 高危 | 
                                影响范围: 已有3个非管理员用户利用此漏洞
                            </div>
                        </div>
                        <div class="task-requirements">
                            <div class="task-requirements-title">修复方案</div>
                            <ul class="task-requirements-list">
                                <li>更新任务状态机，强制经过审查状态</li>
                                <li>添加权限验证中间件</li>
                                <li>更新前端状态按钮逻辑</li>
                                <li>补充单元测试和集成测试</li>
                                <li>更新文档说明状态流转规则</li>
                            </ul>
                        </div>
                        <div class="task-tags">
                            <span class="task-tag">Bug修复</span>
                            <span class="task-tag">权限系统</span>
                            <span class="task-tag">安全漏洞</span>
                        </div>
                        <div class="task-meta">
                            <div class="task-meta-item">
                                <span class="task-meta-label">优先级</span>
                                <span class="task-priority high">P0 - 紧急</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">预计工时</span>
                                <span class="task-meta-value">4-6小时</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">发现时间</span>
                                <span class="task-meta-value">2025-11-19 09:30</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">来源</span>
                                <span class="task-meta-value">安全扫描</span>
                            </div>
                        </div>
                        
                        <div class="user-decision-area">
                            <div class="decision-title">请决策</div>
                            <div class="decision-buttons">
                                <button class="decision-button accept" onclick="acceptSuggestion('SUGGEST-ARCH-001')">
                                    采纳建议 - 立即修复
                                </button>
                                <button class="decision-button reject" onclick="rejectSuggestion('SUGGEST-ARCH-001')">
                                    拒绝建议
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 架构师建议示例2 -->
                    <div class="task-card medium-priority">
                        <div class="task-header">
                            <div>
                                <div class="task-id">SUGGEST-ARCH-002</div>
                                <h3 class="task-title">实现Redis缓存层优化查询性能</h3>
                            </div>
                            <span class="task-source architect">架构师建议</span>
                        </div>
                        <div class="task-description">
                            Dashboard页面的聚合查询性能较差（平均响应800ms），建议引入Redis缓存层，预计可将响应时间降至50ms以内。
                        </div>
                        <div class="review-info">
                            <div class="review-info-title">架构师分析</div>
                            <div class="review-info-content">
                                性能监控发现: 当前查询涉及5个表的JOIN操作，高峰期数据库CPU占用率达90%。
                                引入缓存后预计: 降低60%数据库负载，响应时间从800ms降至50ms。
                            </div>
                        </div>
                        <div class="task-requirements">
                            <div class="task-requirements-title">实施方案</div>
                            <ul class="task-requirements-list">
                                <li>搭建Redis服务器并配置（Docker部署）</li>
                                <li>实现缓存中间件和工具类</li>
                                <li>为Dashboard聚合查询添加缓存逻辑</li>
                                <li>实现缓存更新和失效策略（TTL: 5分钟）</li>
                                <li>监控缓存命中率和性能指标</li>
                            </ul>
                        </div>
                        <div class="task-tags">
                            <span class="task-tag">性能优化</span>
                            <span class="task-tag">Redis</span>
                            <span class="task-tag">缓存</span>
                        </div>
                        <div class="task-meta">
                            <div class="task-meta-item">
                                <span class="task-meta-label">优先级</span>
                                <span class="task-priority medium">P1 - 重要</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">预计工时</span>
                                <span class="task-meta-value">8-10小时</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">发现时间</span>
                                <span class="task-meta-value">2025-11-18 15:45</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">来源</span>
                                <span class="task-meta-value">性能监控</span>
                            </div>
                        </div>
                        
                        <div class="user-decision-area">
                            <div class="decision-title">请决策</div>
                            <div class="decision-buttons">
                                <button class="decision-button accept" onclick="acceptSuggestion('SUGGEST-ARCH-002')">
                                    采纳建议 - 安排实施
                                </button>
                                <button class="decision-button reject" onclick="rejectSuggestion('SUGGEST-ARCH-002')">
                                    暂不采纳
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 架构师建议示例3 -->
                    <div class="task-card medium-priority">
                        <div class="task-header">
                            <div>
                                <div class="task-id">SUGGEST-ARCH-003</div>
                                <h3 class="task-title">启用API速率限制保护</h3>
                            </div>
                            <span class="task-source architect">架构师建议</span>
                        </div>
                        <div class="task-description">
                            当前API端点未实施速率限制，存在被滥用或DDoS攻击的风险。建议使用Redis + Token Bucket算法实现频率限制。
                        </div>
                        <div class="review-info">
                            <div class="review-info-title">架构师评估</div>
                            <div class="review-info-content">
                                在安全审计中发现，公开API端点可被无限制调用。建议限制为: 
                                匿名用户 100次/分钟/IP | 认证用户 1000次/分钟 | 管理员无限制
                            </div>
                        </div>
                        <div class="task-requirements">
                            <div class="task-requirements-title">实施方案</div>
                            <ul class="task-requirements-list">
                                <li>实现Token Bucket速率限制算法</li>
                                <li>为不同用户角色配置不同限额</li>
                                <li>添加速率限制中间件</li>
                                <li>返回标准的429 Too Many Requests响应</li>
                                <li>监控和告警系统（异常流量检测）</li>
                            </ul>
                        </div>
                        <div class="task-tags">
                            <span class="task-tag">安全</span>
                            <span class="task-tag">速率限制</span>
                        </div>
                        <div class="task-meta">
                            <div class="task-meta-item">
                                <span class="task-meta-label">优先级</span>
                                <span class="task-priority medium">P1 - 重要</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">预计工时</span>
                                <span class="task-meta-value">3-4小时</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">发现时间</span>
                                <span class="task-meta-value">2025-11-18 11:20</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">来源</span>
                                <span class="task-meta-value">安全审计</span>
                            </div>
                        </div>
                        
                        <div class="user-decision-area">
                            <div class="decision-title">请决策</div>
                            <div class="decision-buttons">
                                <button class="decision-button accept" onclick="acceptSuggestion('SUGGEST-ARCH-003')">
                                    采纳建议 - 启用防护
                                </button>
                                <button class="decision-button reject" onclick="rejectSuggestion('SUGGEST-ARCH-003')">
                                    暂不采纳
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 架构师建议示例4 -->
                    <div class="task-card low-priority">
                        <div class="task-header">
                            <div>
                                <div class="task-id">SUGGEST-ARCH-004</div>
                                <h3 class="task-title">重构任务模块提高可维护性</h3>
                            </div>
                            <span class="task-source architect">架构师建议</span>
                        </div>
                        <div class="task-description">
                            任务管理模块核心文件（task_service.py）已达1200行，违反单一职责原则。建议拆分为多个独立服务，提升代码可维护性。
                        </div>
                        <div class="review-info">
                            <div class="review-info-title">架构师分析</div>
                            <div class="review-info-content">
                                代码质量扫描发现: 单文件包含过多职责（CRUD、状态管理、依赖关系、通知等）。
                                建议拆分为4个独立服务类，降低耦合度。
                            </div>
                        </div>
                        <div class="task-requirements">
                            <div class="task-requirements-title">重构方案</div>
                            <ul class="task-requirements-list">
                                <li>拆分为TaskCRUDService（基础CRUD）</li>
                                <li>拆分为TaskStatusService（状态流转）</li>
                                <li>拆分为TaskDependencyService（依赖管理）</li>
                                <li>拆分为TaskNotificationService（通知）</li>
                                <li>为每个服务编写单元测试</li>
                            </ul>
                        </div>
                        <div class="task-tags">
                            <span class="task-tag">代码重构</span>
                            <span class="task-tag">技术债务</span>
                        </div>
                        <div class="task-meta">
                            <div class="task-meta-item">
                                <span class="task-meta-label">优先级</span>
                                <span class="task-priority low">P2 - 正常</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">预计工时</span>
                                <span class="task-meta-value">6-8小时</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">发现时间</span>
                                <span class="task-meta-value">2025-11-17 17:10</span>
                            </div>
                            <div class="task-meta-item">
                                <span class="task-meta-label">来源</span>
                                <span class="task-meta-value">代码质量审查</span>
                            </div>
                        </div>
                        
                        <div class="user-decision-area">
                            <div class="decision-title">请决策</div>
                            <div class="decision-buttons">
                                <button class="decision-button accept" onclick="acceptSuggestion('SUGGEST-ARCH-004')">
                                    采纳建议 - 排入技术债清理
                                </button>
                                <button class="decision-button reject" onclick="rejectSuggestion('SUGGEST-ARCH-004')">
                                    暂不处理
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        );
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });

            event.target.closest('.tab-item').classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        function acceptSuggestion(suggestionId) {
            const message = `我采纳建议 ${suggestionId}，请架构师开始执行。`;
            alert(`对话消息已发送给架构师:\n"${message}"\n\n架构师将会:\n1. 记录采纳决策\n2. 分配给相应工程师\n3. 跟踪执行进度`);
            
            const button = event.target;
            button.textContent = '✓ 已采纳 - 架构师正在执行';
            button.style.background = 'var(--status-success)';
            button.disabled = true;
            
            const rejectButton = button.parentElement.querySelector('.reject');
            rejectButton.disabled = true;
            rejectButton.style.opacity = '0.5';
        }

        function rejectSuggestion(suggestionId) {
            const reason = prompt(`请告诉架构师拒绝 ${suggestionId} 的原因:\n（可选，帮助架构师理解决策）`);
            
            if (reason !== null) {
                const message = reason 
                    ? `我拒绝建议 ${suggestionId}，原因: ${reason}`
                    : `我拒绝建议 ${suggestionId}`;
                    
                alert(`对话消息已发送给架构师:\n"${message}"\n\n架构师将会:\n1. 记录拒绝决策和原因\n2. 标记此建议为已处理\n3. 未来不再重复提醒`);
                
                const button = event.target;
                button.textContent = '✓ 已拒绝';
                button.style.background = 'var(--noir-silver)';
                button.disabled = true;
                
                const acceptButton = button.parentElement.querySelector('.accept');
                acceptButton.disabled = true;
                acceptButton.style.opacity = '0.5';
            }
        }
    </script>
        </div>

        <!-- ========== 架构师模块 ========== -->
        <div class="architect-module version-content" data-version="1">
            <!-- 模块头部 -->
            <div class="architect-module-header">
                <div class="architect-header-row">
                    <h2 class="architect-module-title">架构师工作台</h2>
                    <span class="architect-status-badge">
                        <span class="architect-status-dot"></span>
                        在线
                    </span>
                </div>

                <div class="architect-info-bar">
                    <div class="architect-info-section">
                        <div class="architect-avatar">AI</div>
                        <div class="architect-details">
                            <div class="architect-name">AI Architect</div>
                            <div class="architect-meta">专家级 · 2025-11-18 20:00 · 工作 1d 6h</div>
                        </div>
                    </div>
                    <div class="architect-quick-stats">
                        <div class="architect-stat-item">
                            <div class="architect-stat-value">125K</div>
                            <div class="architect-stat-label">Token已用</div>
                        </div>
                        <div class="architect-stat-item">
                            <div class="architect-stat-value">v4.0</div>
                            <div class="architect-stat-label">提示词</div>
                        </div>
                        <div class="architect-stat-item">
                            <div class="architect-stat-value">89</div>
                            <div class="architect-stat-label">事件</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab导航 -->
            <div class="architect-tab-navigation">
                <button class="architect-tab-item active" onclick="switchArchitectTab('events')">
                    事件流
                    <span class="architect-tab-badge">89</span>
                </button>
                <button class="architect-tab-item" onclick="switchArchitectTab('prompt')">
                    认命指令
                </button>
                <button class="architect-tab-item" onclick="switchArchitectTab('conversations')">
                    对话历史
                    <span class="architect-tab-badge">12</span>
                </button>
            </div>

            <!-- Tab内容 -->
            <div class="architect-tab-content-wrapper">
                <!-- Tab 1: 事件流 -->
                <div id="architect-events" class="architect-tab-pane active">
                    <div class="architect-event-timeline">
                        <div class="architect-timeline-filters">
                            <button class="architect-filter-chip active">全部</button>
                            <button class="architect-filter-chip">今天</button>
                            <button class="architect-filter-chip">本周</button>
                            <button class="architect-filter-chip">决策</button>
                            <button class="architect-filter-chip">任务</button>
                            <button class="architect-filter-chip">交接</button>
                        </div>

                        <div class="architect-timeline-item">
                            <div class="architect-timeline-marker"></div>
                            <div class="architect-event-card">
                                <div class="architect-event-header">
                                    <div>
                                        <div class="architect-event-title">任务完成: Dashboard架构重构</div>
                                        <div class="architect-event-meta">AI Architect · TASK-045</div>
                                    </div>
                                    <div class="architect-event-time">2025-11-19 14:30</div>
                                </div>
                                <div class="architect-event-description">
                                    完成了Dashboard模块的完整重构，采用模块化架构，拆分为7个独立组件。提交了完成报告，等待审查。
                                </div>
                                <div class="architect-event-tags">
                                    <span class="architect-event-tag">架构重构</span>
                                    <span class="architect-event-tag">Dashboard</span>
                                    <span class="architect-event-tag">已完成</span>
                                </div>
                            </div>
                        </div>

                        <div class="architect-timeline-item">
                            <div class="architect-timeline-marker"></div>
                            <div class="architect-event-card">
                                <div class="architect-event-header">
                                    <div>
                                        <div class="architect-event-title">记录架构决策: ADR-012 采用事件驱动架构</div>
                                        <div class="architect-event-meta">AI Architect · 决策</div>
                                    </div>
                                    <div class="architect-event-time">2025-11-19 11:30</div>
                                </div>
                                <div class="architect-event-description">
                                    经过技术调研和团队讨论，决定采用事件驱动架构来处理系统间的异步通信。记录了决策背景、备选方案和实施计划。
                                </div>
                                <div class="architect-event-tags">
                                    <span class="architect-event-tag">ADR</span>
                                    <span class="architect-event-tag">架构决策</span>
                                </div>
                            </div>
                        </div>

                        <div class="architect-timeline-item">
                            <div class="architect-timeline-marker"></div>
                            <div class="architect-event-card">
                                <div class="architect-event-header">
                                    <div>
                                        <div class="architect-event-title">发起任务: API集成开发</div>
                                        <div class="architect-event-meta">AI Architect · TASK-048</div>
                                    </div>
                                    <div class="architect-event-time">2025-11-18 16:00</div>
                                </div>
                                <div class="architect-event-description">
                                    创建了API集成开发任务，需要集成8个外部API模块，包括Notion、Claude、知识图谱等。预估工时6.5小时。
                                </div>
                                <div class="architect-event-tags">
                                    <span class="architect-event-tag">API开发</span>
                                    <span class="architect-event-tag">集成</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: 认命指令（提示词） -->
                <div id="architect-prompt" class="architect-tab-pane">
                    <div class="architect-prompt-panel">
                        <div class="architect-prompt-container">
                            <div class="architect-prompt-header">
                                <h3 class="architect-prompt-title">架构师认命指令</h3>
                                <div class="architect-prompt-meta">
                                    <span>版本: v4.0 (看板优先版)</span>
                                    <span>字数: 8,247字</span>
                                    <span>最后修改: 2天前</span>
                                </div>
                            </div>

                            <div class="architect-prompt-content">
                                <pre class="architect-prompt-text"># 架构师AI System Prompt v4.0 (看板优先版)

## 首要职责（NO.1优先级）
你的首要工作不是写代码，而是维护项目的真实地图：
1. docs/tasks/task-board.md - 任务看板（唯一真相）
2. docs/arch/ - 架构文档

## 认命后必须执行的流程
当被认命为架构师时：
Step 1: 检查关键文件是否存在
Step 2: 根据情况选择 Init Flow 或 Update Flow
Step 3: 生成完整的架构文档
Step 4: 记录认命事件到事件流

## 核心规则
1. 每次功能完成必须同步看板
2. 重大决策必须记录ADR
3. 遇到问题先查看知识库
4. 交接时必须生成完整快照</pre>
                            </div>

                            <button class="architect-copy-button" onclick="copyArchitectOldPrompt()">
                                复制完整提示词
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Tab 3: 对话历史 -->
                <div id="architect-conversations" class="architect-tab-pane">
                    <div class="architect-conversation-layout">
                        <div class="architect-conversation-list">
                            <div class="architect-conversation-search">
                                <input type="text" class="architect-search-input" placeholder="搜索对话...">
                            </div>
                            <div class="architect-conversation-items">
                                <div class="architect-conversation-item active" onclick="selectArchitectConversation(1)">
                                    <div class="architect-conversation-item-header">
                                        <div class="architect-conversation-item-title">Dashboard架构重构</div>
                                        <div class="architect-conversation-item-time">2025-11-19 14:30</div>
                                    </div>
                                    <div class="architect-conversation-item-preview">
                                        分析了Dashboard的架构问题，给出了3个重构方案...
                                    </div>
                                    <div class="architect-conversation-item-meta">
                                        <span>6条消息</span>
                                        <span>1h 15min</span>
                                    </div>
                                </div>

                                <div class="architect-conversation-item" onclick="selectArchitectConversation(2)">
                                    <div class="architect-conversation-item-header">
                                        <div class="architect-conversation-item-title">API集成方案讨论</div>
                                        <div class="architect-conversation-item-time">2025-11-18 10:00</div>
                                    </div>
                                    <div class="architect-conversation-item-preview">
                                        讨论了如何集成8个API模块，解决了CORS问题...
                                    </div>
                                    <div class="architect-conversation-item-meta">
                                        <span>12条消息</span>
                                        <span>2h 30min</span>
                                    </div>
                                </div>

                                <div class="architect-conversation-item" onclick="selectArchitectConversation(3)">
                                    <div class="architect-conversation-item-header">
                                        <div class="architect-conversation-item-title">知识库数据库设计</div>
                                        <div class="architect-conversation-item-time">2025-11-17 15:20</div>
                                    </div>
                                    <div class="architect-conversation-item-preview">
                                        设计了Neo4j数据库结构，包含知识节点...
                                    </div>
                                    <div class="architect-conversation-item-meta">
                                        <span>8条消息</span>
                                        <span>45min</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="architect-conversation-detail">
                            <div class="architect-detail-header">
                                <h3 class="architect-detail-title">Dashboard架构重构</h3>
                                <div class="architect-detail-meta">
                                    <span>2025-11-18 22:30</span>
                                    <span>6条消息</span>
                                    <span>1h 15min</span>
                                    <span>25,000 tokens</span>
                                </div>
                            </div>

                            <div class="architect-messages-container">
                                <div class="architect-message">
                                    <div class="architect-message-avatar user">U</div>
                                    <div class="architect-message-content">
                                        <div class="architect-message-header">
                                            <span class="architect-message-sender">用户</span>
                                            <span class="architect-message-time">22:30</span>
                                        </div>
                                        <div class="architect-message-text">
                                            帮我分析一下当前Dashboard的架构问题，我觉得代码太混乱了，想做个重构。
                                        </div>
                                    </div>
                                </div>

                                <div class="architect-message">
                                    <div class="architect-message-avatar">AI</div>
                                    <div class="architect-message-content">
                                        <div class="architect-message-header">
                                            <span class="architect-message-sender">AI Architect</span>
                                            <span class="architect-message-time">22:32</span>
                                        </div>
                                        <div class="architect-message-text">
                                            好的，我来帮你做一次完整的架构分析。首先让我查看一下当前的代码结构...<br><br>
                                            
                                            <strong>当前架构问题诊断：</strong><br><br>
                                            
                                            1. 组件耦合度过高<br>
                                            - Dashboard.tsx包含了3000+行代码<br>
                                            - 所有功能都写在一个文件里<br>
                                            - 状态管理混乱，props drilling严重<br><br>
                                            
                                            2. 缺乏模块化设计<br>
                                            - 看板、事件流、对话历史都是内联实现<br>
                                            - 无法独立开发和测试<br>
                                            - 代码复用率低<br><br>
                                            
                                            3. 性能问题<br>
                                            - 没有合理的懒加载<br>
                                            - 重渲染频繁<br>
                                            - 大数据列表没有虚拟滚动<br><br>
                                            
                                            我建议采用模块化架构，将Dashboard拆分为7个独立模块...
                                        </div>
                                    </div>
                                </div>

                                <div class="architect-message">
                                    <div class="architect-message-avatar user">U</div>
                                    <div class="architect-message-content">
                                        <div class="architect-message-header">
                                            <span class="architect-message-sender">用户</span>
                                            <span class="architect-message-time">22:35</span>
                                        </div>
                                        <div class="architect-message-text">
                                            听起来不错！具体怎么拆分？能给我个详细方案吗？
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- ========== 全栈工程师工作台（完整版） ========== -->
    <div class="engineer-module">
            <!-- 模块头部 -->
        <div class="module-header">
            <div class="header-row">
                <h1 class="module-title">全栈工程师工作台</h1>
                <span class="status-badge">
                    <span class="status-dot"></span>
                        在线 · 3人并行
                    </span>
                </div>

            <div class="engineer-info">
                <div class="info-section">
                        <div class="engineer-avatar">FS</div>
                        <div class="engineer-details">
                            <div class="engineer-name">Fullstack Engineer AI</div>
                        <div class="engineer-meta">Expert Level · 接手: 2025-11-18 14:00 · 工作时长: 2天6小时</div>
                        </div>
                    </div>
                <div class="quick-stats">
                    <div class="stat-item">
                        <div class="stat-value">156K</div>
                        <div class="stat-label">Token已用</div>
                        </div>
                    <div class="stat-item">
                        <div class="stat-value">v3.1</div>
                        <div class="stat-label">提示词</div>
                        </div>
                    <div class="stat-item">
                        <div class="stat-value">67</div>
                        <div class="stat-label">事件</div>
                        </div>
                    </div>
                </div>
            </div>

        <!-- Tab导航（精简到5个） -->
        <div class="tab-navigation">
            <button class="tab-item active" onclick="switchEngineerTab('engineer-taskboard')">
                任务看板
                <span class="tab-badge">43</span>
                </button>
            <button class="tab-item" onclick="switchEngineerTab('engineer-events')">
                    事件流
                <span class="tab-badge">67</span>
                </button>
            <button class="tab-item" onclick="switchEngineerTab('engineer-reviews')">
                    代码审查
                <span class="tab-badge">15</span>
                </button>
            <button class="tab-item" onclick="switchEngineerTab('engineer-docs')">
                    技术文档
                <span class="tab-badge">68</span>
                </button>
            <button class="tab-item" onclick="switchEngineerTab('engineer-conversations')">
                    对话历史
                <span class="tab-badge">12</span>
                </button>
            </div>

            <!-- Tab内容 -->
        <div class="tab-content-wrapper">
            <!-- Tab 1: 任务看板 -->
            <div id="engineer-taskboard" class="tab-pane active">
                <div class="task-board-container">
                    <div class="task-board-header">
                        <div class="filter-bar">
                            <div class="filter-chips">
                                <button class="filter-chip active" onclick="filterEngineerTasks('all')">全部 <span class="filter-count">43</span></button>
                                <button class="filter-chip" onclick="filterEngineerTasks('pending')">待处理 <span class="filter-count">18</span></button>
                                <button class="filter-chip" onclick="filterEngineerTasks('in-progress')">进行中 <span class="filter-count">5</span></button>
                                <button class="filter-chip" onclick="filterEngineerTasks('completed')">已完成 <span class="filter-count">20</span></button>
                        </div>
                            <select class="sort-select">
                                <option>按优先级排序</option>
                                <option>按时间排序</option>
                                <option>按复杂度排序</option>
                            </select>
                            </div>
                        </div>

                    <!-- 任务卡片列表 -->
                    <div class="task-list-container">
                        <!-- 待处理任务 -->
                        <div class="task-card" data-status="pending">
                            <div class="task-card-header">
                                <span class="task-id">TASK-UI-028</span>
                                <h3 class="task-title">实现记忆管理Tab</h3>
                                    </div>
                            <div class="task-description">
                                实现Dashboard项目记忆Tab，包括记忆增删改查、分类管理、搜索功能。
                                需要前后端联调，使用Neo4j存储。
                                </div>
                            <div class="task-meta">
                                <div class="task-meta-left">
                                    <span>预估: <span class="task-estimate">3小时</span></span>
                                    <span class="task-status-indicator">
                                        <span class="status-dot-small pending"></span>
                                        待处理
                                    </span>
                                </div>
                                <div class="task-meta-right">
                                    <span class="task-status-badge parallel">可并行</span>
                                    <span class="priority-badge p1">P1</span>
                                </div>
                            </div>
                            <div class="task-actions">
                                <button class="task-action-button primary" onclick="copyEngineerPrompt(event)">复制提示词</button>
                                <button class="task-action-button">查看详情</button>
                            </div>
                        </div>

                        <div class="task-card" data-status="pending">
                            <div class="task-card-header">
                                <span class="task-id">TASK-BE-015</span>
                                <h3 class="task-title">实现API限流中间件</h3>
                                    </div>
                            <div class="task-description">
                                基于Redis实现API限流中间件，支持IP级别和用户级别限流。
                                采用令牌桶算法，配置化限流规则。
                                </div>
                            <div class="task-meta">
                                <div class="task-meta-left">
                                    <span>预估: <span class="task-estimate">4小时</span></span>
                                    <span class="task-status-indicator">
                                        <span class="status-dot-small pending"></span>
                                        待处理
                                    </span>
                            </div>
                                <div class="task-meta-right">
                                    <span class="priority-badge p2">P2</span>
                        </div>
                                    </div>
                            <div class="task-actions">
                                <button class="task-action-button primary" onclick="copyEngineerPrompt(event)">复制提示词</button>
                                <button class="task-action-button">查看详情</button>
                    </div>
                </div>

                        <div class="task-card" data-status="pending">
                            <div class="task-card-header">
                                <span class="task-id">TASK-UI-029</span>
                                <h3 class="task-title">优化首屏加载性能</h3>
                            </div>
                            <div class="task-description">
                                优化首屏加载性能，目标LCP&lt;2.5s。实现代码分割、懒加载、
                                预加载关键资源、图片优化。
                            </div>
                            <div class="task-meta">
                                <div class="task-meta-left">
                                    <span>预估: <span class="task-estimate">5小时</span></span>
                                    <span class="task-status-indicator">
                                        <span class="status-dot-small pending"></span>
                                        待处理
                                    </span>
                            </div>
                                <div class="task-meta-right">
                                    <span class="task-status-badge parallel">可并行</span>
                                    <span class="priority-badge p1">P1</span>
                            </div>
                        </div>
                            <div class="task-actions">
                                <button class="task-action-button primary" onclick="copyEngineerPrompt(event)">复制提示词</button>
                                <button class="task-action-button">查看详情</button>
                            </div>
                        </div>

                        <!-- 进行中任务 -->
                        <div class="task-card" data-status="in-progress">
                            <div class="task-card-header">
                                <span class="task-id">TASK-BE-012</span>
                                <h3 class="task-title">Claude API集成</h3>
                            </div>
                            <div class="task-description">
                                集成Claude API实现对话功能。包括流式响应、错误处理、
                                Token统计、会话管理。已完成60%。
                            </div>
                            <div class="task-meta">
                                <div class="task-meta-left">
                                    <span>已用: <span class="task-estimate">1.5天</span></span>
                                    <span class="task-status-indicator">
                                        <span class="status-dot-small in-progress"></span>
                                        进行中
                                    </span>
                            </div>
                                <div class="task-meta-right">
                                    <span class="priority-badge p0">P0</span>
                            </div>
                        </div>
                            <div class="task-actions">
                                <button class="task-action-button" onclick="reassignTask(event)">重新派发任务</button>
                                <button class="task-action-button">查看详情</button>
                            </div>
                        </div>

                        <div class="task-card" data-status="in-progress">
                            <div class="task-card-header">
                                <span class="task-id">TASK-UI-025</span>
                                <h3 class="task-title">知识图谱可视化组件</h3>
                            </div>
                            <div class="task-description">
                                基于D3.js实现知识图谱可视化。支持力导向布局、缩放平移、
                                节点搜索、关系筛选。已完成布局算法。
                            </div>
                            <div class="task-meta">
                                <div class="task-meta-left">
                                    <span>已用: <span class="task-estimate">8小时</span></span>
                                    <span class="task-status-indicator">
                                        <span class="status-dot-small in-progress"></span>
                                        进行中
                                    </span>
                            </div>
                                <div class="task-meta-right">
                                    <span class="priority-badge p1">P1</span>
                            </div>
                        </div>
                            <div class="task-actions">
                                <button class="task-action-button" onclick="reassignTask(event)">重新派发任务</button>
                                <button class="task-action-button">查看详情</button>
                            </div>
                        </div>

                        <!-- 已完成任务 -->
                        <div class="task-card" data-status="completed">
                            <div class="task-card-header">
                                <span class="task-id">TASK-UI-024</span>
                                <h3 class="task-title">Dashboard响应式优化</h3>
                                <span class="task-status-badge">✓ 已完成</span>
                            </div>
                            <div class="task-description">
                                完成了Dashboard的完整响应式优化，支持5个断点。
                                已通过所有浏览器兼容性测试。
                            </div>
                            <div class="task-meta">
                                <div class="task-meta-left">
                                    <span>用时: <span class="task-estimate">6小时</span></span>
                                    <span>完成: <span class="task-estimate">2025-11-19</span></span>
                            </div>
                                <div class="task-meta-right">
                                    <span class="priority-badge p1">P1</span>
                            </div>
                        </div>
                            <div class="task-actions">
                                <button class="task-action-button primary" onclick="copyReport(event)">复制完成报告</button>
                                <button class="task-action-button">查看详情</button>
                            </div>
                        </div>

                        <div class="task-card" data-status="completed">
                            <div class="task-card-header">
                                <span class="task-id">TASK-BE-011</span>
                                <h3 class="task-title">用户认证模块</h3>
                                <span class="task-status-badge">✓ 已完成</span>
                            </div>
                            <div class="task-description">
                                实现JWT认证、权限管理、会话管理。支持多端登录、
                                自动续期、安全退出。代码审查已通过。
                            </div>
                            <div class="task-meta">
                                <div class="task-meta-left">
                                    <span>用时: <span class="task-estimate">2天</span></span>
                                    <span>完成: <span class="task-estimate">2025-11-18</span></span>
                            </div>
                                <div class="task-meta-right">
                                    <span class="priority-badge p0">P0</span>
                            </div>
                        </div>
                            <div class="task-actions">
                                <button class="task-action-button primary" onclick="copyReport(event)">复制完成报告</button>
                                <button class="task-action-button">查看详情</button>
                            </div>
                        </div>

                        <div class="task-card" data-status="completed">
                            <div class="task-card-header">
                                <span class="task-id">TASK-DB-008</span>
                                <h3 class="task-title">Neo4j数据库设计</h3>
                                <span class="task-status-badge">✓ 已完成</span>
                            </div>
                            <div class="task-description">
                                完成知识图谱数据库设计。定义了节点类型、关系类型、
                                索引策略。性能测试通过。
                            </div>
                            <div class="task-meta">
                                <div class="task-meta-left">
                                    <span>用时: <span class="task-estimate">1.5天</span></span>
                                    <span>完成: <span class="task-estimate">2025-11-17</span></span>
                            </div>
                                <div class="task-meta-right">
                                    <span class="priority-badge p1">P1</span>
                            </div>
                        </div>
                            <div class="task-actions">
                                <button class="task-action-button primary" onclick="copyReport(event)">复制完成报告</button>
                                <button class="task-action-button">查看详情</button>
                            </div>
                            </div>
                            </div>
                            </div>
                        </div>

            <!-- Tab 2: 事件流 -->
            <div id="engineer-events" class="tab-pane">
                <div class="event-timeline">
                    <div class="timeline-filters">
                        <button class="filter-chip active">全部</button>
                        <button class="filter-chip">今天</button>
                        <button class="filter-chip">本周</button>
                        <button class="filter-chip">任务</button>
                        <button class="filter-chip">代码</button>
                        <button class="filter-chip">部署</button>
                        </div>

                    <div class="timeline-item">
                        <div class="timeline-marker"></div>
                        <div class="event-card">
                            <div class="event-header">
                                <div>
                                    <div class="event-title">任务完成: Dashboard响应式优化</div>
                                    <div class="event-meta">Fullstack Engineer AI · TASK-FE-045</div>
                            </div>
                                <div class="event-time">2025-11-19 16:30</div>
                            </div>
                            <div class="event-description">
                                完成了Dashboard的完整响应式优化，支持1920/1440/1280/768/375五个断点。
                                实现了Flexbox+Grid混合布局，移动端优先策略，触摸手势优化。
                            </div>
                            <div class="event-tags">
                                <span class="event-tag">前端开发</span>
                                <span class="event-tag">响应式</span>
                                <span class="event-tag">已完成</span>
                            </div>
                        </div>
                            </div>

                    <div class="timeline-item">
                        <div class="timeline-marker"></div>
                        <div class="event-card">
                            <div class="event-header">
                                <div>
                                    <div class="event-title">代码审查通过: API集成模块</div>
                                    <div class="event-meta">架构师审查 · REVIEW-014</div>
                            </div>
                                <div class="event-time">2025-11-19 14:20</div>
                            </div>
                            <div class="event-description">
                                架构师审查通过，代码质量优秀。成功集成了Claude API和Notion API，
                                包含完整的错误处理、重试机制和日志记录。已合并到主分支。
                            </div>
                            <div class="event-tags">
                                <span class="event-tag">代码审查</span>
                                <span class="event-tag">API集成</span>
                                <span class="event-tag">已通过</span>
                        </div>
                            </div>
                        </div>

                    <div class="timeline-item">
                        <div class="timeline-marker"></div>
                        <div class="event-card">
                            <div class="event-header">
                                <div>
                                    <div class="event-title">接收任务: 实现记忆管理Tab</div>
                                    <div class="event-meta">架构师分配 → Fullstack Engineer AI</div>
                            </div>
                                <div class="event-time">2025-11-19 10:00</div>
                            </div>
                            <div class="event-description">
                                架构师分配了新任务：实现Dashboard项目记忆Tab。包括记忆增删改查、
                                分类管理、搜索功能。预估3小时，可并行开发。
                            </div>
                            <div class="event-tags">
                                <span class="event-tag">任务分配</span>
                                <span class="event-tag">可并行</span>
                            </div>
                        </div>
                            </div>

                    <div class="timeline-item">
                        <div class="timeline-marker"></div>
                        <div class="event-card">
                            <div class="event-header">
                                <div>
                                    <div class="event-title">部署成功: Dashboard v2.1.0</div>
                                    <div class="event-meta">CI/CD Pipeline · DEPLOY-028</div>
                            </div>
                                <div class="event-time">2025-11-18 18:45</div>
                            </div>
                            <div class="event-description">
                                成功部署到生产环境。通过了所有自动化测试（单元测试92%覆盖率，
                                E2E测试18个场景全通过）。Lighthouse性能评分: 98/100。
                            </div>
                            <div class="event-tags">
                                <span class="event-tag">部署</span>
                                <span class="event-tag">生产环境</span>
                                <span class="event-tag">成功</span>
                        </div>
                            </div>
                        </div>

                    <div class="timeline-item">
                        <div class="timeline-marker"></div>
                        <div class="event-card">
                            <div class="event-header">
                                <div>
                                    <div class="event-title">Bug修复: 知识图谱渲染问题</div>
                                    <div class="event-meta">Fullstack Engineer AI · BUG-012</div>
                            </div>
                                <div class="event-time">2025-11-18 14:30</div>
                            </div>
                            <div class="event-description">
                                修复了知识图谱在大数据量下的渲染卡顿问题。采用虚拟滚动+WebWorker
                                方案，渲染性能提升80%，支持10000+节点流畅显示。
                            </div>
                            <div class="event-tags">
                                <span class="event-tag">Bug修复</span>
                                <span class="event-tag">性能优化</span>
                                <span class="event-tag">已完成</span>
                            </div>
                        </div>
                            </div>

                    <div class="timeline-item">
                        <div class="timeline-marker"></div>
                        <div class="event-card">
                            <div class="event-header">
                                <div>
                                    <div class="event-title">数据库优化: Neo4j查询性能提升</div>
                                    <div class="event-meta">Fullstack Engineer AI · OPT-008</div>
                            </div>
                                <div class="event-time">2025-11-17 16:20</div>
                            </div>
                            <div class="event-description">
                                优化了Neo4j的Cypher查询语句，添加了合适的索引。复杂关系查询
                                从2.5s优化到0.3s，提升8倍性能。同时优化了连接池配置。
                            </div>
                            <div class="event-tags">
                                <span class="event-tag">数据库</span>
                                <span class="event-tag">性能优化</span>
                                <span class="event-tag">Neo4j</span>
                        </div>
                            </div>
                            </div>
                            </div>
                        </div>


            <!-- Tab 3: 代码审查 -->
            <div id="engineer-reviews" class="tab-pane">
                <div class="code-review-container">
                    <div class="code-review-timeline">
                        <div class="review-filters">
                            <button class="filter-chip active">全部</button>
                            <button class="filter-chip">待审查</button>
                            <button class="filter-chip">已通过</button>
                            <button class="filter-chip">需修改</button>
                            </div>

                        <div class="review-item">
                            <div class="review-marker pending"></div>
                            <div class="review-card">
                                <div class="review-card-header">
                                    <h3 class="review-title">REVIEW-015 | Dashboard响应式代码审查</h3>
                                    <div class="review-meta">
                                        <span>2025-11-19 17:00</span>
                                        <span class="review-status pending">审查中</span>
                            </div>
                            </div>

                                <div class="review-content">
                                    <div class="content-label">审查内容:</div>
                                    <div class="content-list">
                                        <div class="content-item">12个React组件响应式改造</div>
                                        <div class="content-item">CSS Grid + Flexbox混合布局</div>
                                        <div class="content-item">5个断点断点适配</div>
                                        <div class="content-item">触摸手势优化</div>
                                        <div class="content-item">测试覆盖率: 88%</div>
                            </div>
                        </div>

                                <div class="review-comment">
                                    <div class="content-label">审查意见:</div>
                                    代码结构清晰，响应式实现优秀。建议优化媒体查询的组织方式，
                                    可以考虑使用CSS变量统一管理断点值。性能测试结果良好。
                            </div>

                                <div class="review-actions">
                                    <button class="review-action-button" disabled style="cursor: not-allowed; opacity: 0.6;">等待架构师审查...</button>
                            </div>
                            </div>
                        </div>

                        <div class="review-item">
                            <div class="review-marker" style="background: var(--noir-graphite);"></div>
                            <div class="review-card">
                                <div class="review-card-header">
                                    <h3 class="review-title">REVIEW-014-FIX | API错误处理优化</h3>
                                    <div class="review-meta">
                                        <span>2025-11-19 15:30</span>
                                        <span class="review-status" style="background: var(--noir-graphite); color: var(--blanc-pure); border-color: var(--noir-graphite);">需修改</span>
                            </div>
                        </div>

                                <div class="review-content">
                                    <div class="content-label">审查内容:</div>
                                    <div class="content-list">
                                        <div class="content-item">API错误处理逻辑</div>
                                        <div class="content-item">重试机制实现</div>
                                        <div class="content-item">错误日志记录</div>
                            </div>
                        </div>

                                <div class="review-comment">
                                    <div class="content-label">审查意见:</div>
                                    发现2个问题需要修改：<br>
                                    1. 重试机制缺少指数退避策略，建议使用exponential backoff<br>
                                    2. 错误日志缺少关键上下文信息（用户ID、请求ID）<br>
                                    已自动生成修改任务 TASK-FIX-089，请查看任务看板。
                            </div>

                                <div class="review-actions">
                                    <button class="review-action-button" style="background: var(--noir-graphite); color: var(--blanc-pure); border-color: var(--noir-graphite); cursor: default;" disabled>✗ 需修改 · 已生成修改任务</button>
                            </div>
                            </div>
                        </div>

                        <div class="review-item">
                            <div class="review-marker approved"></div>
                            <div class="review-card">
                                <div class="review-card-header">
                                    <h3 class="review-title">REVIEW-014 | API集成模块审查</h3>
                                    <div class="review-meta">
                                        <span>2025-11-19 14:20</span>
                                        <span class="review-status approved">已通过</span>
                            </div>
                        </div>

                                <div class="review-content">
                                    <div class="content-label">审查内容:</div>
                                    <div class="content-list">
                                        <div class="content-item">Claude API集成（流式响应）</div>
                                        <div class="content-item">Notion API集成（CRUD操作）</div>
                                        <div class="content-item">错误处理与重试机制</div>
                                        <div class="content-item">API限流与缓存策略</div>
                                        <div class="content-item">完整的单元测试</div>
                            </div>
                        </div>

                                <div class="review-comment">
                                    <div class="content-label">审查意见:</div>
                                    代码质量优秀。错误处理完善，包含了重试机制和降级策略。
                                    日志记录规范。单元测试覆盖率92%。已合并到主分支。
                            </div>

                                <div class="review-actions">
                                    <button class="review-action-button approve" disabled style="cursor: default;">✓ 审查通过</button>
                            </div>
                            </div>
                        </div>

                        <div class="review-item">
                            <div class="review-marker approved"></div>
                            <div class="review-card">
                                <div class="review-card-header">
                                    <h3 class="review-title">REVIEW-013 | 用户认证模块审查</h3>
                                    <div class="review-meta">
                                        <span>2025-11-18 16:45</span>
                                        <span class="review-status approved">已通过</span>
                            </div>
                        </div>

                                <div class="review-content">
                                    <div class="content-label">审查内容:</div>
                                    <div class="content-list">
                                        <div class="content-item">JWT认证实现</div>
                                        <div class="content-item">权限管理（RBAC）</div>
                                        <div class="content-item">会话管理与自动续期</div>
                                        <div class="content-item">密码加密与安全策略</div>
                                        <div class="content-item">安全测试完成</div>
                            </div>
                        </div>

                                <div class="review-comment">
                                    <div class="content-label">审查意见:</div>
                                    安全实现规范，符合OWASP最佳实践。Token刷新机制设计合理。
                                    建议补充API文档说明认证流程。整体质量优秀，通过审查。
                            </div>

                                <div class="review-actions">
                                    <button class="review-action-button approve" disabled style="cursor: default;">✓ 审查通过</button>
                            </div>
                            </div>
                        </div>

                        <div class="review-item">
                            <div class="review-marker approved"></div>
                            <div class="review-card">
                                <div class="review-card-header">
                                    <h3 class="review-title">REVIEW-012 | Neo4j数据库设计审查</h3>
                                    <div class="review-meta">
                                        <span>2025-11-17 18:30</span>
                                        <span class="review-status approved">已通过</span>
                            </div>
                        </div>

                                <div class="review-content">
                                    <div class="content-label">审查内容:</div>
                                    <div class="content-list">
                                        <div class="content-item">节点类型定义（8种）</div>
                                        <div class="content-item">关系类型定义（15种）</div>
                                        <div class="content-item">索引策略设计</div>
                                        <div class="content-item">Cypher查询优化</div>
                                        <div class="content-item">性能测试报告</div>
                            </div>
                        </div>

                                <div class="review-comment">
                                    <div class="content-label">审查意见:</div>
                                    图数据库设计合理，充分利用了Neo4j的图特性。索引设计得当，
                                    查询性能优秀。关系建模符合业务需求。可以进入实现阶段。
                            </div>

                                <div class="review-actions">
                                    <button class="review-action-button approve" disabled style="cursor: default;">✓ 审查通过</button>
                            </div>
                            </div>
                            </div>
                        </div>
                            </div>
                        </div>

            <!-- Tab 4: 技术文档 -->
            <div id="engineer-docs" class="tab-pane">
                <div class="docs-container">
                    <div class="docs-sidebar">
                        <div class="docs-search">
                            <input type="text" class="search-input" placeholder="搜索文档...">
                            </div>
                        <div class="docs-categories">
                            <div class="category-group">
                                <div class="category-header" onclick="toggleCategory(event)">前端开发</div>
                                <div class="category-items active">
                                    <div class="doc-item active" onclick="selectDoc(event)">React组件开发规范</div>
                                    <div class="doc-item" onclick="selectDoc(event)">CSS架构与命名约定</div>
                                    <div class="doc-item" onclick="selectDoc(event)">状态管理最佳实践</div>
                                    <div class="doc-item" onclick="selectDoc(event)">性能优化指南</div>
                                    <div class="doc-item" onclick="selectDoc(event)">响应式设计规范</div>
                            </div>
                            </div>
                            <div class="category-group">
                                <div class="category-header" onclick="toggleCategory(event)">后端开发</div>
                                <div class="category-items">
                                    <div class="doc-item" onclick="selectDoc(event)">FastAPI项目结构</div>
                                    <div class="doc-item" onclick="selectDoc(event)">RESTful API设计</div>
                                    <div class="doc-item" onclick="selectDoc(event)">异步编程实践</div>
                                    <div class="doc-item" onclick="selectDoc(event)">错误处理策略</div>
                                    <div class="doc-item" onclick="selectDoc(event)">日志规范</div>
                            </div>
                        </div>
                            <div class="category-group">
                                <div class="category-header" onclick="toggleCategory(event)">数据库</div>
                                <div class="category-items">
                                    <div class="doc-item" onclick="selectDoc(event)">PostgreSQL设计规范</div>
                                    <div class="doc-item" onclick="selectDoc(event)">Neo4j图数据库实践</div>
                                    <div class="doc-item" onclick="selectDoc(event)">Redis缓存策略</div>
                                    <div class="doc-item" onclick="selectDoc(event)">数据库迁移管理</div>
                            </div>
                            </div>
                            <div class="category-group">
                                <div class="category-header" onclick="toggleCategory(event)">DevOps</div>
                                <div class="category-items">
                                    <div class="doc-item" onclick="selectDoc(event)">Docker容器化部署</div>
                                    <div class="doc-item" onclick="selectDoc(event)">CI/CD流程配置</div>
                                    <div class="doc-item" onclick="selectDoc(event)">监控与日志系统</div>
                                    <div class="doc-item" onclick="selectDoc(event)">生产环境运维</div>
                            </div>
                            </div>
                        </div>
                            </div>

                    <div class="docs-content">
                        <div class="doc-header">
                            <h1 class="doc-title">React组件开发规范</h1>
                            <div class="doc-meta">
                                <span>分类: 前端开发</span>
                                <span>作者: Fullstack Engineer AI</span>
                                <span>更新: 2025-11-19</span>
                                <span>字数: 3,247</span>
                            </div>
                        </div>

                        <div class="doc-body">
                            <div class="doc-section">
                                <h2 class="doc-section-title">1. 组件设计原则</h2>
                                <div class="doc-section-content">
                                    <p><strong>单一职责原则</strong>：每个组件应该只做一件事。如果组件功能过于复杂，应该拆分成更小的子组件。</p>
                                    
                                    <p><strong>组合优于继承</strong>：React推荐使用组合而非继承来实现代码复用。通过Props和Children实现组件组合。</p>
                                    
                                    <p><strong>Props类型定义</strong>：使用TypeScript为所有Props定义明确的类型，提高代码可维护性和IDE智能提示。</p>
                            </div>
                        </div>

                            <div class="doc-section">
                                <h2 class="doc-section-title">2. 组件文件结构</h2>
                                <div class="doc-section-content">
                                    <p>推荐的组件目录结构：</p>
                            </div>
                                <pre class="doc-code-block">src/
├── components/
│   ├── Button/
│   │   ├── Button.tsx          # 组件主文件
│   │   ├── Button.test.tsx     # 单元测试
│   │   ├── Button.stories.tsx  # Storybook故事
│   │   ├── Button.module.css   # 样式文件
│   │   └── index.ts            # 导出文件
│   └── ...
└── ...</pre>
                        </div>

                            <div class="doc-section">
                                <h2 class="doc-section-title">3. 组件命名规范</h2>
                                <div class="doc-section-content">
                                    <p><strong>文件命名</strong>：使用PascalCase命名，如 <code>UserProfile.tsx</code></p>
                                    
                                    <p><strong>组件命名</strong>：与文件名保持一致，使用PascalCase</p>
                                    
                                    <p><strong>Props接口命名</strong>：组件名 + Props，如 <code>UserProfileProps</code></p>
                                    
                                    <p><strong>事件处理函数</strong>：使用handle前缀，如 <code>handleClick</code></p>
                            </div>
                        </div>

                            <div class="doc-section">
                                <h2 class="doc-section-title">4. Props设计最佳实践</h2>
                                <div class="doc-section-content">
                                    <p><strong>必填与可选</strong>：明确区分必填和可选Props，为可选Props提供合理的默认值。</p>
                                    
                                    <p><strong>避免过多Props</strong>：如果组件Props超过5-6个，考虑拆分组件或使用对象传递。</p>
                                    
                                    <p><strong>Props验证</strong>：在开发环境使用PropTypes或TypeScript进行Props验证。</p>
                            </div>
                                <pre class="doc-code-block">interface ButtonProps {
  variant: 'primary' | 'secondary' | 'ghost';
  size?: 'small' | 'medium' | 'large';
  disabled?: boolean;
  onClick?: () => void;
  children: React.ReactNode;
}

const Button: React.FC<ButtonProps> = ({
  variant,
  size = 'medium',
  disabled = false,
  onClick,
  children
}) => {
  // 组件实现
};</pre>
                            </div>

                            <div class="doc-section">
                                <h2 class="doc-section-title">5. Hooks使用规范</h2>
                                <div class="doc-section-content">
                                    <p><strong>自定义Hooks</strong>：将复杂的状态逻辑提取为自定义Hooks，提高代码复用性。</p>
                                    
                                    <p><strong>依赖数组</strong>：准确声明useEffect和useCallback的依赖数组，避免不必要的重渲染。</p>
                                    
                                    <p><strong>命名约定</strong>：自定义Hooks必须以use开头，如 <code>useAuth</code>、<code>useFetch</code></p>
                            </div>
                                <pre class="doc-code-block">// 自定义Hook示例
function useDebounce<T>(value: T, delay: number): T {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => {
      clearTimeout(handler);
    };
  }, [value, delay]);

  return debouncedValue;
}</pre>
                            </div>

                            <div class="doc-section">
                                <h2 class="doc-section-title">6. 性能优化</h2>
                                <div class="doc-section-content">
                                    <p><strong>React.memo</strong>：对于纯展示组件，使用React.memo避免不必要的重渲染。</p>
                                    
                                    <p><strong>useMemo和useCallback</strong>：缓存计算结果和回调函数，但不要过度优化。</p>
                                    
                                    <p><strong>代码分割</strong>：使用React.lazy和Suspense进行组件懒加载。</p>
                                    
                                    <p><strong>虚拟列表</strong>：对于长列表，使用react-window或react-virtualized。</p>
                            </div>
                        </div>

                            <div class="doc-section">
                                <h2 class="doc-section-title">7. 测试要求</h2>
                                <div class="doc-section-content">
                                    <p><strong>单元测试</strong>：每个组件都应该有对应的测试文件，测试覆盖率目标85%+。</p>
                                    
                                    <p><strong>测试内容</strong>：渲染测试、Props测试、事件处理测试、边界情况测试。</p>
                                    
                                    <p><strong>测试工具</strong>：使用Jest + React Testing Library进行组件测试。</p>
                            </div>
                            </div>
                            </div>
                        </div>
                            </div>
                        </div>

            <!-- Tab 5: 对话历史 -->
            <div id="engineer-conversations" class="tab-pane">
                <div class="conversation-layout">
                    <div class="conversation-list">
                        <div class="conversation-search">
                            <input type="text" class="search-input" placeholder="搜索对话...">
                            </div>
                        <div class="conversation-items">
                            <div class="conversation-item active" onclick="selectConversation(1)">
                                <div class="conversation-item-header">
                                    <div class="conversation-item-title">Claude API集成讨论</div>
                                    <div class="conversation-item-time">2025-11-19 14:30</div>
                            </div>
                                <div class="conversation-item-preview">
                                    讨论了Claude API的流式响应实现方案...
                            </div>
                                <div class="conversation-item-meta">
                                    <span>10条消息</span>
                                    <span>2h 15min</span>
                            </div>
                        </div>

                            <div class="conversation-item" onclick="selectConversation(2)">
                                <div class="conversation-item-header">
                                    <div class="conversation-item-title">响应式布局优化</div>
                                    <div class="conversation-item-time">2025-11-19 10:00</div>
                            </div>
                                <div class="conversation-item-preview">
                                    分析了当前Dashboard的响应式问题，制定了优化方案...
                            </div>
                                <div class="conversation-item-meta">
                                    <span>8条消息</span>
                                    <span>1h 30min</span>
                            </div>
                        </div>

                            <div class="conversation-item" onclick="selectConversation(3)">
                                <div class="conversation-item-header">
                                    <div class="conversation-item-title">Neo4j性能优化</div>
                                    <div class="conversation-item-time">2025-11-18 16:20</div>
                            </div>
                                <div class="conversation-item-preview">
                                    优化了Cypher查询语句，添加了合适的索引...
                            </div>
                                <div class="conversation-item-meta">
                                    <span>12条消息</span>
                                    <span>1h 45min</span>
                            </div>
                        </div>

                            <div class="conversation-item" onclick="selectConversation(4)">
                                <div class="conversation-item-header">
                                    <div class="conversation-item-title">用户认证实现</div>
                                    <div class="conversation-item-time">2025-11-17 14:00</div>
                            </div>
                                <div class="conversation-item-preview">
                                    讨论了JWT认证方案，包括Token刷新机制...
                            </div>
                                <div class="conversation-item-meta">
                                    <span>15条消息</span>
                                    <span>3h 20min</span>
                            </div>
                            </div>
                        </div>
                            </div>

                    <div class="conversation-detail">
                        <div class="detail-header">
                            <h2 class="detail-title">Claude API集成讨论</h2>
                            <div class="detail-meta">
                                <span>2025-11-19 14:30</span>
                                <span>10条消息</span>
                                <span>2h 15min</span>
                                <span>32,500 tokens</span>
                            </div>
                        </div>

                        <div class="messages-container">
                            <div class="message">
                                <div class="message-avatar user">U</div>
                                <div class="message-content">
                                    <div class="message-header">
                                        <span class="message-sender">用户</span>
                                        <span class="message-time">14:30</span>
                            </div>
                                    <div class="message-text">
                                        需要集成Claude API实现对话功能，要支持流式响应。能帮我分析一下实现方案吗？
                            </div>
                            </div>
                        </div>

                            <div class="message">
                                <div class="message-avatar">AI</div>
                                <div class="message-content">
                                    <div class="message-header">
                                        <span class="message-sender">Fullstack AI</span>
                                        <span class="message-time">14:32</span>
                            </div>
                                    <div class="message-text">
                                        好的，让我帮你分析Claude API的流式响应实现方案。<br><br>
                                        
                                        <strong>方案概述：</strong><br><br>
                                        
                                        Claude API支持Server-Sent Events (SSE)来实现流式响应。我们需要：<br><br>
                                        
                                        1. <strong>后端实现</strong>：<br>
                                        - 使用FastAPI的StreamingResponse<br>
                                        - 处理Claude API的SSE流<br>
                                        - 实现错误处理和重连机制<br><br>
                                        
                                        2. <strong>前端实现</strong>：<br>
                                        - 使用EventSource或fetch with ReadableStream<br>
                                        - 实时更新UI显示流式内容<br>
                                        - 处理连接状态和错误<br><br>
                                        
                                        我先给你看后端的实现代码...
                            </div>
                            </div>
                            </div>

                            <div class="message">
                                <div class="message-avatar">AI</div>
                                <div class="message-content">
                                    <div class="message-header">
                                        <span class="message-sender">Fullstack AI</span>
                                        <span class="message-time">14:35</span>
                        </div>
                                    <div class="message-text">
                                        <strong>后端实现（FastAPI）：</strong>
<pre>from fastapi import FastAPI
from fastapi.responses import StreamingResponse
import anthropic
import asyncio

app = FastAPI()

@app.post("/api/chat/stream")
async def stream_chat(request: ChatRequest):
    client = anthropic.AsyncAnthropic(
        api_key=settings.CLAUDE_API_KEY
    )
    
    async def generate():
        try:
            async with client.messages.stream(
                model="claude-sonnet-4-20250514",
                max_tokens=1024,
                messages=[
                    {"role": "user", "content": request.message}
                ]
            ) as stream:
                async for text in stream.text_stream:
                    yield f"data: {text}\n\n"
                    await asyncio.sleep(0)
        except Exception as e:
            yield f"data: [ERROR] {str(e)}\n\n"
    
    return StreamingResponse(
        generate(),
        media_type="text/event-stream"
    )</pre>
                            </div>
                            </div>
                        </div>

                            <div class="message">
                                <div class="message-avatar user">U</div>
                                <div class="message-content">
                                    <div class="message-header">
                                        <span class="message-sender">用户</span>
                                        <span class="message-time">14:38</span>
                            </div>
                                    <div class="message-text">
                                        不错！前端这边怎么接收和显示流式内容？
                            </div>
                            </div>
                        </div>

                            <div class="message">
                                <div class="message-avatar">AI</div>
                                <div class="message-content">
                                    <div class="message-header">
                                        <span class="message-sender">Fullstack AI</span>
                                        <span class="message-time">14:40</span>
                            </div>
                                    <div class="message-text">
                                        <strong>前端实现（React + TypeScript）：</strong>
<pre>import { useState } from 'react';

function ChatComponent() {
  const [messages, setMessages] = useState<string>('');
  const [isStreaming, setIsStreaming] = useState(false);

  const streamChat = async (userMessage: string) => {
    setIsStreaming(true);
    setMessages('');

    try {
      const response = await fetch('/api/chat/stream', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ message: userMessage })
      });

      const reader = response.body?.getReader();
      const decoder = new TextDecoder();

      while (true) {
        const { done, value } = await reader!.read();
        if (done) break;

        const chunk = decoder.decode(value);
        const lines = chunk.split('\n');

        for (const line of lines) {
          if (line.startsWith('data: ')) {
            const text = line.slice(6);
            setMessages(prev => prev + text);
          }
        }
      }
    } catch (error) {
      console.error('Stream error:', error);
    } finally {
      setIsStreaming(false);
    }
  };

  return (
    <div>
      <div>{messages}</div>
      {isStreaming && <span>思考中...</span>}
                            </div>
  );
}</pre>
                                        <br>
                                        <strong>关键点：</strong><br>
                                        1. 使用ReadableStream接收流式数据<br>
                                        2. 实时更新React状态显示内容<br>
                                        3. 处理流结束和错误情况<br>
                                        4. 添加loading状态提示用户
                            </div>
                            </div>
                        </div>

                            <div class="message">
                                <div class="message-avatar user">U</div>
                                <div class="message-content">
                                    <div class="message-header">
                                        <span class="message-sender">用户</span>
                                        <span class="message-time">14:45</span>
                            </div>
                                    <div class="message-text">
                                        完美！需要考虑哪些错误处理和优化？
                            </div>
                            </div>
                        </div>

                            <div class="message">
                                <div class="message-avatar">AI</div>
                                <div class="message-content">
                                    <div class="message-header">
                                        <span class="message-sender">Fullstack AI</span>
                                        <span class="message-time">14:48</span>
                            </div>
                                    <div class="message-text">
                                        <strong>错误处理和优化建议：</strong><br><br>
                                        
                                        <strong>1. 错误处理</strong><br>
                                        - API限流错误：实现指数退避重试<br>
                                        - 网络中断：自动重连机制<br>
                                        - Token超限：截断或分段处理<br>
                                        - 超时处理：设置合理的timeout<br><br>
                                        
                                        <strong>2. 性能优化</strong><br>
                                        - 使用debounce避免频繁请求<br>
                                        - 缓存历史对话减少重复请求<br>
                                        - 实现请求队列避免并发过多<br>
                                        - 压缩传输数据<br><br>
                                        
                                        <strong>3. 用户体验</strong><br>
                                        - 打字机效果：逐字显示更自然<br>
                                        - 取消功能：允许用户中断流式响应<br>
                                        - 进度提示：显示Token消耗情况<br>
                                        - 错误提示：友好的错误信息<br><br>
                                        
                                        <strong>4. 安全考虑</strong><br>
                                        - API Key保护：只在后端使用<br>
                                        - 用户认证：验证请求来源<br>
                                        - 输入验证：防止注入攻击<br>
                                        - 日志记录：便于问题排查
                            </div>
                            </div>
                            </div>
                            </div>
                        </div>
                            </div>
                            </div>
                            </div>
                        </div>

    <script>
        // Tab切换
        // 全栈工程师模块Tab切换（独立函数，避免冲突）
        function switchEngineerTab(tabName) {
            const engineerModule = document.querySelector('.engineer-module');
            if (!engineerModule) return;
            
            // 只在全栈工程师模块内切换
            engineerModule.querySelectorAll('.tab-item').forEach(item => {
                item.classList.remove('active');
            });
            engineerModule.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });

            event.target.closest('.tab-item').classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // 全栈工程师任务状态筛选（独立函数）
        function filterEngineerTasks(status) {
            const engineerModule = document.querySelector('.engineer-module');
            if (!engineerModule) return;
            
            // 更新筛选按钮状态（只在engineer模块内）
            engineerModule.querySelectorAll('.filter-chip').forEach(chip => {
                chip.classList.remove('active');
            });
            event.target.classList.add('active');

            // 筛选任务卡片（只在engineer模块内）
            const allCards = engineerModule.querySelectorAll('.task-card');
            
            if (status === 'all') {
                allCards.forEach(card => card.style.display = 'block');
            } else {
                allCards.forEach(card => {
                    const cardStatus = card.dataset.status;
                    if (cardStatus === status) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            }
        }

        // 全栈工程师复制提示词（独立函数）
        function copyEngineerPrompt(e) {
            e.preventDefault();
            
            // 获取任务ID
            const taskCard = e.target.closest('.task-card');
            const taskId = taskCard.querySelector('.task-id').textContent;
            const taskTitle = taskCard.querySelector('.task-title').textContent;
            
            // 构建提示词（示例）
            const prompt = `# 全栈工程师任务提示词

## 任务信息
- 任务ID: ${taskId}
- 任务名称: ${taskTitle}
- 分配给: Fullstack Engineer AI

## 任务要求
请按照以下步骤完成任务：
1. 阅读任务详情和技术规范
2. 设计技术方案
3. 编写高质量代码
4. 编写单元测试（覆盖率≥85%）
5. 提交代码审查
6. 生成完成报告

## 代码规范
- 遵循项目代码规范
- 添加必要的注释
- 错误处理完善
- 性能优化考虑

## 交付物
- 源代码
- 单元测试
- 技术文档
- 完成报告`;

            // 复制到剪贴板
            navigator.clipboard.writeText(prompt).then(() => {
                const button = e.target;
                const originalText = button.textContent;
                button.textContent = '✓ 已复制到剪贴板';
                button.style.background = 'var(--noir-graphite)';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = 'var(--noir-ink)';
                }, 2000);
            }).catch(err => {
                console.error('复制失败:', err);
                alert('复制失败，请手动复制');
            });
        }

        // 重新派发任务
        function reassignTask(e) {
            e.preventDefault();
            
            const taskCard = e.target.closest('.task-card');
            const taskId = taskCard.querySelector('.task-id').textContent;
            const taskTitle = taskCard.querySelector('.task-title').textContent;
            
            // 确认对话框
            const confirmed = confirm(`确定要重新派发任务吗？\n\n任务: ${taskTitle}\nID: ${taskId}\n\n此操作将终止当前进度并重新分配该任务。`);
            
            if (confirmed) {
                const button = e.target;
                const originalText = button.textContent;
                button.textContent = '正在重新派发...';
                button.disabled = true;
                button.style.opacity = '0.6';
                
                // 模拟API调用
                setTimeout(() => {
                    button.textContent = '✓ 已重新派发';
                    button.style.background = 'var(--noir-graphite)';
                    button.style.color = 'var(--blanc-pure)';
                    
                    setTimeout(() => {
                        button.textContent = originalText;
                        button.disabled = false;
                        button.style.opacity = '1';
                        button.style.background = '';
                        button.style.color = '';
                    }, 2000);
                }, 1000);
            }
        }

        // 复制完成报告
        function copyReport(e) {
            e.preventDefault();
            
            const taskCard = e.target.closest('.task-card');
            const taskId = taskCard.querySelector('.task-id').textContent;
            const taskTitle = taskCard.querySelector('.task-title').textContent;
            const timeUsed = taskCard.querySelector('.task-estimate').textContent;
            
            // 构建完成报告（示例）
            const report = `# 任务完成报告

## 基本信息
- 任务ID: ${taskId}
- 任务名称: ${taskTitle}
- 完成时间: ${new Date().toLocaleString('zh-CN')}
- 用时: ${timeUsed}

## 完成情况
✅ 已完成所有开发任务
✅ 单元测试覆盖率: 92%
✅ 代码审查已通过
✅ 已部署到测试环境

## 技术实现
- 技术栈: React 18 + TypeScript
- 核心功能: [功能描述]
- 性能指标: LCP < 2.5s, FID < 100ms

## 交付物
- 源代码: 已提交到Git主分支
- 技术文档: 已更新到知识库
- 测试用例: 共28个测试用例全部通过

## 遗留问题
无

## 备注
所有功能已验证通过，可以进入生产部署。`;

            // 复制到剪贴板
            navigator.clipboard.writeText(report).then(() => {
                const button = e.target;
                const originalText = button.textContent;
                button.textContent = '✓ 报告已复制';
                button.style.background = 'var(--noir-graphite)';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = 'var(--noir-ink)';
                }, 2000);
            }).catch(err => {
                console.error('复制失败:', err);
                alert('复制失败，请手动复制');
            });
        }

        // 选择对话
        function selectConversation(id) {
            document.querySelectorAll('.conversation-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.conversation-item').classList.add('active');
        }

        // 切换文档分类
        function toggleCategory(e) {
            const items = e.target.nextElementSibling;
            items.classList.toggle('active');
        }

        // 选择文档
        function selectDoc(e) {
            document.querySelectorAll('.doc-item').forEach(item => {
                item.classList.remove('active');
            });
            e.target.classList.add('active');
        }
    </script>

        <!-- ========== 记忆空间模块 ========== -->
        <div class="memory-space-module version-content" data-version="1">
            <!-- 左侧：概览面板 -->
            <div class="memory-overview">
                <div class="overview-header">
                    <h2 class="overview-title">记忆空间</h2>
                    <p class="overview-subtitle">基于MCP自动生成的项目知识库</p>
                </div>

                <!-- 统计卡片 -->
                <div class="stats-grid">
                    <div class="stat-card" data-filter="all">
                        <div class="stat-label">总记忆</div>
                        <div class="stat-value">45</div>
                    </div>

                    <div class="stat-card" data-filter="decision">
                        <div class="stat-label">决策</div>
                        <div class="stat-value">12</div>
                    </div>

                    <div class="stat-card" data-filter="solution">
                        <div class="stat-label">方案</div>
                        <div class="stat-value">23</div>
                    </div>

                    <div class="stat-card" data-filter="important">
                        <div class="stat-label">重要</div>
                        <div class="stat-value">8</div>
                    </div>
                </div>

                <!-- 最新记忆 -->
                <div class="recent-memories">
                    <div class="recent-header">最新记忆</div>

                    <div class="recent-item" onclick="jumpToMemory('memory-1')">
                        <div class="recent-item-type">决策 · 2天前</div>
                        <div class="recent-item-title">ADR: 采用Monorepo架构</div>
                    </div>

                    <div class="recent-item" onclick="jumpToMemory('memory-2')">
                        <div class="recent-item-type">方案 · 3天前</div>
                        <div class="recent-item-title">解决Tab切换bug的方案</div>
                    </div>

                    <div class="recent-item" onclick="jumpToMemory('memory-3')">
                        <div class="recent-item-type">知识 · 5天前</div>
                        <div class="recent-item-title">React Hooks最佳实践</div>
                    </div>
                </div>
            </div>

            <!-- 右侧：记忆流 -->
            <div class="memory-stream">
                <!-- 筛选栏 -->
                <div class="stream-filters">
                    <button class="filter-chip active" onclick="filterMemories('all')">全部</button>
                    <button class="filter-chip" onclick="filterMemories('decision')">决策</button>
                    <button class="filter-chip" onclick="filterMemories('solution')">方案</button>
                    <button class="filter-chip" onclick="filterMemories('knowledge')">知识</button>
                    <button class="filter-chip" onclick="filterMemories('important')">重要</button>
                </div>

                <!-- 记忆时间线 -->
                <div class="memory-timeline">
                    <!-- 记忆项1: 决策 -->
                    <div class="memory-item" id="memory-1" data-type="decision important">
                        <div class="memory-marker decision"></div>
                        <div class="memory-card">
                            <div class="memory-header">
                                <div>
                                    <span class="memory-type-badge decision">决策</span>
                                    <h3 class="memory-title">ADR: 采用Monorepo架构</h3>
                                    <div class="memory-meta">
                                        <span>2025-11-17 10:00</span>
                                        <span>AI Architect</span>
                                        <span>重要度: ⭐⭐⭐⭐⭐⭐⭐⭐</span>
                                    </div>
                                </div>
                            </div>
                            <div class="memory-content">
                                <strong>背景：</strong> 项目规模扩大，需要统一管理多个子项目，包括前端、后端、文档、工具库等。<br><br>
                                <strong>决策：</strong> 采用pnpm workspace实现Monorepo架构，统一依赖管理和构建流程。<br><br>
                                <strong>备选方案：</strong> Lerna、Nx、Turborepo<br><br>
                                <strong>影响范围：</strong> 影响5个核心组件的开发流程
                            </div>
                            <div class="memory-tags">
                                <span class="memory-tag">架构决策</span>
                                <span class="memory-tag">Monorepo</span>
                                <span class="memory-tag">已采纳</span>
                            </div>
                        </div>
                    </div>

                    <!-- 记忆项2: 方案 -->
                    <div class="memory-item" id="memory-2" data-type="solution">
                        <div class="memory-marker solution"></div>
                        <div class="memory-card">
                            <div class="memory-header">
                                <div>
                                    <span class="memory-type-badge solution">方案</span>
                                    <h3 class="memory-title">解决Tab切换bug的方案</h3>
                                    <div class="memory-meta">
                                        <span>2025-11-16 14:30</span>
                                        <span>AI Architect</span>
                                    </div>
                                </div>
                            </div>
                            <div class="memory-content">
                                <strong>问题：</strong> Tab切换时出现闪烁，用户体验不佳。<br><br>
                                <strong>原因分析：</strong> display: none切换导致重绘，且没有过渡动画。<br><br>
                                <strong>解决方案：</strong> 
                                1. 使用opacity + visibility替代display切换<br>
                                2. 添加0.3s过渡动画<br>
                                3. 预加载所有Tab内容，避免懒加载闪烁<br><br>
                                <strong>效果：</strong> 切换流畅度提升，用户反馈良好
                            </div>
                            <div class="memory-tags">
                                <span class="memory-tag">Bug修复</span>
                                <span class="memory-tag">交互优化</span>
                                <span class="memory-tag">已实施</span>
                            </div>
                        </div>
                    </div>

                    <!-- 记忆项3: 知识 -->
                    <div class="memory-item" id="memory-3" data-type="knowledge">
                        <div class="memory-marker knowledge"></div>
                        <div class="memory-card">
                            <div class="memory-header">
                                <div>
                                    <span class="memory-type-badge knowledge">知识</span>
                                    <h3 class="memory-title">React Hooks最佳实践</h3>
                                    <div class="memory-meta">
                                        <span>2025-11-15 09:20</span>
                                        <span>学习笔记</span>
                                    </div>
                                </div>
                            </div>
                            <div class="memory-content">
                                <strong>核心原则：</strong><br>
                                1. 只在顶层调用Hooks，不在循环/条件/嵌套中使用<br>
                                2. 只在React函数组件或自定义Hook中调用<br>
                                3. 使用ESLint规则确保正确使用<br><br>
                                <strong>常见陷阱：</strong><br>
                                - useEffect依赖项遗漏导致闭包陷阱<br>
                                - 过度使用useState导致重渲染<br>
                                - 忘记清理副作用导致内存泄漏
                            </div>
                            <div class="memory-tags">
                                <span class="memory-tag">React</span>
                                <span class="memory-tag">Hooks</span>
                                <span class="memory-tag">最佳实践</span>
                            </div>
                        </div>
                    </div>

                    <!-- 记忆项4: 决策 -->
                    <div class="memory-item" data-type="decision important">
                        <div class="memory-marker decision"></div>
                        <div class="memory-card">
                            <div class="memory-header">
                                <div>
                                    <span class="memory-type-badge decision">决策</span>
                                    <h3 class="memory-title">ADR: 使用FastAPI构建后端</h3>
                                    <div class="memory-meta">
                                        <span>2025-11-14 16:00</span>
                                        <span>AI Architect</span>
                                        <span>重要度: ⭐⭐⭐⭐⭐⭐⭐</span>
                                    </div>
                                </div>
                            </div>
                            <div class="memory-content">
                                <strong>背景：</strong> 需要构建高性能的API服务，支持异步处理和自动文档生成。<br><br>
                                <strong>决策：</strong> 选择FastAPI作为后端框架，基于Python 3.10+和Pydantic。<br><br>
                                <strong>备选方案：</strong> Django REST Framework、Flask、Express.js<br><br>
                                <strong>优势：</strong> 
                                - 原生异步支持，性能接近Node.js<br>
                                - 自动生成OpenAPI文档<br>
                                - 类型提示和数据验证<br>
                                - 与Claude API集成友好
                            </div>
                            <div class="memory-tags">
                                <span class="memory-tag">架构决策</span>
                                <span class="memory-tag">FastAPI</span>
                                <span class="memory-tag">后端</span>
                                <span class="memory-tag">已采纳</span>
                            </div>
                        </div>
                    </div>

                    <!-- 记忆项5: 方案 -->
                    <div class="memory-item" data-type="solution">
                        <div class="memory-marker solution"></div>
                        <div class="memory-card">
                            <div class="memory-header">
                                <div>
                                    <span class="memory-type-badge solution">方案</span>
                                    <h3 class="memory-title">知识库数据库设计方案</h3>
                                    <div class="memory-meta">
                                        <span>2025-11-13 11:30</span>
                                        <span>全栈工程师AI</span>
                                    </div>
                                </div>
                            </div>
                            <div class="memory-content">
                                <strong>技术选型：</strong> Neo4j图数据库<br><br>
                                <strong>核心实体：</strong><br>
                                - 知识节点（Knowledge）<br>
                                - 任务节点（Task）<br>
                                - 文档节点（Document）<br>
                                - ADR节点（Decision）<br><br>
                                <strong>关系设计：</strong><br>
                                - DEPENDS_ON: 依赖关系<br>
                                - REFERENCES: 引用关系<br>
                                - DERIVED_FROM: 衍生关系<br>
                                - IMPLEMENTS: 实现关系
                            </div>
                            <div class="memory-tags">
                                <span class="memory-tag">数据库设计</span>
                                <span class="memory-tag">Neo4j</span>
                                <span class="memory-tag">已实现</span>
                            </div>
                        </div>
                    </div>

                    <!-- 记忆项6: 知识 -->
                    <div class="memory-item" data-type="knowledge">
                        <div class="memory-marker knowledge"></div>
                        <div class="memory-card">
                            <div class="memory-header">
                                <div>
                                    <span class="memory-type-badge knowledge">知识</span>
                                    <h3 class="memory-title">CSS Grid vs Flexbox选择指南</h3>
                                    <div class="memory-meta">
                                        <span>2025-11-12 15:45</span>
                                        <span>学习笔记</span>
                                    </div>
                                </div>
                            </div>
                            <div class="memory-content">
                                <strong>何时使用Grid：</strong><br>
                                - 二维布局（行+列同时控制）<br>
                                - 固定网格结构（如卡片列表）<br>
                                - 需要对齐到网格线<br><br>
                                <strong>何时使用Flexbox：</strong><br>
                                - 一维布局（单行或单列）<br>
                                - 内容驱动的布局<br>
                                - 需要灵活的空间分配<br><br>
                                <strong>最佳实践：</strong> 两者结合使用，Grid定义整体框架，Flexbox处理内部对齐
                            </div>
                            <div class="memory-tags">
                                <span class="memory-tag">CSS</span>
                                <span class="memory-tag">布局</span>
                                <span class="memory-tag">最佳实践</span>
                            </div>
                        </div>
                    </div>

                    <!-- 记忆项7: 决策 -->
                    <div class="memory-item" data-type="decision">
                        <div class="memory-marker decision"></div>
                        <div class="memory-card">
                            <div class="memory-header">
                                <div>
                                    <span class="memory-type-badge decision">决策</span>
                                    <h3 class="memory-title">ADR: 采用事件驱动架构</h3>
                                    <div class="memory-meta">
                                        <span>2025-11-11 14:20</span>
                                        <span>AI Architect</span>
                                        <span>重要度: ⭐⭐⭐⭐⭐⭐</span>
                                    </div>
                                </div>
                            </div>
                            <div class="memory-content">
                                <strong>背景：</strong> 系统模块间需要松耦合的通信方式，支持异步处理和扩展性。<br><br>
                                <strong>决策：</strong> 采用事件驱动架构，使用消息队列（RabbitMQ/Redis）作为事件总线。<br><br>
                                <strong>优势：</strong><br>
                                - 解耦模块间依赖<br>
                                - 支持异步处理<br>
                                - 易于水平扩展<br>
                                - 便于审计和重放
                            </div>
                            <div class="memory-tags">
                                <span class="memory-tag">架构决策</span>
                                <span class="memory-tag">事件驱动</span>
                                <span class="memory-tag">已采纳</span>
                            </div>
                        </div>
                    </div>

                    <!-- 记忆项8: 方案 -->
                    <div class="memory-item" data-type="solution important">
                        <div class="memory-marker solution"></div>
                        <div class="memory-card">
                            <div class="memory-header">
                                <div>
                                    <span class="memory-type-badge solution">方案</span>
                                    <h3 class="memory-title">Dashboard架构重构方案</h3>
                                    <div class="memory-meta">
                                        <span>2025-11-10 16:30</span>
                                        <span>AI Architect</span>
                                    </div>
                                </div>
                            </div>
                            <div class="memory-content">
                                <strong>问题诊断：</strong><br>
                                - 组件耦合度过高（3000+行代码）<br>
                                - 缺乏模块化设计<br>
                                - 性能问题（重渲染频繁）<br><br>
                                <strong>重构方案：</strong><br>
                                采用模块化架构，拆分为7个独立模块：<br>
                                - TaskBoard 任务看板<br>
                                - EventStream 事件流<br>
                                - ConversationHub 对话中心<br>
                                - ArchitectConsole 架构师控制台<br>
                                - KnowledgeGraph 知识图谱<br>
                                - Analytics 分析面板<br><br>
                                <strong>预期效果：</strong> 代码量减少60%，首屏性能提升60%
                            </div>
                            <div class="memory-tags">
                                <span class="memory-tag">架构重构</span>
                                <span class="memory-tag">Dashboard</span>
                                <span class="memory-tag">已实施</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <!-- ========== 实时脉动模块 ========== -->
    <div class="pulse-module version-content" data-version="1">
        <!-- 模块头部 -->
        <div class="pulse-module-header">
            <div class="pulse-header-row">
                <h2 class="pulse-module-title">实时脉动</h2>
                <span class="pulse-status-badge">
                    <span class="pulse-status-dot"></span>
                    在线
                </span>
            </div>

            <div class="pulse-info-bar">
                <div class="pulse-info-section">
                    <div class="pulse-avatar">脉</div>
                    <div class="pulse-details">
                        <div class="pulse-name">实时脉动</div>
                        <div class="pulse-meta">System Monitor · <span class="current-time">2025-11-20 03:28</span> · 每30s刷新</div>
                    </div>
                </div>
                <div class="pulse-quick-stats">
                    <div class="pulse-stat-item">
                        <div class="pulse-stat-value">89</div>
                        <div class="pulse-stat-label">事件</div>
                    </div>
                    <div class="pulse-stat-item">
                        <div class="pulse-stat-value">12</div>
                        <div class="pulse-stat-label">今日</div>
                    </div>
                    <div class="pulse-stat-item">
                        <div class="pulse-stat-value">4</div>
                        <div class="pulse-stat-label">角色</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab导航 -->
        <div class="tab-nav">
            <button class="tab-item active" onclick="switchPulseTab('events')">
                事件流
                <span class="tab-badge">89</span>
            </button>
            <button class="tab-item" onclick="switchPulseTab('timeline')">
                时间线视图
            </button>
            <button class="tab-item" onclick="switchPulseTab('analytics')">
                统计分析
            </button>
        </div>

        <!-- Tab内容区（可滚动）-->
        <div class="tab-content">
            <!-- Tab 1: 事件流 -->
            <div id="pulse-events" class="tab-pane active">
                <!-- 筛选器（sticky） -->
                <div class="content-filters">
                    <div class="filter-chips">
                        <button class="filter-chip active">全部 89</button>
                        <button class="filter-chip">今天</button>
                        <button class="filter-chip">本周</button>
                        <button class="filter-chip">决策</button>
                        <button class="filter-chip">任务</button>
                        <button class="filter-chip">交接</button>
                    </div>
                    <input type="text" class="search-input" placeholder="搜索事件、任务ID...">
                </div>

                <!-- 事件列表 -->
                <div class="event-list">
                    <!-- 事件1 -->
                    <div class="event-item" data-category="任务" data-date="2025-11-19">
                        <div class="event-checkbox"></div>
                        <div class="event-content">
                            <div class="event-header">
                                <div class="event-title-section">
                                    <div class="event-title">任务完成: Dashboard架构重构</div>
                                    <div class="event-meta">
                                        <span>AI Architect</span>
                                        <span>·</span>
                                        <span>TASK-045</span>
                                    </div>
                                </div>
                                <div class="event-time">2025-11-19 14:30</div>
                            </div>
                            <div class="event-description">
                                完成了Dashboard模块的完整重构，采用模块化架构，拆分为7个独立组件。提交了完成报告，等待审查。
                            </div>
                            <div class="event-tags">
                                <span class="event-tag">架构重构</span>
                                <span class="event-tag">Dashboard</span>
                                <span class="event-tag">已完成</span>
                            </div>
                        </div>
                    </div>

                    <!-- 事件2 -->
                    <div class="event-item" data-category="决策" data-date="2025-11-19">
                        <div class="event-checkbox"></div>
                        <div class="event-content">
                            <div class="event-header">
                                <div class="event-title-section">
                                    <div class="event-title">记录架构决策: ADR-012 采用事件驱动架构</div>
                                    <div class="event-meta">
                                        <span>AI Architect</span>
                                        <span>·</span>
                                        <span>决策</span>
                                    </div>
                                </div>
                                <div class="event-time">2025-11-19 11:30</div>
                            </div>
                            <div class="event-description">
                                经过技术调研和团队讨论，决定采用事件驱动架构来处理系统间的异步通信。记录了决策背景、备选方案和实施计划。
                            </div>
                            <div class="event-tags">
                                <span class="event-tag">ADR</span>
                                <span class="event-tag">架构决策</span>
                            </div>
                        </div>
                    </div>

                    <!-- 事件3 -->
                    <div class="event-item" data-category="任务" data-date="2025-11-18">
                        <div class="event-checkbox"></div>
                        <div class="event-content">
                            <div class="event-header">
                                <div class="event-title-section">
                                    <div class="event-title">发起任务: API集成开发</div>
                                    <div class="event-meta">
                                        <span>AI Architect</span>
                                        <span>·</span>
                                        <span>TASK-048</span>
                                    </div>
                                </div>
                                <div class="event-time">2025-11-18 16:00</div>
                            </div>
                            <div class="event-description">
                                创建了API集成开发任务，需要集成8个外部API模块，包括Notion、Claude、知识图谱等。预估工时6.5小时。
                            </div>
                            <div class="event-tags">
                                <span class="event-tag">API开发</span>
                                <span class="event-tag">集成</span>
                            </div>
                        </div>
                    </div>

                    <!-- 事件4 -->
                    <div class="event-item" data-category="任务" data-date="2025-11-18">
                        <div class="event-checkbox"></div>
                        <div class="event-content">
                            <div class="event-header">
                                <div class="event-title-section">
                                    <div class="event-title">代码审查通过: API集成模块</div>
                                    <div class="event-meta">
                                        <span>全栈工程师AI</span>
                                        <span>·</span>
                                        <span>REVIEW-032</span>
                                    </div>
                                </div>
                                <div class="event-time">2025-11-18 10:20</div>
                            </div>
                            <div class="event-description">
                                架构师审查通过，代码质量优秀。API集成模块已合并到主分支，包含完整的错误处理和重试机制。
                            </div>
                            <div class="event-tags">
                                <span class="event-tag">代码审查</span>
                                <span class="event-tag">已通过</span>
                            </div>
                        </div>
                    </div>

                    <!-- 事件5 -->
                    <div class="event-item" data-category="任务" data-date="2025-11-18">
                        <div class="event-checkbox"></div>
                        <div class="event-content">
                            <div class="event-header">
                                <div class="event-title-section">
                                    <div class="event-title">部署成功: Dashboard v2.1.0</div>
                                    <div class="event-meta">
                                        <span>全栈工程师AI</span>
                                        <span>·</span>
                                        <span>DEPLOY-008</span>
                                    </div>
                                </div>
                                <div class="event-time">2025-11-18 18:45</div>
                            </div>
                            <div class="event-description">
                                成功部署到生产环境。通过了所有自动化测试（单元测试92%覆盖率，E2E测试16个场景全通过），Lighthouse性能评分：98/100。
                            </div>
                            <div class="event-tags">
                                <span class="event-tag">部署</span>
                                <span class="event-tag">生产环境</span>
                            </div>
                        </div>
                    </div>

                    <!-- 事件6 -->
                    <div class="event-item" data-category="交接" data-date="2025-11-17">
                        <div class="event-checkbox"></div>
                        <div class="event-content">
                            <div class="event-header">
                                <div class="event-title-section">
                                    <div class="event-title">架构师交接: Phase A-B工作完整交接</div>
                                    <div class="event-meta">
                                        <span>前任架构师 → AI Architect</span>
                                    </div>
                                </div>
                                <div class="event-time">2025-11-17 18:00</div>
                            </div>
                            <div class="event-description">
                                前任架构师完成了Phase A和B的全部工作，交接了29个已完成任务、12个ADR决策、完整的架构文档和关键知识点。
                            </div>
                            <div class="event-tags">
                                <span class="event-tag">交接</span>
                                <span class="event-tag">知识传承</span>
                            </div>
                        </div>
                    </div>

                    <!-- 更多事件... -->
                    <div class="event-item" data-category="任务" data-date="2025-11-19">
                        <div class="event-checkbox"></div>
                        <div class="event-content">
                            <div class="event-header">
                                <div class="event-title-section">
                                    <div class="event-title">接收任务: 实现记忆管理Tab</div>
                                    <div class="event-meta">
                                        <span>架构师AI</span>
                                        <span>·</span>
                                        <span>TASK-047</span>
                                    </div>
                                </div>
                                <div class="event-time">2025-11-19 10:00</div>
                            </div>
                            <div class="event-description">
                                架构师分配了新任务：实现Dashboard项目记忆管理Tab。包括记忆增删改查、分类管理、搜索功能。预估3小时，可并行开发。
                            </div>
                            <div class="event-tags">
                                <span class="event-tag">任务分配</span>
                                <span class="event-tag">可并行</span>
                            </div>
                        </div>
                    </div>

                    <div class="event-item" data-category="任务" data-date="2025-11-15">
                        <div class="event-checkbox"></div>
                        <div class="event-content">
                            <div class="event-header">
                                <div class="event-title-section">
                                    <div class="event-title">系统初始化: Monorepo架构配置</div>
                                    <div class="event-meta">
                                        <span>System</span>
                                        <span>·</span>
                                        <span>INIT-001</span>
                                    </div>
                                </div>
                                <div class="event-time">2025-11-15 10:00</div>
                            </div>
                            <div class="event-description">
                                项目初始化完成，采用pnpm workspace实现Monorepo架构。配置了TypeScript、ESLint、Prettier等开发工具链。
                            </div>
                            <div class="event-tags">
                                <span class="event-tag">系统初始化</span>
                                <span class="event-tag">Monorepo</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 2: 时间线视图 -->
            <div id="pulse-timeline" class="tab-pane">
                <div class="timeline-view">
                    <!-- 2025-11-19 -->
                    <div class="timeline-date-group">
                        <div class="date-header">
                            <div class="date-marker"></div>
                            <div class="date-label">2025-11-19</div>
                            <div class="date-count">5个事件</div>
                        </div>

                        <div class="timeline-event">
                            <div class="timeline-card">
                                <div class="timeline-card-header">
                                    <div>
                                        <div class="timeline-card-title">任务完成: Dashboard架构重构</div>
                                        <div class="timeline-card-meta">AI Architect · TASK-045</div>
                                    </div>
                                    <div class="timeline-card-time">14:30</div>
                                </div>
                                <div class="timeline-card-description">
                                    完成了Dashboard模块的完整重构，采用模块化架构，拆分为7个独立组件。提交了完成报告，等待审查。
                                </div>
                                <div class="timeline-card-tags">
                                    <span class="timeline-card-tag">架构重构</span>
                                    <span class="timeline-card-tag">Dashboard</span>
                                    <span class="timeline-card-tag">已完成</span>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-event">
                            <div class="timeline-card">
                                <div class="timeline-card-header">
                                    <div>
                                        <div class="timeline-card-title">记录架构决策: ADR-012 采用事件驱动架构</div>
                                        <div class="timeline-card-meta">AI Architect · 决策</div>
                                    </div>
                                    <div class="timeline-card-time">11:30</div>
                                </div>
                                <div class="timeline-card-description">
                                    经过技术调研和团队讨论，决定采用事件驱动架构来处理系统间的异步通信。记录了决策背景、备选方案和实施计划。
                                </div>
                                <div class="timeline-card-tags">
                                    <span class="timeline-card-tag">ADR</span>
                                    <span class="timeline-card-tag">架构决策</span>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-event">
                            <div class="timeline-card">
                                <div class="timeline-card-header">
                                    <div>
                                        <div class="timeline-card-title">接收任务: 实现记忆管理Tab</div>
                                        <div class="timeline-card-meta">架构师AI · TASK-047</div>
                                    </div>
                                    <div class="timeline-card-time">10:00</div>
                                </div>
                                <div class="timeline-card-description">
                                    架构师分配了新任务：实现Dashboard项目记忆管理Tab。包括记忆增删改查、分类管理、搜索功能。预估3小时，可并行开发。
                                </div>
                                <div class="timeline-card-tags">
                                    <span class="timeline-card-tag">任务分配</span>
                                    <span class="timeline-card-tag">可并行</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 2025-11-18 -->
                    <div class="timeline-date-group">
                        <div class="date-header">
                            <div class="date-marker"></div>
                            <div class="date-label">2025-11-18</div>
                            <div class="date-count">4个事件</div>
                        </div>

                        <div class="timeline-event">
                            <div class="timeline-card">
                                <div class="timeline-card-header">
                                    <div>
                                        <div class="timeline-card-title">部署成功: Dashboard v2.1.0</div>
                                        <div class="timeline-card-meta">全栈工程师AI · DEPLOY-008</div>
                                    </div>
                                    <div class="timeline-card-time">18:45</div>
                                </div>
                                <div class="timeline-card-description">
                                    成功部署到生产环境。通过了所有自动化测试（单元测试92%覆盖率，E2E测试16个场景全通过），Lighthouse性能评分：98/100。
                                </div>
                                <div class="timeline-card-tags">
                                    <span class="timeline-card-tag">部署</span>
                                    <span class="timeline-card-tag">生产环境</span>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-event">
                            <div class="timeline-card">
                                <div class="timeline-card-header">
                                    <div>
                                        <div class="timeline-card-title">发起任务: API集成开发</div>
                                        <div class="timeline-card-meta">AI Architect · TASK-048</div>
                                    </div>
                                    <div class="timeline-card-time">16:00</div>
                                </div>
                                <div class="timeline-card-description">
                                    创建了API集成开发任务，需要集成8个外部API模块，包括Notion、Claude、知识图谱等。预估工时6.5小时。
                                </div>
                                <div class="timeline-card-tags">
                                    <span class="timeline-card-tag">API开发</span>
                                    <span class="timeline-card-tag">集成</span>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-event">
                            <div class="timeline-card">
                                <div class="timeline-card-header">
                                    <div>
                                        <div class="timeline-card-title">代码审查通过: API集成模块</div>
                                        <div class="timeline-card-meta">全栈工程师AI · REVIEW-032</div>
                                    </div>
                                    <div class="timeline-card-time">10:20</div>
                                </div>
                                <div class="timeline-card-description">
                                    架构师审查通过，代码质量优秀。API集成模块已合并到主分支，包含完整的错误处理和重试机制。
                                </div>
                                <div class="timeline-card-tags">
                                    <span class="timeline-card-tag">代码审查</span>
                                    <span class="timeline-card-tag">已通过</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 2025-11-17 -->
                    <div class="timeline-date-group">
                        <div class="date-header">
                            <div class="date-marker"></div>
                            <div class="date-label">2025-11-17</div>
                            <div class="date-count">1个事件</div>
                        </div>

                        <div class="timeline-event">
                            <div class="timeline-card">
                                <div class="timeline-card-header">
                                    <div>
                                        <div class="timeline-card-title">架构师交接: Phase A-B工作完整交接</div>
                                        <div class="timeline-card-meta">前任架构师 → AI Architect</div>
                                    </div>
                                    <div class="timeline-card-time">18:00</div>
                                </div>
                                <div class="timeline-card-description">
                                    前任架构师完成了Phase A和B的全部工作，交接了29个已完成任务、12个ADR决策、完整的架构文档和关键知识点。
                                </div>
                                <div class="timeline-card-tags">
                                    <span class="timeline-card-tag">交接</span>
                                    <span class="timeline-card-tag">知识传承</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 2025-11-15 -->
                    <div class="timeline-date-group">
                        <div class="date-header">
                            <div class="date-marker"></div>
                            <div class="date-label">2025-11-15</div>
                            <div class="date-count">1个事件</div>
                        </div>

                        <div class="timeline-event">
                            <div class="timeline-card">
                                <div class="timeline-card-header">
                                    <div>
                                        <div class="timeline-card-title">系统初始化: Monorepo架构配置</div>
                                        <div class="timeline-card-meta">System · INIT-001</div>
                                    </div>
                                    <div class="timeline-card-time">10:00</div>
                                </div>
                                <div class="timeline-card-description">
                                    项目初始化完成，采用pnpm workspace实现Monorepo架构。配置了TypeScript、ESLint、Prettier等开发工具链。
                                </div>
                                <div class="timeline-card-tags">
                                    <span class="timeline-card-tag">系统初始化</span>
                                    <span class="timeline-card-tag">Monorepo</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 3: 统计分析 -->
            <div id="pulse-analytics" class="tab-pane">
                <div class="analytics-container">
                    <!-- 概览卡片 -->
                    <div class="overview-grid">
                        <div class="overview-card">
                            <div class="overview-label">总事件数</div>
                            <div class="overview-value">89</div>
                            <div class="overview-change">较上周 +12%</div>
                        </div>
                        <div class="overview-card">
                            <div class="overview-label">今日事件</div>
                            <div class="overview-value">12</div>
                            <div class="overview-change">平均每日 8.5</div>
                        </div>
                        <div class="overview-card">
                            <div class="overview-label">活跃角色</div>
                            <div class="overview-value">4</div>
                            <div class="overview-change">架构师 · 工程师 · 系统</div>
                        </div>
                        <div class="overview-card">
                            <div class="overview-label">完成任务</div>
                            <div class="overview-value">29</div>
                            <div class="overview-change">完成率 78%</div>
                        </div>
                    </div>

                    <!-- 趋势图表 -->
                    <div class="chart-section">
                        <div class="section-header">
                            <div class="section-title">7天事件趋势</div>
                            <div class="section-description">每日事件数量变化</div>
                        </div>
                        <div class="trend-chart">
                            <div class="chart-bars">
                                <div class="chart-bar-group">
                                    <div class="chart-bar" style="height: 50%;">
                                        <span class="chart-bar-value">6</span>
                                    </div>
                                    <div class="chart-bar-label">11-14</div>
                                </div>
                                <div class="chart-bar-group">
                                    <div class="chart-bar" style="height: 75%;">
                                        <span class="chart-bar-value">9</span>
                                    </div>
                                    <div class="chart-bar-label">11-15</div>
                                </div>
                                <div class="chart-bar-group">
                                    <div class="chart-bar" style="height: 58%;">
                                        <span class="chart-bar-value">7</span>
                                    </div>
                                    <div class="chart-bar-label">11-16</div>
                                </div>
                                <div class="chart-bar-group">
                                    <div class="chart-bar" style="height: 83%;">
                                        <span class="chart-bar-value">10</span>
                                    </div>
                                    <div class="chart-bar-label">11-17</div>
                                </div>
                                <div class="chart-bar-group">
                                    <div class="chart-bar" style="height: 92%;">
                                        <span class="chart-bar-value">11</span>
                                    </div>
                                    <div class="chart-bar-label">11-18</div>
                                </div>
                                <div class="chart-bar-group">
                                    <div class="chart-bar" style="height: 100%;">
                                        <span class="chart-bar-value">12</span>
                                    </div>
                                    <div class="chart-bar-label">11-19</div>
                                </div>
                                <div class="chart-bar-group">
                                    <div class="chart-bar" style="height: 67%;">
                                        <span class="chart-bar-value">8</span>
                                    </div>
                                    <div class="chart-bar-label">11-20</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 分类统计 -->
                    <div class="chart-section">
                        <div class="section-header">
                            <div class="section-title">事件分类统计</div>
                            <div class="section-description">按类型和角色分组</div>
                        </div>
                        <div class="category-stats">
                            <!-- 按类型 -->
                            <div class="category-card">
                                <div class="category-header">
                                    <div class="category-title">事件类型</div>
                                    <div class="category-total">89</div>
                                </div>
                                <div class="category-items">
                                    <div class="category-item">
                                        <div class="category-item-left">
                                            <div class="category-item-bar">
                                                <div class="category-item-bar-fill" style="width: 60%;"></div>
                                            </div>
                                            <span class="category-item-name">任务</span>
                                        </div>
                                        <div>
                                            <span class="category-item-count">54</span>
                                            <span class="category-item-percent">60%</span>
                                        </div>
                                    </div>
                                    <div class="category-item">
                                        <div class="category-item-left">
                                            <div class="category-item-bar">
                                                <div class="category-item-bar-fill" style="width: 25%;"></div>
                                            </div>
                                            <span class="category-item-name">决策</span>
                                        </div>
                                        <div>
                                            <span class="category-item-count">22</span>
                                            <span class="category-item-percent">25%</span>
                                        </div>
                                    </div>
                                    <div class="category-item">
                                        <div class="category-item-left">
                                            <div class="category-item-bar">
                                                <div class="category-item-bar-fill" style="width: 10%;"></div>
                                            </div>
                                            <span class="category-item-name">交接</span>
                                        </div>
                                        <div>
                                            <span class="category-item-count">9</span>
                                            <span class="category-item-percent">10%</span>
                                        </div>
                                    </div>
                                    <div class="category-item">
                                        <div class="category-item-left">
                                            <div class="category-item-bar">
                                                <div class="category-item-bar-fill" style="width: 5%;"></div>
                                            </div>
                                            <span class="category-item-name">系统</span>
                                        </div>
                                        <div>
                                            <span class="category-item-count">4</span>
                                            <span class="category-item-percent">5%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 按角色 -->
                            <div class="category-card">
                                <div class="category-header">
                                    <div class="category-title">角色活跃度</div>
                                    <div class="category-total">4</div>
                                </div>
                                <div class="category-items">
                                    <div class="category-item">
                                        <div class="category-item-left">
                                            <div class="category-item-bar">
                                                <div class="category-item-bar-fill" style="width: 52%;"></div>
                                            </div>
                                            <span class="category-item-name">AI Architect</span>
                                        </div>
                                        <div>
                                            <span class="category-item-count">46</span>
                                            <span class="category-item-percent">52%</span>
                                        </div>
                                    </div>
                                    <div class="category-item">
                                        <div class="category-item-left">
                                            <div class="category-item-bar">
                                                <div class="category-item-bar-fill" style="width: 34%;"></div>
                                            </div>
                                            <span class="category-item-name">全栈工程师AI</span>
                                        </div>
                                        <div>
                                            <span class="category-item-count">30</span>
                                            <span class="category-item-percent">34%</span>
                                        </div>
                                    </div>
                                    <div class="category-item">
                                        <div class="category-item-left">
                                            <div class="category-item-bar">
                                                <div class="category-item-bar-fill" style="width: 10%;"></div>
                                            </div>
                                            <span class="category-item-name">前任架构师</span>
                                        </div>
                                        <div>
                                            <span class="category-item-count">9</span>
                                            <span class="category-item-percent">10%</span>
                                        </div>
                                    </div>
                                    <div class="category-item">
                                        <div class="category-item-left">
                                            <div class="category-item-bar">
                                                <div class="category-item-bar-fill" style="width: 4%;"></div>
                                            </div>
                                            <span class="category-item-name">System</span>
                                        </div>
                                        <div>
                                            <span class="category-item-count">4</span>
                                            <span class="category-item-percent">4%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 时间分布热力图 -->
                    <div class="heatmap-section">
                        <div class="section-header">
                            <div class="section-title">时间分布热力图</div>
                            <div class="section-description">过去4周的事件密度</div>
                        </div>
                        <div class="heatmap">
                            <div class="heatmap-grid">
                                <!-- 标题行 -->
                                <div></div>
                                <div class="heatmap-label" style="justify-content: center;">周一</div>
                                <div class="heatmap-label" style="justify-content: center;">周二</div>
                                <div class="heatmap-label" style="justify-content: center;">周三</div>
                                <div class="heatmap-label" style="justify-content: center;">周四</div>
                                <div class="heatmap-label" style="justify-content: center;">周五</div>
                                <div class="heatmap-label" style="justify-content: center;">周六</div>
                                <div class="heatmap-label" style="justify-content: center;">周日</div>

                                <!-- 第1周 -->
                                <div class="heatmap-label">第1周</div>
                                <div class="heatmap-cell level-2">3</div>
                                <div class="heatmap-cell level-3">5</div>
                                <div class="heatmap-cell level-1">2</div>
                                <div class="heatmap-cell level-4">7</div>
                                <div class="heatmap-cell level-3">6</div>
                                <div class="heatmap-cell level-1">1</div>
                                <div class="heatmap-cell level-1">2</div>

                                <!-- 第2周 -->
                                <div class="heatmap-label">第2周</div>
                                <div class="heatmap-cell level-3">4</div>
                                <div class="heatmap-cell level-2">3</div>
                                <div class="heatmap-cell level-4">8</div>
                                <div class="heatmap-cell level-5">12</div>
                                <div class="heatmap-cell level-4">9</div>
                                <div class="heatmap-cell level-1">2</div>
                                <div class="heatmap-cell level-2">3</div>

                                <!-- 第3周 -->
                                <div class="heatmap-label">第3周</div>
                                <div class="heatmap-cell level-3">6</div>
                                <div class="heatmap-cell level-4">7</div>
                                <div class="heatmap-cell level-3">5</div>
                                <div class="heatmap-cell level-5">10</div>
                                <div class="heatmap-cell level-4">8</div>
                                <div class="heatmap-cell level-2">3</div>
                                <div class="heatmap-cell level-1">1</div>

                                <!-- 第4周 -->
                                <div class="heatmap-label">第4周</div>
                                <div class="heatmap-cell level-4">9</div>
                                <div class="heatmap-cell level-5">11</div>
                                <div class="heatmap-cell level-5">12</div>
                                <div class="heatmap-cell level-4">8</div>
                                <div class="heatmap-cell level-3">6</div>
                                <div class="heatmap-cell level-2">4</div>
                                <div class="heatmap-cell level-1">2</div>
                            </div>

                            <div class="heatmap-legend">
                                <span class="legend-label">活跃度:</span>
                                <div class="legend-item" style="background: var(--blanc-mist);"></div>
                                <div class="legend-item" style="background: var(--blanc-cloud);"></div>
                                <div class="legend-item" style="background: var(--noir-ash);"></div>
                                <div class="legend-item" style="background: var(--noir-steel);"></div>
                                <div class="legend-item" style="background: var(--noir-graphite);"></div>
                                <div class="legend-item" style="background: var(--noir-ink);"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== 运维工程师工作台 ========== -->
    <div class="devops-module version-content" data-version="1">
        <!-- 模块头部 -->
        <div class="devops-module-header">
            <div class="devops-header-row">
                <h2 class="devops-module-title">运维工程师工作台</h2>
                <span class="devops-status-badge">
                    <span class="devops-status-dot"></span>
                    在线中
                </span>
            </div>

            <div class="devops-info-bar">
                <div class="devops-info-section">
                    <div class="devops-avatar">DO</div>
                    <div class="devops-details">
                        <div class="devops-name">DevOps AI</div>
                        <div class="devops-meta">24/7监控 · 最后巡检: 2分钟前 · 运行时长: 365天</div>
                                    </div>
                                </div>
                <div class="devops-quick-stats">
                    <div class="devops-stat-item">
                        <div class="devops-stat-value">99.98%</div>
                        <div class="devops-stat-label">在线率</div>
                                    </div>
                    <div class="devops-stat-item">
                        <div class="devops-stat-value">120ms</div>
                        <div class="devops-stat-label">响应时间</div>
                                </div>
                    <div class="devops-stat-item">
                        <div class="devops-stat-value alert">3</div>
                        <div class="devops-stat-label">待处理Bug</div>
                                    </div>
                    <div class="devops-stat-item">
                        <div class="devops-stat-value">847</div>
                        <div class="devops-stat-label">运维记录</div>
                                </div>
                            </div>
                        </div>
                    </div>

        <!-- Tab导航 -->
        <div class="devops-tab-navigation">
            <button class="devops-tab-item active" onclick="switchDevOpsTab('logs')">
                运维日志
                <span class="devops-tab-badge">847</span>
            </button>
            <button class="devops-tab-item" onclick="switchDevOpsTab('bugs')">
                Bug看板
                <span class="devops-tab-badge alert">3</span>
            </button>
            <button class="devops-tab-item" onclick="switchDevOpsTab('status')">
                系统状态
            </button>
            <button class="devops-tab-item" onclick="switchDevOpsTab('knowledge')">
                知识库
                <span class="devops-tab-badge">128</span>
            </button>
                </div>

        <!-- Tab内容 -->
        <div class="devops-tab-content-wrapper">
            <!-- Tab 1: 运维日志 -->
            <div id="logs" class="devops-tab-pane active">
                <div class="log-filters">
                    <div class="filter-group">
                        <button class="filter-chip active">全部</button>
                        <button class="filter-chip">今天</button>
                        <button class="filter-chip">本周</button>
                        <button class="filter-chip">告警</button>
                        <button class="filter-chip">正常巡检</button>
                        <button class="filter-chip">Bug发现</button>
                            </div>
                    <button class="export-button">导出日志</button>
                                </div>

                <div class="log-timeline">
                    <!-- 故障告警 -->
                    <div class="log-item">
                        <div class="log-marker critical"></div>
                        <div class="log-card critical">
                            <div class="log-header">
                                <div class="log-title-group">
                                    <span class="log-type critical">故障告警</span>
                                    <h3 class="log-title">Dashboard更新后用户看到旧版本UI</h3>
                                    </div>
                                <span class="log-time">2025-11-17 17:30</span>
                                    </div>
                            <div class="log-content">
                                <div class="log-description">
                                    监测到Dashboard组件缓存未清除，导致20%用户仍看到v1.8版本。
                                    影响范围：桌面端Chrome浏览器用户。解决方案：强制端口缓存+清除缓存文档。
                                    </div>
                                <div class="log-metrics">
                                    <span class="metric">影响用户: 234人</span>
                                    <span class="metric">持续时长: 15分钟</span>
                                    <span class="metric">优先级: P0</span>
                                    <span class="metric">错误率: 0.12%</span>
                                </div>
                                    </div>
                            <div class="log-footer">
                                <span class="log-category">类型: 故障处理</span>
                                <span class="log-status resolved">已解决</span>
                                <div class="log-actions">
                                    <button class="log-action-btn">查看详情</button>
                                    <button class="log-action-btn">关联Bug</button>
                                    </div>
                            </div>
                                    </div>
                                </div>

                    <!-- 版本更新 -->
                    <div class="log-item">
                        <div class="log-marker"></div>
                        <div class="log-card">
                            <div class="log-header">
                                <div class="log-title-group">
                                    <span class="log-type update">版本更新</span>
                                    <h3 class="log-title">Dashboard v2.0部署完成</h3>
                                    </div>
                                <span class="log-time">2025-11-17 14:30</span>
                                    </div>
                            <div class="log-content">
                                <div class="log-description">
                                    新增架构师监控、UX/UI确认、全栈开发/测试/交付工程师模块。
                                    所有单元测试通过，性能提升23%，首屏加载时间减少1.2s。
                                    </div>
                                <div class="log-metrics">
                                    <span class="metric">部署时长: 8分钟</span>
                                    <span class="metric">回滚准备: 就绪</span>
                                    <span class="metric">操作人: 交付工程师AI</span>
                                </div>
                            </div>
                            <div class="log-footer">
                                <span class="log-category">类型: 变更记录</span>
                                <span class="log-status resolved">已完成</span>
                                <div class="log-actions">
                                    <button class="log-action-btn">版本详情</button>
                                    <button class="log-action-btn">性能报告</button>
                        </div>
                            </div>
                                </div>
                            </div>

                    <!-- 日常巡检 -->
                    <div class="log-item">
                        <div class="log-marker normal"></div>
                        <div class="log-card normal">
                            <div class="log-header">
                                <div class="log-title-group">
                                    <span class="log-type normal">日常巡检</span>
                                    <h3 class="log-title">API健康检查正常</h3>
                                        </div>
                                <span class="log-time">2025-11-17 10:00</span>
                                        </div>
                            <div class="log-content">
                                <div class="log-description">
                                    完成对8个核心API端点的健康检查，所有服务响应正常。
                                    数据库连接稳定，缓存命中率89%，无告警事件。
                                    </div>
                                <div class="log-metrics">
                                    <span class="metric">响应时间: 120ms</span>
                                    <span class="metric">错误率: 0.01%</span>
                                    <span class="metric">在线率: 99.98%</span>
                                    <span class="metric">并发用户: 1,234</span>
                                </div>
                                        </div>
                            <div class="log-footer">
                                <span class="log-category">类型: 日常巡检</span>
                                <span class="log-status resolved">正常</span>
                                <div class="log-actions">
                                    <button class="log-action-btn">查看报告</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                    <!-- Bug发现 -->
                    <div class="log-item">
                        <div class="log-marker warning"></div>
                        <div class="log-card">
                            <div class="log-header">
                                <div class="log-title-group">
                                    <span class="log-type warning">Bug发现</span>
                                    <h3 class="log-title">知识库搜索返回空结果</h3>
                        </div>
                                <span class="log-time">2025-11-16 22:15</span>
                    </div>
                            <div class="log-content">
                                <div class="log-description">
                                    检测到知识库搜索功能在特定关键词（包含特殊字符）时返回空结果。
                                    复现率100%，影响用户体验。已生成Bug报告BUG-089。
                </div>
                                <div class="log-metrics">
                                    <span class="metric">发现时间: 巡检中</span>
                                    <span class="metric">影响范围: 搜索功能</span>
                                    <span class="metric">优先级: P1</span>
            </div>
        </div>
                            <div class="log-footer">
                                <span class="log-category">类型: Bug报告</span>
                                <span class="log-status pending">待处理</span>
                                <div class="log-actions">
                                    <button class="log-action-btn">查看Bug</button>
                                    <button class="log-action-btn">分配处理</button>
                </div>
            </div>
                </div>
                </div>

                    <!-- 性能优化 -->
                    <div class="log-item">
                        <div class="log-marker normal"></div>
                        <div class="log-card normal">
                            <div class="log-header">
                                <div class="log-title-group">
                                    <span class="log-type normal">性能监控</span>
                                    <h3 class="log-title">CDN缓存命中率优化</h3>
                </div>
                                <span class="log-time">2025-11-16 18:00</span>
            </div>
                            <div class="log-content">
                                <div class="log-description">
                                    监测到CDN缓存命中率从75%提升至89%，静态资源加载速度提升40%。
                                    优化策略：调整缓存策略、启用Brotli压缩、优化图片格式。
        </div>
                                <div class="log-metrics">
                                    <span class="metric">优化前: 75%</span>
                                    <span class="metric">优化后: 89%</span>
                                    <span class="metric">加载提升: 40%</span>
                </div>
                    </div>
                            <div class="log-footer">
                                <span class="log-category">类型: 性能优化</span>
                                <span class="log-status resolved">完成</span>
                                <div class="log-actions">
                                    <button class="log-action-btn">性能报告</button>
                    </div>
                    </div>
                    </div>
                </div>

                    <!-- 安全扫描 -->
                    <div class="log-item">
                        <div class="log-marker normal"></div>
                        <div class="log-card normal">
                            <div class="log-header">
                                <div class="log-title-group">
                                    <span class="log-type normal">安全巡检</span>
                                    <h3 class="log-title">依赖库安全扫描完成</h3>
                </div>
                                <span class="log-time">2025-11-16 12:00</span>
                                </div>
                            <div class="log-content">
                                <div class="log-description">
                                    完成每日依赖库安全扫描，未发现高危漏洞。
                                    建议更新3个npm包至最新稳定版本（非安全类更新）。
                            </div>
                                <div class="log-metrics">
                                    <span class="metric">扫描包数: 487</span>
                                    <span class="metric">高危漏洞: 0</span>
                                    <span class="metric">建议更新: 3</span>
                            </div>
                            </div>
                            <div class="log-footer">
                                <span class="log-category">类型: 安全扫描</span>
                                <span class="log-status resolved">正常</span>
                                <div class="log-actions">
                                    <button class="log-action-btn">查看报告</button>
                                    <button class="log-action-btn">更新建议</button>
                        </div>
                                </div>
                            </div>
                            </div>
                            </div>
                        </div>

            <!-- Tab 2: Bug看板 -->
            <div id="bugs" class="devops-tab-pane">
                <div class="bug-board">
                    <div class="bug-header">
                        <h2 class="kb-section-title">Bug管理看板</h2>
                        <div class="bug-filters">
                            <button class="filter-chip active">全部</button>
                            <button class="filter-chip">P0紧急</button>
                            <button class="filter-chip">P1重要</button>
                            <button class="filter-chip">P2正常</button>
                                </div>
                            </div>

                    <div class="bug-grid">
                        <!-- 待处理列 -->
                        <div class="bug-column">
                            <div class="bug-column-header">
                                <h3 class="bug-column-title">待处理</h3>
                                <span class="bug-column-count">3</span>
                            </div>
                            <div class="bug-list">
                                <div class="bug-card">
                                    <div class="bug-id">BUG-089</div>
                                    <h4 class="bug-title">知识库搜索特殊字符返回空结果</h4>
                                    <p class="bug-description">
                                        当搜索关键词包含@、#、$等特殊字符时，搜索功能返回空结果。
                                        复现率100%。
                                    </p>
                                    <div class="bug-meta">
                                        <span class="bug-priority p1">P1</span>
                                        <span>2025-11-16 22:15</span>
                            </div>
                        </div>

                                <div class="bug-card">
                                    <div class="bug-id">BUG-087</div>
                                    <h4 class="bug-title">移动端对话历史滚动卡顿</h4>
                                    <p class="bug-description">
                                        iOS Safari浏览器下，对话历史页面滚动时出现明显卡顿。
                                        帧率降至30fps以下。
                                    </p>
                                    <div class="bug-meta">
                                        <span class="bug-priority p2">P2</span>
                                        <span>2025-11-15 16:20</span>
                            </div>
                        </div>

                                <div class="bug-card">
                                    <div class="bug-id">BUG-085</div>
                                    <h4 class="bug-title">事件流时间线断点错位</h4>
                                    <p class="bug-description">
                                        当事件卡片高度差异过大时，时间线垂直连接线出现断点。
                                        影响视觉美观度。
                                    </p>
                                    <div class="bug-meta">
                                        <span class="bug-priority p2">P2</span>
                                        <span>2025-11-14 10:30</span>
                                </div>
                            </div>
                            </div>
                        </div>

                        <!-- 处理中列 -->
                        <div class="bug-column">
                            <div class="bug-column-header">
                                <h3 class="bug-column-title">处理中</h3>
                                <span class="bug-column-count">2</span>
                                </div>
                            <div class="bug-list">
                                <div class="bug-card">
                                    <div class="bug-id">BUG-088</div>
                                    <h4 class="bug-title">API响应超时未显示错误提示</h4>
                                    <p class="bug-description">
                                        当API响应时间超过10秒时，页面未显示超时提示，用户体验不佳。
                                        前端工程师正在处理。
                                    </p>
                                    <div class="bug-meta">
                                        <span class="bug-priority p1">P1</span>
                                        <span>2025-11-16 14:00</span>
                            </div>
                            </div>

                                <div class="bug-card">
                                    <div class="bug-id">BUG-084</div>
                                    <h4 class="bug-title">暗色模式下文字对比度不足</h4>
                                    <p class="bug-description">
                                        部分次要文字在暗色模式下对比度低于WCAG AA标准。
                                        UX设计师正在调整色值。
                                    </p>
                                    <div class="bug-meta">
                                        <span class="bug-priority p2">P2</span>
                                        <span>2025-11-13 18:00</span>
                        </div>
                    </div>
                </div>
            </div>

                        <!-- 已解决列 -->
                        <div class="bug-column">
                            <div class="bug-column-header">
                                <h3 class="bug-column-title">已解决</h3>
                                <span class="bug-column-count">5</span>
                </div>
                            <div class="bug-list">
                                <div class="bug-card">
                                    <div class="bug-id">BUG-086</div>
                                    <h4 class="bug-title">Dashboard缓存未清除</h4>
                                    <p class="bug-description">
                                        更新后部分用户看到旧版本UI。已通过强制清除缓存解决。
                                    </p>
                                    <div class="bug-meta">
                                        <span class="bug-priority p0">P0</span>
                                        <span>2025-11-17 17:45</span>
                    </div>
                    </div>

                                <div class="bug-card">
                                    <div class="bug-id">BUG-083</div>
                                    <h4 class="bug-title">Tab切换动画闪烁</h4>
                                    <p class="bug-description">
                                        Tab切换时出现短暂闪烁。已优化transition时序解决。
                                    </p>
                                    <div class="bug-meta">
                                        <span class="bug-priority p2">P2</span>
                                        <span>2025-11-13 12:00</span>
                    </div>
                </div>

                                <div class="bug-card">
                                    <div class="bug-id">BUG-082</div>
                                    <h4 class="bug-title">搜索框placeholder未显示</h4>
                                    <p class="bug-description">
                                        对话历史搜索框placeholder在某些浏览器下不显示。
                                        已修复CSS兼容性问题。
                                    </p>
                                    <div class="bug-meta">
                                        <span class="bug-priority p2">P2</span>
                                        <span>2025-11-12 16:30</span>
                </div>
                                </div>
                            </div>
                            </div>
                            </div>
                            </div>
                        </div>

            <!-- Tab 3: 系统状态 -->
            <div id="status" class="devops-tab-pane">
                <div class="system-status">
                    <div class="status-overview">
                        <div class="status-card">
                            <div class="status-value success">99.98%</div>
                            <div class="status-label">系统在线率</div>
                                </div>
                        <div class="status-card">
                            <div class="status-value">120ms</div>
                            <div class="status-label">平均响应时间</div>
                            </div>
                        <div class="status-card">
                            <div class="status-value success">0.01%</div>
                            <div class="status-label">错误率</div>
                            </div>
                        <div class="status-card">
                            <div class="status-value">1,234</div>
                            <div class="status-label">当前在线用户</div>
                            </div>
                        </div>

                    <h2 class="kb-section-title">服务监控</h2>
                    <div class="service-list">
                        <div class="service-item">
                            <div class="service-info">
                                <div class="service-name">Claude API服务</div>
                                <div class="service-endpoint">https://api.anthropic.com/v1/messages</div>
                                </div>
                            <div class="service-metrics">
                                <div class="service-metric">
                                    <div class="metric-value">98ms</div>
                                    <div class="metric-label">响应时间</div>
                            </div>
                                <div class="service-metric">
                                    <div class="metric-value">99.99%</div>
                                    <div class="metric-label">可用性</div>
                            </div>
                                <div class="service-metric">
                                    <div class="metric-value">0%</div>
                                    <div class="metric-label">错误率</div>
                            </div>
                                <div class="service-status-indicator"></div>
                            </div>
                        </div>

                        <div class="service-item">
                            <div class="service-info">
                                <div class="service-name">Notion API服务</div>
                                <div class="service-endpoint">https://api.notion.com/v1/</div>
                                </div>
                            <div class="service-metrics">
                                <div class="service-metric">
                                    <div class="metric-value">145ms</div>
                                    <div class="metric-label">响应时间</div>
                            </div>
                                <div class="service-metric">
                                    <div class="metric-value">99.95%</div>
                                    <div class="metric-label">可用性</div>
                            </div>
                                <div class="service-metric">
                                    <div class="metric-value">0.02%</div>
                                    <div class="metric-label">错误率</div>
                            </div>
                                <div class="service-status-indicator"></div>
                            </div>
                        </div>

                        <div class="service-item">
                            <div class="service-info">
                                <div class="service-name">知识图谱数据库 (Neo4j)</div>
                                <div class="service-endpoint">bolt://localhost:7687</div>
                                </div>
                            <div class="service-metrics">
                                <div class="service-metric">
                                    <div class="metric-value">52ms</div>
                                    <div class="metric-label">查询时间</div>
                            </div>
                                <div class="service-metric">
                                    <div class="metric-value">100%</div>
                                    <div class="metric-label">可用性</div>
                            </div>
                                <div class="service-metric">
                                    <div class="metric-value">89%</div>
                                    <div class="metric-label">缓存命中</div>
                            </div>
                                <div class="service-status-indicator"></div>
            </div>
        </div>

                        <div class="service-item">
                            <div class="service-info">
                                <div class="service-name">任务数据库 (PostgreSQL)</div>
                                <div class="service-endpoint">postgresql://localhost:5432/taskflow</div>
            </div>
                            <div class="service-metrics">
                                <div class="service-metric">
                                    <div class="metric-value">28ms</div>
                                    <div class="metric-label">查询时间</div>
            </div>
                                <div class="service-metric">
                                    <div class="metric-value">100%</div>
                                    <div class="metric-label">可用性</div>
        </div>
                                <div class="service-metric">
                                    <div class="metric-value">92%</div>
                                    <div class="metric-label">缓存命中</div>
                    </div>
                                <div class="service-status-indicator"></div>
                    </div>
                </div>

                        <div class="service-item">
                            <div class="service-info">
                                <div class="service-name">前端静态资源 (CDN)</div>
                                <div class="service-endpoint">https://cdn.taskflow.com/</div>
                    </div>
                            <div class="service-metrics">
                                <div class="service-metric">
                                    <div class="metric-value">35ms</div>
                                    <div class="metric-label">加载时间</div>
                    </div>
                                <div class="service-metric">
                                    <div class="metric-value">99.98%</div>
                                    <div class="metric-label">可用性</div>
                    </div>
                                <div class="service-metric">
                                    <div class="metric-value">89%</div>
                                    <div class="metric-label">缓存命中</div>
                    </div>
                                <div class="service-status-indicator"></div>
                    </div>
                </div>

                        <div class="service-item">
                            <div class="service-info">
                                <div class="service-name">WebSocket实时通信</div>
                                <div class="service-endpoint">wss://api.taskflow.com/ws</div>
                    </div>
                            <div class="service-metrics">
                                <div class="service-metric">
                                    <div class="metric-value">12ms</div>
                                    <div class="metric-label">延迟</div>
                    </div>
                                <div class="service-metric">
                                    <div class="metric-value">234</div>
                                    <div class="metric-label">连接数</div>
                    </div>
                                <div class="service-metric">
                                    <div class="metric-value">100%</div>
                                    <div class="metric-label">可用性</div>
                    </div>
                                <div class="service-status-indicator"></div>
                    </div>
                    </div>
                </div>
            </div>
        </div>

            <!-- Tab 4: 知识库 -->
            <div id="knowledge" class="devops-tab-pane">
                <div class="knowledge-base">
                    <h2 class="kb-section-title">知识分类</h2>
                    <div class="kb-categories">
                        <div class="kb-category">
                            <h3 class="kb-category-title">环境配置</h3>
                            <p class="kb-category-count">24篇文档</p>
                            <p class="kb-category-description">
                                开发环境、测试环境、生产环境的配置文档，
                                包括数据库连接、API密钥、服务器信息等。
                            </p>
                </div>

                        <div class="kb-category">
                            <h3 class="kb-category-title">依赖库文档</h3>
                            <p class="kb-category-count">18篇文档</p>
                            <p class="kb-category-description">
                                前端依赖、后端依赖、构建工具的版本记录和升级日志。
                                包括npm包、Python库、系统依赖等。
                            </p>
            </div>

                        <div class="kb-category">
                            <h3 class="kb-category-title">问题解决方案</h3>
                            <p class="kb-category-count">52篇文档</p>
                            <p class="kb-category-description">
                                历史Bug的解决方案、常见问题FAQ、
                                性能优化案例、安全漏洞修复记录。
                            </p>
                        </div>

                        <div class="kb-category">
                            <h3 class="kb-category-title">部署流程</h3>
                            <p class="kb-category-count">12篇文档</p>
                            <p class="kb-category-description">
                                CI/CD配置、Docker部署、K8s编排、
                                回滚策略、灰度发布流程等。
                            </p>
                        </div>

                        <div class="kb-category">
                            <h3 class="kb-category-title">监控告警</h3>
                            <p class="kb-category-count">16篇文档</p>
                            <p class="kb-category-description">
                                监控指标定义、告警规则配置、
                                日志分析方法、性能基线标准。
                            </p>
                    </div>

                        <div class="kb-category">
                            <h3 class="kb-category-title">安全认证</h3>
                            <p class="kb-category-count">6篇文档</p>
                            <p class="kb-category-description">
                                API密钥管理、OAuth配置、SSL证书、
                                权限控制、敏感信息加密方案。
                            </p>
                    </div>
                        </div>

                    <div class="kb-recent">
                        <h2 class="kb-section-title">最近更新文档</h2>
                        <div class="kb-list">
                            <div class="kb-item">
                                <div class="kb-item-info">
                                    <div class="kb-item-title">Dashboard v2.0部署手册</div>
                                    <div class="kb-item-meta">环境配置 · 更新于2025-11-17 · 交付工程师AI</div>
                        </div>
                                <button class="kb-item-action">查看文档</button>
                </div>

                            <div class="kb-item">
                                <div class="kb-item-info">
                                    <div class="kb-item-title">缓存清除问题解决方案</div>
                                    <div class="kb-item-meta">问题解决 · 更新于2025-11-17 · 全栈工程师AI</div>
                        </div>
                                <button class="kb-item-action">查看文档</button>
                        </div>

                            <div class="kb-item">
                                <div class="kb-item-info">
                                    <div class="kb-item-title">CDN缓存优化策略</div>
                                    <div class="kb-item-meta">性能优化 · 更新于2025-11-16 · DevOps AI</div>
                    </div>
                                <button class="kb-item-action">查看文档</button>
                    </div>

                            <div class="kb-item">
                                <div class="kb-item-info">
                                    <div class="kb-item-title">Neo4j查询性能优化指南</div>
                                    <div class="kb-item-meta">数据库 · 更新于2025-11-15 · 后端工程师AI</div>
                        </div>
                                <button class="kb-item-action">查看文档</button>
                </div>

                            <div class="kb-item">
                                <div class="kb-item-info">
                                    <div class="kb-item-title">移动端滚动性能优化</div>
                                    <div class="kb-item-meta">问题解决 · 更新于2025-11-15 · 前端工程师AI</div>
                        </div>
                                <button class="kb-item-action">查看文档</button>
                </div>

                            <div class="kb-item">
                                <div class="kb-item-info">
                                    <div class="kb-item-title">API认证密钥管理规范</div>
                                    <div class="kb-item-meta">安全认证 · 更新于2025-11-14 · 架构师AI</div>
                        </div>
                                <button class="kb-item-action">查看文档</button>
                        </div>
                    </div>
                    </div>
                        </div>
                        </div>
                    </div>
                </div>


    <!-- ========== Noah AI代码管家模块 ========== -->
    <div class="code-manager-module version-content" data-version="1">
        <!-- 模块头部 -->
        <div class="module-header">
            <div class="header-row">
                <h1 class="module-title">Noah - AI代码管家</h1>
                <div style="display: flex; align-items: center; gap: 16px;">
                    <div class="status-badge">
                        <span class="status-dot"></span>
                        实时监控中
                    </div>
                    <div style="font-family: var(--font-mono); font-size: var(--text-xs); color: var(--noir-silver); letter-spacing: 0.05em;">
                        "EVERY LINE MATTERS"
                    </div>
                </div>
            </div>

            <!-- 代码统计卡片 -->
            <div class="code-stats-grid">
                <div class="stat-card">
                    <div class="stat-value">3,587</div>
                    <div class="stat-label">总代码行数</div>
                    <div class="stat-change positive">+124 今日</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">47</div>
                    <div class="stat-label">文件总数</div>
                    <div class="stat-change positive">+3 今日</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">8</div>
                    <div class="stat-label">活跃模块</div>
                    <div class="stat-change">无变化</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">2</div>
                    <div class="stat-label">潜在冲突</div>
                    <div class="stat-change negative">需关注</div>
                </div>
            </div>
        </div>

        <!-- Tab导航 -->
        <nav class="tab-navigation">
            <button class="tab-item active" onclick="switchNoahTab(event, 'noah-index')">
                代码索引
                <span class="tab-badge">47</span>
            </button>
            <button class="tab-item" onclick="switchNoahTab(event, 'noah-detail')">
                文件详情
            </button>
            <button class="tab-item" onclick="switchNoahTab(event, 'noah-changelog')">
                变更历史
                <span class="tab-badge">18</span>
            </button>
            <button class="tab-item" onclick="switchNoahTab(event, 'noah-conflicts')">
                冲突检测
                <span class="tab-badge">2</span>
            </button>
            <button class="tab-item" onclick="switchNoahTab(event, 'noah-stats')">
                统计分析
            </button>
        </nav>

        <!-- Tab内容 -->
        <div class="tab-content-wrapper">
            <!-- 代码索引 -->
            <div id="noah-index" class="tab-pane active">
                <div class="search-header">
                    <div class="search-box-wrapper">
                        <input 
                            type="text" 
                            class="search-box" 
                            placeholder="搜索文件名、路径、标签... (支持正则表达式)"
                        >
                        <span class="search-icon">⌘K</span>
                    </div>
                    <div class="search-filters">
                        <button class="filter-chip active">全部</button>
                        <button class="filter-chip">.py</button>
                        <button class="filter-chip">.js</button>
                        <button class="filter-chip">.html</button>
                        <button class="filter-chip">.css</button>
                        <button class="filter-chip">核心</button>
                        <button class="filter-chip">工具</button>
                        <button class="filter-chip">配置</button>
                    </div>
                </div>

                <div class="code-list">
                    <!-- 目录：核心模块 -->
                    <div class="code-directory">
                        <div class="directory-header">
                            <span class="directory-icon">▾</span>
                            <span class="directory-path">/src/core/</span>
                            <span class="directory-count">12 files</span>
                        </div>

                        <div class="code-item">
                            <div class="code-item-header">
                                <span class="code-filename">architect_service.py</span>
                                <span class="code-extension">PY</span>
                                <span class="code-lines">287 lines</span>
                            </div>
                            <div class="code-item-meta">
                                <span>最后修改: 2025-11-19 14:30</span>
                                <span>ID: CORE-001</span>
                                <span>架构师服务主入口</span>
                            </div>
                            <div class="code-tags">
                                <span class="code-tag">核心</span>
                                <span class="code-tag">服务层</span>
                                <span class="code-tag">已索引</span>
                            </div>
                        </div>

                        <div class="code-item">
                            <div class="code-item-header">
                                <span class="code-filename">knowledge_manager.py</span>
                                <span class="code-extension">PY</span>
                                <span class="code-lines">342 lines</span>
                            </div>
                            <div class="code-item-meta">
                                <span>最后修改: 2025-11-19 11:20</span>
                                <span>ID: CORE-002</span>
                                <span>知识库管理器</span>
                            </div>
                            <div class="code-tags">
                                <span class="code-tag">核心</span>
                                <span class="code-tag">数据层</span>
                                <span class="code-tag">已索引</span>
                            </div>
                        </div>

                        <div class="code-item">
                            <div class="code-item-header">
                                <span class="code-filename">task_board.py</span>
                                <span class="code-extension">PY</span>
                                <span class="code-lines">198 lines</span>
                            </div>
                            <div class="code-item-meta">
                                <span>最后修改: 2025-11-18 16:45</span>
                                <span>ID: CORE-003</span>
                                <span>任务看板核心逻辑</span>
                            </div>
                            <div class="code-tags">
                                <span class="code-tag">核心</span>
                                <span class="code-tag">业务层</span>
                                <span class="code-tag">已索引</span>
                            </div>
                        </div>
                    </div>

                    <!-- 目录：API层 -->
                    <div class="code-directory">
                        <div class="directory-header">
                            <span class="directory-icon">▾</span>
                            <span class="directory-path">/src/api/</span>
                            <span class="directory-count">8 files</span>
                        </div>

                        <div class="code-item">
                            <div class="code-item-header">
                                <span class="code-filename">claude_api.py</span>
                                <span class="code-extension">PY</span>
                                <span class="code-lines">156 lines</span>
                            </div>
                            <div class="code-item-meta">
                                <span>最后修改: 2025-11-19 09:15</span>
                                <span>ID: API-001</span>
                                <span>Claude API集成</span>
                            </div>
                            <div class="code-tags">
                                <span class="code-tag">API</span>
                                <span class="code-tag">集成层</span>
                                <span class="code-tag">已索引</span>
                            </div>
                        </div>

                        <div class="code-item">
                            <div class="code-item-header">
                                <span class="code-filename">notion_api.py</span>
                                <span class="code-extension">PY</span>
                                <span class="code-lines">223 lines</span>
                            </div>
                            <div class="code-item-meta">
                                <span>最后修改: 2025-11-18 20:30</span>
                                <span>ID: API-002</span>
                                <span>Notion API集成</span>
                            </div>
                            <div class="code-tags">
                                <span class="code-tag">API</span>
                                <span class="code-tag">集成层</span>
                                <span class="code-tag">已索引</span>
                            </div>
                        </div>
                    </div>

                    <!-- 目录：前端组件 -->
                    <div class="code-directory">
                        <div class="directory-header">
                            <span class="directory-icon">▾</span>
                            <span class="directory-path">/src/components/</span>
                            <span class="directory-count">15 files</span>
                        </div>

                        <div class="code-item">
                            <div class="code-item-header">
                                <span class="code-filename">Dashboard.jsx</span>
                                <span class="code-extension">JSX</span>
                                <span class="code-lines">412 lines</span>
                            </div>
                            <div class="code-item-meta">
                                <span>最后修改: 2025-11-19 15:00</span>
                                <span>ID: UI-001</span>
                                <span>主仪表盘组件</span>
                            </div>
                            <div class="code-tags">
                                <span class="code-tag">前端</span>
                                <span class="code-tag">React</span>
                                <span class="code-tag">已索引</span>
                            </div>
                        </div>

                        <div class="code-item">
                            <div class="code-item-header">
                                <span class="code-filename">TaskCard.jsx</span>
                                <span class="code-extension">JSX</span>
                                <span class="code-lines">178 lines</span>
                            </div>
                            <div class="code-item-meta">
                                <span>最后修改: 2025-11-19 10:20</span>
                                <span>ID: UI-002</span>
                                <span>任务卡片组件</span>
                            </div>
                            <div class="code-tags">
                                <span class="code-tag">前端</span>
                                <span class="code-tag">React</span>
                                <span class="code-tag">已索引</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 文件详情 -->
            <div id="noah-detail" class="tab-pane">
                <div class="code-detail-view">
                    <aside class="code-detail-sidebar">
                        <div class="detail-section">
                            <h3 class="detail-section-title">文件信息</h3>
                            <div class="detail-info-grid">
                                <div class="detail-info-item">
                                    <div class="detail-info-label">文件名</div>
                                    <div class="detail-info-value">architect_service.py</div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">文件ID</div>
                                    <div class="detail-info-value">CORE-001</div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">路径</div>
                                    <div class="detail-info-value">/src/core/architect_service.py</div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">代码行数</div>
                                    <div class="detail-info-value">287</div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">文件大小</div>
                                    <div class="detail-info-value">8.4 KB</div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">创建时间</div>
                                    <div class="detail-info-value">2025-11-17 10:00</div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">最后修改</div>
                                    <div class="detail-info-value">2025-11-19 14:30</div>
                                </div>
                            </div>
                        </div>

                        <div class="detail-section">
                            <h3 class="detail-section-title">索引标签</h3>
                            <div class="code-tags">
                                <span class="code-tag">核心</span>
                                <span class="code-tag">服务层</span>
                                <span class="code-tag">已索引</span>
                                <span class="code-tag">Python</span>
                            </div>
                        </div>

                        <div class="detail-section">
                            <h3 class="detail-section-title">依赖关系</h3>
                            <div class="detail-info-grid">
                                <div class="detail-info-item">
                                    <div class="detail-info-label">导入自</div>
                                    <div class="detail-info-value">
                                        knowledge_manager.py<br>
                                        task_board.py<br>
                                        claude_api.py
                                    </div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">被导入</div>
                                    <div class="detail-info-value">
                                        main.py<br>
                                        api_router.py
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="detail-section">
                            <h3 class="detail-section-title">变更记录</h3>
                            <div class="detail-info-grid">
                                <div class="detail-info-item">
                                    <div class="detail-info-label">修改次数</div>
                                    <div class="detail-info-value">12次</div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">最近变更</div>
                                    <div class="detail-info-value">新增process_command方法</div>
                                </div>
                            </div>
                        </div>
                    </aside>

                    <main class="code-detail-main">
                        <h2 style="font-size: var(--text-xl); font-weight: var(--weight-semibold); color: var(--noir-ink); margin-bottom: 24px;">
                            代码预览
                        </h2>
                        <div class="code-preview">
                            <div class="code-line">
                                <span class="line-number">1</span>
                                <span class="line-content">"""</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">2</span>
                                <span class="line-content">架构师服务主入口</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">3</span>
                                <span class="line-content">负责协调各个子系统的运作</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">4</span>
                                <span class="line-content">"""</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">5</span>
                                <span class="line-content"></span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">6</span>
                                <span class="line-content">from typing import Dict, List, Optional</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">7</span>
                                <span class="line-content">from datetime import datetime</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">8</span>
                                <span class="line-content"></span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">9</span>
                                <span class="line-content">from .knowledge_manager import KnowledgeManager</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">10</span>
                                <span class="line-content">from .task_board import TaskBoard</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">11</span>
                                <span class="line-content">from ..api.claude_api import ClaudeAPI</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">12</span>
                                <span class="line-content"></span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">13</span>
                                <span class="line-content">class ArchitectService:</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">14</span>
                                <span class="line-content">    """架构师服务主类"""</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">15</span>
                                <span class="line-content">    </span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">16</span>
                                <span class="line-content">    def __init__(self):</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">17</span>
                                <span class="line-content">        self.knowledge = KnowledgeManager()</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">18</span>
                                <span class="line-content">        self.task_board = TaskBoard()</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">19</span>
                                <span class="line-content">        self.claude = ClaudeAPI()</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">20</span>
                                <span class="line-content">        </span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">21</span>
                                <span class="line-content">    def process_command(self, command: str) -> Dict:</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">22</span>
                                <span class="line-content">        """处理用户命令"""</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">23</span>
                                <span class="line-content">        # 实现细节...</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">24</span>
                                <span class="line-content">        pass</span>
                            </div>
                        </div>
                    
        <!-- ========== 全栈工程师工作台（完整版） ========== -->

        <div class="fullstack-complete-module version-content" data-version="1">
            <!-- 模块头部 -->
            <div class="module-header">
                <div class="header-row">
                    <h1 class="module-title">全栈工程师工作台</h1>
                    <span class="status-badge">
                        <span class="status-dot"></span>
                        在线 · 3人并行
                    </span>
                </div>

                <div class="engineer-info">
                    <div class="info-section">
                        <div class="engineer-avatar">FS</div>
                        <div class="engineer-details">
                            <div class="engineer-name">Fullstack Engineer AI</div>
                            <div class="engineer-meta">Expert Level · 接手: 2025-11-18 14:00 · 工作时长: 2天6小时</div>
                        </div>
                    </div>
                    <div class="quick-stats">
                        <div class="stat-item">
                            <div class="stat-value">156K</div>
                            <div class="stat-label">Token已用</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">v3.1</div>
                            <div class="stat-label">提示词</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">67</div>
                            <div class="stat-label">事件</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab导航（精简到5个） -->
            <div class="tab-navigation">
                <button class="tab-item active" onclick="switchFullstackCompleteTab('fc-events')">
                    事件流
                    <span class="tab-badge">67</span>
                </button>
                <button class="tab-item" onclick="switchFullstackCompleteTab('fc-taskboard')">
                    任务看板
                    <span class="tab-badge">43</span>
                </button>
                <button class="tab-item" onclick="switchFullstackCompleteTab('fc-reviews')">
                    代码审查
                    <span class="tab-badge">15</span>
                </button>
                <button class="tab-item" onclick="switchFullstackCompleteTab('fc-docs')">
                    技术文档
                    <span class="tab-badge">68</span>
                </button>
                <button class="tab-item" onclick="switchFullstackCompleteTab('fc-conversations')">
                    对话历史
                    <span class="tab-badge">12</span>
                </button>
            </div>

            <!-- Tab内容 -->
            <div class="tab-content-wrapper">
                <!-- Tab 1: 事件流 -->
                <div id="fc-events" class="tab-pane active">
                    <div class="event-timeline">
                        <div class="timeline-filters">
                            <button class="filter-chip active">全部</button>
                            <button class="filter-chip">今天</button>
                            <button class="filter-chip">本周</button>
                            <button class="filter-chip">任务</button>
                            <button class="filter-chip">代码</button>
                            <button class="filter-chip">部署</button>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="event-card">
                                <div class="event-header">
                                    <div>
                                        <div class="event-title">任务完成: Dashboard响应式优化</div>
                                        <div class="event-meta">Fullstack Engineer AI · TASK-FE-045</div>
                                    </div>
                                    <div class="event-time">2025-11-19 16:30</div>
                                </div>
                                <div class="event-description">
                                    完成了Dashboard的完整响应式优化，支持1920/1440/1280/768/375五个断点。
                                    实现了Flexbox+Grid混合布局，移动端优先策略，触摸手势优化。
                                </div>
                                <div class="event-tags">
                                    <span class="event-tag">前端开发</span>
                                    <span class="event-tag">响应式</span>
                                    <span class="event-tag">已完成</span>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="event-card">
                                <div class="event-header">
                                    <div>
                                        <div class="event-title">代码审查通过: API集成模块</div>
                                        <div class="event-meta">架构师审查 · REVIEW-014</div>
                                    </div>
                                    <div class="event-time">2025-11-19 14:20</div>
                                </div>
                                <div class="event-description">
                                    架构师审查通过，代码质量优秀。成功集成了Claude API和Notion API，
                                    包含完整的错误处理、重试机制和日志记录。已合并到主分支。
                                </div>
                                <div class="event-tags">
                                    <span class="event-tag">代码审查</span>
                                    <span class="event-tag">API集成</span>
                                    <span class="event-tag">已通过</span>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="event-card">
                                <div class="event-header">
                                    <div>
                                        <div class="event-title">接收任务: 实现记忆管理Tab</div>
                                        <div class="event-meta">架构师分配 → Fullstack Engineer AI</div>
                                    </div>
                                    <div class="event-time">2025-11-19 10:00</div>
                                </div>
                                <div class="event-description">
                                    架构师分配了新任务：实现Dashboard项目记忆Tab。包括记忆增删改查、
                                    分类管理、搜索功能。预估3小时，可并行开发。
                                </div>
                                <div class="event-tags">
                                    <span class="event-tag">任务分配</span>
                                    <span class="event-tag">可并行</span>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="event-card">
                                <div class="event-header">
                                    <div>
                                        <div class="event-title">部署成功: Dashboard v2.1.0</div>
                                        <div class="event-meta">CI/CD Pipeline · DEPLOY-028</div>
                                    </div>
                                    <div class="event-time">2025-11-18 18:45</div>
                                </div>
                                <div class="event-description">
                                    成功部署到生产环境。通过了所有自动化测试（单元测试92%覆盖率，
                                    E2E测试18个场景全通过）。Lighthouse性能评分: 98/100。
                                </div>
                                <div class="event-tags">
                                    <span class="event-tag">部署</span>
                                    <span class="event-tag">生产环境</span>
                                    <span class="event-tag">成功</span>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="event-card">
                                <div class="event-header">
                                    <div>
                                        <div class="event-title">Bug修复: 知识图谱渲染问题</div>
                                        <div class="event-meta">Fullstack Engineer AI · BUG-012</div>
                                    </div>
                                    <div class="event-time">2025-11-18 14:30</div>
                                </div>
                                <div class="event-description">
                                    修复了知识图谱在大数据量下的渲染卡顿问题。采用虚拟滚动+WebWorker
                                    方案，渲染性能提升80%，支持10000+节点流畅显示。
                                </div>
                                <div class="event-tags">
                                    <span class="event-tag">Bug修复</span>
                                    <span class="event-tag">性能优化</span>
                                    <span class="event-tag">已完成</span>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="event-card">
                                <div class="event-header">
                                    <div>
                                        <div class="event-title">数据库优化: Neo4j查询性能提升</div>
                                        <div class="event-meta">Fullstack Engineer AI · OPT-008</div>
                                    </div>
                                    <div class="event-time">2025-11-17 16:20</div>
                                </div>
                                <div class="event-description">
                                    优化了Neo4j的Cypher查询语句，添加了合适的索引。复杂关系查询
                                    从2.5s优化到0.3s，提升8倍性能。同时优化了连接池配置。
                                </div>
                                <div class="event-tags">
                                    <span class="event-tag">数据库</span>
                                    <span class="event-tag">性能优化</span>
                                    <span class="event-tag">Neo4j</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: 任务看板 -->
                <div id="fc-taskboard" class="tab-pane">
                    <div class="task-board-container">
                        <div class="task-board-header">
                            <div class="filter-bar">
                                <div class="filter-chips">
                                    <button class="filter-chip active">全部</button>
                                    <button class="filter-chip">P0</button>
                                    <button class="filter-chip">P1</button>
                                    <button class="filter-chip">可并行</button>
                                    <button class="filter-chip">前端</button>
                                    <button class="filter-chip">后端</button>
                                </div>
                                <select class="sort-select">
                                    <option>按优先级排序</option>
                                    <option>按时间排序</option>
                                    <option>按复杂度排序</option>
                                </select>
                            </div>
                        </div>

                        <div class="kanban-board">
                            <!-- 待处理列 -->
                            <div class="kanban-column">
                                <div class="column-header">
                                    <div class="column-title">
                                        <span>待处理</span>
                                        <span class="column-count">18</span>
                                    </div>
                                </div>
                                <div class="column-cards">
                                    <div class="task-card">
                                        <div class="task-card-header">
                                            <span class="task-id">TASK-UI-028</span>
                                            <h3 class="task-title">实现记忆管理Tab</h3>
                                            <span class="task-status-badge parallel">可并行</span>
                                        </div>
                                        <div class="task-description">
                                            实现Dashboard项目记忆Tab，包括记忆增删改查、分类管理、搜索功能。
                                            需要前后端联调，使用Neo4j存储。
                                        </div>
                                        <div class="task-meta">
                                            <span>预估: <span class="task-estimate">3小时</span></span>
                                            <span class="priority-badge p1">P1</span>
                                        </div>
                                        <div class="task-assignee">
                                            <div class="assignee-avatar">FS</div>
                                            <span>待领取</span>
                                        </div>
                                        <div class="task-actions">
                                            <button class="task-action-button primary" onclick="copyFullstackPrompt(event)">复制提示词</button>
                                            <button class="task-action-button">查看详情</button>
                                        </div>
                                    </div>

                                    <div class="task-card">
                                        <div class="task-card-header">
                                            <span class="task-id">TASK-BE-015</span>
                                            <h3 class="task-title">实现API限流中间件</h3>
                                        </div>
                                        <div class="task-description">
                                            基于Redis实现API限流中间件，支持IP级别和用户级别限流。
                                            采用令牌桶算法，配置化限流规则。
                                        </div>
                                        <div class="task-meta">
                                            <span>预估: <span class="task-estimate">4小时</span></span>
                                            <span class="priority-badge p2">P2</span>
                                        </div>
                                        <div class="task-assignee">
                                            <div class="assignee-avatar">FS</div>
                                            <span>待领取</span>
                                        </div>
                                        <div class="task-actions">
                                            <button class="task-action-button primary" onclick="copyFullstackPrompt(event)">复制提示词</button>
                                            <button class="task-action-button">查看详情</button>
                                        </div>
                                    </div>

                                    <div class="task-card">
                                        <div class="task-card-header">
                                            <span class="task-id">TASK-UI-029</span>
                                            <h3 class="task-title">优化首屏加载性能</h3>
                                            <span class="task-status-badge parallel">可并行</span>
                                        </div>
                                        <div class="task-description">
                                            优化首屏加载性能，目标LCP&lt;2.5s。实现代码分割、懒加载、
                                            预加载关键资源、图片优化。
                                        </div>
                                        <div class="task-meta">
                                            <span>预估: <span class="task-estimate">5小时</span></span>
                                            <span class="priority-badge p1">P1</span>
                                        </div>
                                        <div class="task-assignee">
                                            <div class="assignee-avatar">FS</div>
                                            <span>待领取</span>
                                        </div>
                                        <div class="task-actions">
                                            <button class="task-action-button primary" onclick="copyFullstackPrompt(event)">复制提示词</button>
                                            <button class="task-action-button">查看详情</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 进行中列 -->
                            <div class="kanban-column">
                                <div class="column-header">
                                    <div class="column-title">
                                        <span>进行中</span>
                                        <span class="column-count">5</span>
                                    </div>
                                </div>
                                <div class="column-cards">
                                    <div class="task-card">
                                        <div class="task-card-header">
                                            <span class="task-id">TASK-BE-012</span>
                                            <h3 class="task-title">Claude API集成</h3>
                                        </div>
                                        <div class="task-description">
                                            集成Claude API实现对话功能。包括流式响应、错误处理、
                                            Token统计、会话管理。已完成60%。
                                        </div>
                                        <div class="task-meta">
                                            <span>已用: <span class="task-estimate">1.5天</span></span>
                                            <span class="priority-badge p0">P0</span>
                                        </div>
                                        <div class="task-assignee">
                                            <div class="assignee-avatar">FS</div>
                                            <span>进行中</span>
                                        </div>
                                        <div class="task-actions">
                                            <button class="task-action-button primary">提交审查</button>
                                            <button class="task-action-button">查看详情</button>
                                        </div>
                                    </div>

                                    <div class="task-card">
                                        <div class="task-card-header">
                                            <span class="task-id">TASK-UI-025</span>
                                            <h3 class="task-title">知识图谱可视化组件</h3>
                                        </div>
                                        <div class="task-description">
                                            基于D3.js实现知识图谱可视化。支持力导向布局、缩放平移、
                                            节点搜索、关系筛选。已完成布局算法。
                                        </div>
                                        <div class="task-meta">
                                            <span>已用: <span class="task-estimate">8小时</span></span>
                                            <span class="priority-badge p1">P1</span>
                                        </div>
                                        <div class="task-assignee">
                                            <div class="assignee-avatar">FS</div>
                                            <span>进行中</span>
                                        </div>
                                        <div class="task-actions">
                                            <button class="task-action-button primary">继续开发</button>
                                            <button class="task-action-button">查看详情</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 已完成列 -->
                            <div class="kanban-column">
                                <div class="column-header">
                                    <div class="column-title">
                                        <span>已完成</span>
                                        <span class="column-count">20</span>
                                    </div>
                                </div>
                                <div class="column-cards">
                                    <div class="task-card">
                                        <div class="task-card-header">
                                            <span class="task-id">TASK-UI-024</span>
                                            <h3 class="task-title">Dashboard响应式优化</h3>
                                            <span class="task-status-badge">✓ 已完成</span>
                                        </div>
                                        <div class="task-description">
                                            完成了Dashboard的完整响应式优化，支持5个断点。
                                            已通过所有浏览器兼容性测试。
                                        </div>
                                        <div class="task-meta">
                                            <span>用时: <span class="task-estimate">6小时</span></span>
                                            <span class="priority-badge p1">P1</span>
                                        </div>
                                        <div class="task-assignee">
                                            <div class="assignee-avatar">FS</div>
                                            <span>2025-11-19</span>
                                        </div>
                                        <div class="task-actions">
                                            <button class="task-action-button primary">查看完成报告</button>
                                            <button class="task-action-button">查看详情</button>
                                        </div>
                                    </div>

                                    <div class="task-card">
                                        <div class="task-card-header">
                                            <span class="task-id">TASK-BE-011</span>
                                            <h3 class="task-title">用户认证模块</h3>
                                            <span class="task-status-badge">✓ 已完成</span>
                                        </div>
                                        <div class="task-description">
                                            实现JWT认证、权限管理、会话管理。支持多端登录、
                                            自动续期、安全退出。代码审查已通过。
                                        </div>
                                        <div class="task-meta">
                                            <span>用时: <span class="task-estimate">2天</span></span>
                                            <span class="priority-badge p0">P0</span>
                                        </div>
                                        <div class="task-assignee">
                                            <div class="assignee-avatar">FS</div>
                                            <span>2025-11-18</span>
                                        </div>
                                        <div class="task-actions">
                                            <button class="task-action-button primary">查看完成报告</button>
                                            <button class="task-action-button">查看详情</button>
                                        </div>
                                    </div>

                                    <div class="task-card">
                                        <div class="task-card-header">
                                            <span class="task-id">TASK-DB-008</span>
                                            <h3 class="task-title">Neo4j数据库设计</h3>
                                            <span class="task-status-badge">✓ 已完成</span>
                                        </div>
                                        <div class="task-description">
                                            完成知识图谱数据库设计。定义了节点类型、关系类型、
                                            索引策略。性能测试通过。
                                        </div>
                                        <div class="task-meta">
                                            <span>用时: <span class="task-estimate">1.5天</span></span>
                                            <span class="priority-badge p1">P1</span>
                                        </div>
                                        <div class="task-assignee">
                                            <div class="assignee-avatar">FS</div>
                                            <span>2025-11-17</span>
                                        </div>
                                        <div class="task-actions">
                                            <button class="task-action-button primary">查看完成报告</button>
                                            <button class="task-action-button">查看详情</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 3: 代码审查 -->
                <div id="fc-reviews" class="tab-pane">
                    <div class="code-review-container">
                        <div class="code-review-timeline">
                            <div class="review-filters">
                                <button class="filter-chip active">全部</button>
                                <button class="filter-chip">待审查</button>
                                <button class="filter-chip">已通过</button>
                                <button class="filter-chip">需修改</button>
                            </div>

                            <div class="review-item">
                                <div class="review-marker pending"></div>
                                <div class="review-card">
                                    <div class="review-card-header">
                                        <h3 class="review-title">REVIEW-015 | Dashboard响应式代码审查</h3>
                                        <div class="review-meta">
                                            <span>2025-11-19 17:00</span>
                                            <span class="review-status pending">审查中</span>
                                        </div>
                                    </div>

                                    <div class="review-content">
                                        <div class="content-label">审查内容:</div>
                                        <div class="content-list">
                                            <div class="content-item">12个React组件响应式改造</div>
                                            <div class="content-item">CSS Grid + Flexbox混合布局</div>
                                            <div class="content-item">5个断点断点适配</div>
                                            <div class="content-item">触摸手势优化</div>
                                            <div class="content-item">测试覆盖率: 88%</div>
                                        </div>
                                    </div>

                                    <div class="review-comment">
                                        <div class="content-label">审查意见:</div>
                                        代码结构清晰，响应式实现优秀。建议优化媒体查询的组织方式，
                                        可以考虑使用CSS变量统一管理断点值。性能测试结果良好。
                                    </div>

                                    <div class="review-actions">
                                        <button class="review-action-button" disabled style="cursor: not-allowed; opacity: 0.6;">等待架构师审查...</button>
                                    </div>
                                </div>
                            </div>

                            <div class="review-item">
                                <div class="review-marker" style="background: var(--noir-graphite);"></div>
                                <div class="review-card">
                                    <div class="review-card-header">
                                        <h3 class="review-title">REVIEW-014-FIX | API错误处理优化</h3>
                                        <div class="review-meta">
                                            <span>2025-11-19 15:30</span>
                                            <span class="review-status" style="background: var(--noir-graphite); color: var(--blanc-pure); border-color: var(--noir-graphite);">需修改</span>
                                        </div>
                                    </div>

                                    <div class="review-content">
                                        <div class="content-label">审查内容:</div>
                                        <div class="content-list">
                                            <div class="content-item">API错误处理逻辑</div>
                                            <div class="content-item">重试机制实现</div>
                                            <div class="content-item">错误日志记录</div>
                                        </div>
                                    </div>

                                    <div class="review-comment">
                                        <div class="content-label">审查意见:</div>
                                        发现2个问题需要修改：<br>
                                        1. 重试机制缺少指数退避策略，建议使用exponential backoff<br>
                                        2. 错误日志缺少关键上下文信息（用户ID、请求ID）<br>
                                        已自动生成修改任务 TASK-FIX-089，请查看任务看板。
                                    </div>

                                    <div class="review-actions">
                                        <button class="review-action-button" style="background: var(--noir-graphite); color: var(--blanc-pure); border-color: var(--noir-graphite); cursor: default;" disabled>✗ 需修改 · 已生成修改任务</button>
                                    </div>
                                </div>
                            </div>

                            <div class="review-item">
                                <div class="review-marker approved"></div>
                                <div class="review-card">
                                    <div class="review-card-header">
                                        <h3 class="review-title">REVIEW-014 | API集成模块审查</h3>
                                        <div class="review-meta">
                                            <span>2025-11-19 14:20</span>
                                            <span class="review-status approved">已通过</span>
                                        </div>
                                    </div>

                                    <div class="review-content">
                                        <div class="content-label">审查内容:</div>
                                        <div class="content-list">
                                            <div class="content-item">Claude API集成（流式响应）</div>
                                            <div class="content-item">Notion API集成（CRUD操作）</div>
                                            <div class="content-item">错误处理与重试机制</div>
                                            <div class="content-item">API限流与缓存策略</div>
                                            <div class="content-item">完整的单元测试</div>
                                        </div>
                                    </div>

                                    <div class="review-comment">
                                        <div class="content-label">审查意见:</div>
                                        代码质量优秀。错误处理完善，包含了重试机制和降级策略。
                                        日志记录规范。单元测试覆盖率92%。已合并到主分支。
                                    </div>

                                    <div class="review-actions">
                                        <button class="review-action-button approve" disabled style="cursor: default;">✓ 审查通过</button>
                                    </div>
                                </div>
                            </div>

                            <div class="review-item">
                                <div class="review-marker approved"></div>
                                <div class="review-card">
                                    <div class="review-card-header">
                                        <h3 class="review-title">REVIEW-013 | 用户认证模块审查</h3>
                                        <div class="review-meta">
                                            <span>2025-11-18 16:45</span>
                                            <span class="review-status approved">已通过</span>
                                        </div>
                                    </div>

                                    <div class="review-content">
                                        <div class="content-label">审查内容:</div>
                                        <div class="content-list">
                                            <div class="content-item">JWT认证实现</div>
                                            <div class="content-item">权限管理（RBAC）</div>
                                            <div class="content-item">会话管理与自动续期</div>
                                            <div class="content-item">密码加密与安全策略</div>
                                            <div class="content-item">安全测试完成</div>
                                        </div>
                                    </div>

                                    <div class="review-comment">
                                        <div class="content-label">审查意见:</div>
                                        安全实现规范，符合OWASP最佳实践。Token刷新机制设计合理。
                                        建议补充API文档说明认证流程。整体质量优秀，通过审查。
                                    </div>

                                    <div class="review-actions">
                                        <button class="review-action-button approve" disabled style="cursor: default;">✓ 审查通过</button>
                                    </div>
                                </div>
                            </div>

                            <div class="review-item">
                                <div class="review-marker approved"></div>
                                <div class="review-card">
                                    <div class="review-card-header">
                                        <h3 class="review-title">REVIEW-012 | Neo4j数据库设计审查</h3>
                                        <div class="review-meta">
                                            <span>2025-11-17 18:30</span>
                                            <span class="review-status approved">已通过</span>
                                        </div>
                                    </div>

                                    <div class="review-content">
                                        <div class="content-label">审查内容:</div>
                                        <div class="content-list">
                                            <div class="content-item">节点类型定义（8种）</div>
                                            <div class="content-item">关系类型定义（15种）</div>
                                            <div class="content-item">索引策略设计</div>
                                            <div class="content-item">Cypher查询优化</div>
                                            <div class="content-item">性能测试报告</div>
                                        </div>
                                    </div>

                                    <div class="review-comment">
                                        <div class="content-label">审查意见:</div>
                                        图数据库设计合理，充分利用了Neo4j的图特性。索引设计得当，
                                        查询性能优秀。关系建模符合业务需求。可以进入实现阶段。
                                    </div>

                                    <div class="review-actions">
                                        <button class="review-action-button approve" disabled style="cursor: default;">✓ 审查通过</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 4: 技术文档 -->
                <div id="fc-docs" class="tab-pane">
                    <div class="docs-container">
                        <div class="docs-sidebar">
                            <div class="docs-search">
                                <input type="text" class="search-input" placeholder="搜索文档...">
                            </div>
                            <div class="docs-categories">
                                <div class="category-group">
                                    <div class="category-header" onclick="toggleFullstackCategory(event)">前端开发</div>
                                    <div class="category-items active">
                                        <div class="doc-item active" onclick="selectFullstackDoc(event)">React组件开发规范</div>
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">CSS架构与命名约定</div>
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">状态管理最佳实践</div>
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">性能优化指南</div>
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">响应式设计规范</div>
                                    </div>
                                </div>
                                <div class="category-group">
                                    <div class="category-header" onclick="toggleFullstackCategory(event)">后端开发</div>
                                    <div class="category-items">
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">FastAPI项目结构</div>
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">RESTful API设计</div>
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">异步编程实践</div>
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">错误处理策略</div>
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">日志规范</div>
                                    </div>
                                </div>
                                <div class="category-group">
                                    <div class="category-header" onclick="toggleFullstackCategory(event)">数据库</div>
                                    <div class="category-items">
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">PostgreSQL设计规范</div>
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">Neo4j图数据库实践</div>
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">Redis缓存策略</div>
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">数据库迁移管理</div>
                                    </div>
                                </div>
                                <div class="category-group">
                                    <div class="category-header" onclick="toggleFullstackCategory(event)">DevOps</div>
                                    <div class="category-items">
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">Docker容器化部署</div>
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">CI/CD流程配置</div>
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">监控与日志系统</div>
                                        <div class="doc-item" onclick="selectFullstackDoc(event)">生产环境运维</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="docs-content">
                            <div class="doc-header">
                                <h1 class="doc-title">React组件开发规范</h1>
                                <div class="doc-meta">
                                    <span>分类: 前端开发</span>
                                    <span>作者: Fullstack Engineer AI</span>
                                    <span>更新: 2025-11-19</span>
                                    <span>字数: 3,247</span>
                                </div>
                            </div>

                            <div class="doc-body">
                                <div class="doc-section">
                                    <h2 class="doc-section-title">1. 组件设计原则</h2>
                                    <div class="doc-section-content">
                                        <p><strong>单一职责原则</strong>：每个组件应该只做一件事。如果组件功能过于复杂，应该拆分成更小的子组件。</p>
                                    
                                        <p><strong>组合优于继承</strong>：React推荐使用组合而非继承来实现代码复用。通过Props和Children实现组件组合。</p>
                                    
                                        <p><strong>Props类型定义</strong>：使用TypeScript为所有Props定义明确的类型，提高代码可维护性和IDE智能提示。</p>
                                    </div>
                                </div>

                                <div class="doc-section">
                                    <h2 class="doc-section-title">2. 组件文件结构</h2>
                                    <div class="doc-section-content">
                                        <p>推荐的组件目录结构：</p>
                                    </div>
                                    <pre class="doc-code-block">src/
    ├── components/
    │   ├── Button/
    │   │   ├── Button.tsx          # 组件主文件
    │   │   ├── Button.test.tsx     # 单元测试
    │   │   ├── Button.stories.tsx  # Storybook故事
    │   │   ├── Button.module.css   # 样式文件
    │   │   └── index.ts            # 导出文件
    │   └── ...
    └── ...</pre>
                                </div>

                                <div class="doc-section">
                                    <h2 class="doc-section-title">3. 组件命名规范</h2>
                                    <div class="doc-section-content">
                                        <p><strong>文件命名</strong>：使用PascalCase命名，如 <code>UserProfile.tsx</code></p>
                                    
                                        <p><strong>组件命名</strong>：与文件名保持一致，使用PascalCase</p>
                                    
                                        <p><strong>Props接口命名</strong>：组件名 + Props，如 <code>UserProfileProps</code></p>
                                    
                                        <p><strong>事件处理函数</strong>：使用handle前缀，如 <code>handleClick</code></p>
                                    </div>
                                </div>

                                <div class="doc-section">
                                    <h2 class="doc-section-title">4. Props设计最佳实践</h2>
                                    <div class="doc-section-content">
                                        <p><strong>必填与可选</strong>：明确区分必填和可选Props，为可选Props提供合理的默认值。</p>
                                    
                                        <p><strong>避免过多Props</strong>：如果组件Props超过5-6个，考虑拆分组件或使用对象传递。</p>
                                    
                                        <p><strong>Props验证</strong>：在开发环境使用PropTypes或TypeScript进行Props验证。</p>
                                    </div>
                                    <pre class="doc-code-block">interface ButtonProps {
      variant: 'primary' | 'secondary' | 'ghost';
      size?: 'small' | 'medium' | 'large';
      disabled?: boolean;
      onClick?: () => void;
      children: React.ReactNode;
    }

    const Button: React.FC<ButtonProps> = ({
      variant,
      size = 'medium',
      disabled = false,
      onClick,
      children
    }) => {
      // 组件实现
    };</pre>
                                </div>

                                <div class="doc-section">
                                    <h2 class="doc-section-title">5. Hooks使用规范</h2>
                                    <div class="doc-section-content">
                                        <p><strong>自定义Hooks</strong>：将复杂的状态逻辑提取为自定义Hooks，提高代码复用性。</p>
                                    
                                        <p><strong>依赖数组</strong>：准确声明useEffect和useCallback的依赖数组，避免不必要的重渲染。</p>
                                    
                                        <p><strong>命名约定</strong>：自定义Hooks必须以use开头，如 <code>useAuth</code>、<code>useFetch</code></p>
                                    </div>
                                    <pre class="doc-code-block">// 自定义Hook示例
    function useDebounce<T>(value: T, delay: number): T {
      const [debouncedValue, setDebouncedValue] = useState(value);

      useEffect(() => {
        const handler = setTimeout(() => {
          setDebouncedValue(value);
        }, delay);

        return () => {
          clearTimeout(handler);
        };
      }, [value, delay]);

      return debouncedValue;
    }</pre>
                                </div>

                                <div class="doc-section">
                                    <h2 class="doc-section-title">6. 性能优化</h2>
                                    <div class="doc-section-content">
                                        <p><strong>React.memo</strong>：对于纯展示组件，使用React.memo避免不必要的重渲染。</p>
                                    
                                        <p><strong>useMemo和useCallback</strong>：缓存计算结果和回调函数，但不要过度优化。</p>
                                    
                                        <p><strong>代码分割</strong>：使用React.lazy和Suspense进行组件懒加载。</p>
                                    
                                        <p><strong>虚拟列表</strong>：对于长列表，使用react-window或react-virtualized。</p>
                                    </div>
                                </div>

                                <div class="doc-section">
                                    <h2 class="doc-section-title">7. 测试要求</h2>
                                    <div class="doc-section-content">
                                        <p><strong>单元测试</strong>：每个组件都应该有对应的测试文件，测试覆盖率目标85%+。</p>
                                    
                                        <p><strong>测试内容</strong>：渲染测试、Props测试、事件处理测试、边界情况测试。</p>
                                    
                                        <p><strong>测试工具</strong>：使用Jest + React Testing Library进行组件测试。</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 5: 对话历史 -->
                <div id="fc-conversations" class="tab-pane">
                    <div class="conversation-layout">
                        <div class="conversation-list">
                            <div class="conversation-search">
                                <input type="text" class="search-input" placeholder="搜索对话...">
                            </div>
                            <div class="conversation-items">
                                <div class="conversation-item active" onclick="selectFullstackConversation(1)">
                                    <div class="conversation-item-header">
                                        <div class="conversation-item-title">Claude API集成讨论</div>
                                        <div class="conversation-item-time">2025-11-19 14:30</div>
                                    </div>
                                    <div class="conversation-item-preview">
                                        讨论了Claude API的流式响应实现方案...
                                    </div>
                                    <div class="conversation-item-meta">
                                        <span>10条消息</span>
                                        <span>2h 15min</span>
                                    </div>
                                </div>

                                <div class="conversation-item" onclick="selectFullstackConversation(2)">
                                    <div class="conversation-item-header">
                                        <div class="conversation-item-title">响应式布局优化</div>
                                        <div class="conversation-item-time">2025-11-19 10:00</div>
                                    </div>
                                    <div class="conversation-item-preview">
                                        分析了当前Dashboard的响应式问题，制定了优化方案...
                                    </div>
                                    <div class="conversation-item-meta">
                                        <span>8条消息</span>
                                        <span>1h 30min</span>
                                    </div>
                                </div>

                                <div class="conversation-item" onclick="selectFullstackConversation(3)">
                                    <div class="conversation-item-header">
                                        <div class="conversation-item-title">Neo4j性能优化</div>
                                        <div class="conversation-item-time">2025-11-18 16:20</div>
                                    </div>
                                    <div class="conversation-item-preview">
                                        优化了Cypher查询语句，添加了合适的索引...
                                    </div>
                                    <div class="conversation-item-meta">
                                        <span>12条消息</span>
                                        <span>1h 45min</span>
                                    </div>
                                </div>

                                <div class="conversation-item" onclick="selectFullstackConversation(4)">
                                    <div class="conversation-item-header">
                                        <div class="conversation-item-title">用户认证实现</div>
                                        <div class="conversation-item-time">2025-11-17 14:00</div>
                                    </div>
                                    <div class="conversation-item-preview">
                                        讨论了JWT认证方案，包括Token刷新机制...
                                    </div>
                                    <div class="conversation-item-meta">
                                        <span>15条消息</span>
                                        <span>3h 20min</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="conversation-detail">
                            <div class="detail-header">
                                <h2 class="detail-title">Claude API集成讨论</h2>
                                <div class="detail-meta">
                                    <span>2025-11-19 14:30</span>
                                    <span>10条消息</span>
                                    <span>2h 15min</span>
                                    <span>32,500 tokens</span>
                                </div>
                            </div>

                            <div class="messages-container">
                                <div class="message">
                                    <div class="message-avatar user">U</div>
                                    <div class="message-content">
                                        <div class="message-header">
                                            <span class="message-sender">用户</span>
                                            <span class="message-time">14:30</span>
                                        </div>
                                        <div class="message-text">
                                            需要集成Claude API实现对话功能，要支持流式响应。能帮我分析一下实现方案吗？
                                        </div>
                                    </div>
                                </div>

                                <div class="message">
                                    <div class="message-avatar">AI</div>
                                    <div class="message-content">
                                        <div class="message-header">
                                            <span class="message-sender">Fullstack AI</span>
                                            <span class="message-time">14:32</span>
                                        </div>
                                        <div class="message-text">
                                            好的，让我帮你分析Claude API的流式响应实现方案。<br><br>
                                        
                                            <strong>方案概述：</strong><br><br>
                                        
                                            Claude API支持Server-Sent Events (SSE)来实现流式响应。我们需要：<br><br>
                                        
                                            1. <strong>后端实现</strong>：<br>
                                            - 使用FastAPI的StreamingResponse<br>
                                            - 处理Claude API的SSE流<br>
                                            - 实现错误处理和重连机制<br><br>
                                        
                                            2. <strong>前端实现</strong>：<br>
                                            - 使用EventSource或fetch with ReadableStream<br>
                                            - 实时更新UI显示流式内容<br>
                                            - 处理连接状态和错误<br><br>
                                        
                                            我先给你看后端的实现代码...
                                        </div>
                                    </div>
                                </div>

                                <div class="message">
                                    <div class="message-avatar">AI</div>
                                    <div class="message-content">
                                        <div class="message-header">
                                            <span class="message-sender">Fullstack AI</span>
                                            <span class="message-time">14:35</span>
                                        </div>
                                        <div class="message-text">
                                            <strong>后端实现（FastAPI）：</strong>
    <pre>from fastapi import FastAPI
    from fastapi.responses import StreamingResponse
    import anthropic
    import asyncio

    app = FastAPI()

    @app.post("/api/chat/stream")
    async def stream_chat(request: ChatRequest):
        client = anthropic.AsyncAnthropic(
            api_key=settings.CLAUDE_API_KEY
        )
    
        async def generate():
            try:
                async with client.messages.stream(
                    model="claude-sonnet-4-20250514",
                    max_tokens=1024,
                    messages=[
                        {"role": "user", "content": request.message}
                    ]
                ) as stream:
                    async for text in stream.text_stream:
                        yield f"data: {text}\n\n"
                        await asyncio.sleep(0)
            except Exception as e:
                yield f"data: [ERROR] {str(e)}\n\n"
    
        return StreamingResponse(
            generate(),
            media_type="text/event-stream"
        )</pre>
                                        </div>
                                    </div>
                                </div>

                                <div class="message">
                                    <div class="message-avatar user">U</div>
                                    <div class="message-content">
                                        <div class="message-header">
                                            <span class="message-sender">用户</span>
                                            <span class="message-time">14:38</span>
                                        </div>
                                        <div class="message-text">
                                            不错！前端这边怎么接收和显示流式内容？
                                        </div>
                                    </div>
                                </div>

                                <div class="message">
                                    <div class="message-avatar">AI</div>
                                    <div class="message-content">
                                        <div class="message-header">
                                            <span class="message-sender">Fullstack AI</span>
                                            <span class="message-time">14:40</span>
                                        </div>
                                        <div class="message-text">
                                            <strong>前端实现（React + TypeScript）：</strong>
    <pre>import { useState } from 'react';

    function ChatComponent() {
      const [messages, setMessages] = useState<string>('');
      const [isStreaming, setIsStreaming] = useState(false);

      const streamChat = async (userMessage: string) => {
        setIsStreaming(true);
        setMessages('');

        try {
          const response = await fetch('/api/chat/stream', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ message: userMessage })
          });

          const reader = response.body?.getReader();
          const decoder = new TextDecoder();

          while (true) {
            const { done, value } = await reader!.read();
            if (done) break;

            const chunk = decoder.decode(value);
            const lines = chunk.split('\n');

            for (const line of lines) {
              if (line.startsWith('data: ')) {
                const text = line.slice(6);
                setMessages(prev => prev + text);
              }
            }
          }
        } catch (error) {
          console.error('Stream error:', error);
        } finally {
          setIsStreaming(false);
        }
      };

      return (
        <div>
          <div>{messages}</div>
          {isStreaming && <span>思考中...</span>}
        </div>
      );
    }</pre>
                                            <br>
                                            <strong>关键点：</strong><br>
                                            1. 使用ReadableStream接收流式数据<br>
                                            2. 实时更新React状态显示内容<br>
                                            3. 处理流结束和错误情况<br>
                                            4. 添加loading状态提示用户
                                        </div>
                                    </div>
                                </div>

                                <div class="message">
                                    <div class="message-avatar user">U</div>
                                    <div class="message-content">
                                        <div class="message-header">
                                            <span class="message-sender">用户</span>
                                            <span class="message-time">14:45</span>
                                        </div>
                                        <div class="message-text">
                                            完美！需要考虑哪些错误处理和优化？
                                        </div>
                                    </div>
                                </div>

                                <div class="message">
                                    <div class="message-avatar">AI</div>
                                    <div class="message-content">
                                        <div class="message-header">
                                            <span class="message-sender">Fullstack AI</span>
                                            <span class="message-time">14:48</span>
                                        </div>
                                        <div class="message-text">
                                            <strong>错误处理和优化建议：</strong><br><br>
                                        
                                            <strong>1. 错误处理</strong><br>
                                            - API限流错误：实现指数退避重试<br>
                                            - 网络中断：自动重连机制<br>
                                            - Token超限：截断或分段处理<br>
                                            - 超时处理：设置合理的timeout<br><br>
                                        
                                            <strong>2. 性能优化</strong><br>
                                            - 使用debounce避免频繁请求<br>
                                            - 缓存历史对话减少重复请求<br>
                                            - 实现请求队列避免并发过多<br>
                                            - 压缩传输数据<br><br>
                                        
                                            <strong>3. 用户体验</strong><br>
                                            - 打字机效果：逐字显示更自然<br>
                                            - 取消功能：允许用户中断流式响应<br>
                                            - 进度提示：显示Token消耗情况<br>
                                            - 错误提示：友好的错误信息<br><br>
                                        
                                            <strong>4. 安全考虑</strong><br>
                                            - API Key保护：只在后端使用<br>
                                            - 用户认证：验证请求来源<br>
                                            - 输入验证：防止注入攻击<br>
                                            - 日志记录：便于问题排查
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>
                </div>
            </div>

            <!-- 变更历史 -->
            <div id="noah-changelog" class="tab-pane">
                <div class="changelog-container">
                    <div class="changelog-item">
                        <div class="changelog-marker"></div>
                        <div class="changelog-card">
                            <div class="changelog-header">
                                <span class="changelog-time">2025-11-19 14:30:25</span>
                                <span class="changelog-type added">新增</span>
                            </div>
                            <div class="changelog-description">
                                在架构师服务中新增process_command方法，用于处理用户的自然语言命令并转换为系统操作
                            </div>
                            <div class="changelog-files">
                                <span class="changelog-file">architect_service.py +45 -2</span>
                                <span class="changelog-file">command_parser.py +87 -0</span>
                            </div>
                        </div>
                    </div>

                    <div class="changelog-item">
                        <div class="changelog-marker"></div>
                        <div class="changelog-card">
                            <div class="changelog-header">
                                <span class="changelog-time">2025-11-19 11:20:15</span>
                                <span class="changelog-type modified">修改</span>
                            </div>
                            <div class="changelog-description">
                                优化知识库管理器的查询性能，使用SQLite FTS5全文搜索替代原有的简单字符串匹配
                            </div>
                            <div class="changelog-files">
                                <span class="changelog-file">knowledge_manager.py +32 -18</span>
                                <span class="changelog-file">database_schema.sql +15 -5</span>
                            </div>
                        </div>
                    </div>

                    <div class="changelog-item">
                        <div class="changelog-marker"></div>
                        <div class="changelog-card">
                            <div class="changelog-header">
                                <span class="changelog-time">2025-11-19 09:15:40</span>
                                <span class="changelog-type added">新增</span>
                            </div>
                            <div class="changelog-description">
                                集成Claude API，实现与Claude Sonnet 4.5的通信功能
                            </div>
                            <div class="changelog-files">
                                <span class="changelog-file">claude_api.py +156 -0</span>
                                <span class="changelog-file">config.py +8 -2</span>
                            </div>
                        </div>
                    </div>

                    <div class="changelog-item">
                        <div class="changelog-marker"></div>
                        <div class="changelog-card">
                            <div class="changelog-header">
                                <span class="changelog-time">2025-11-18 20:30:12</span>
                                <span class="changelog-type modified">修改</span>
                            </div>
                            <div class="changelog-description">
                                修复Notion API同步时的时区问题，统一使用UTC时间戳
                            </div>
                            <div class="changelog-files">
                                <span class="changelog-file">notion_api.py +23 -15</span>
                            </div>
                        </div>
                    </div>

                    <div class="changelog-item">
                        <div class="changelog-marker"></div>
                        <div class="changelog-card">
                            <div class="changelog-header">
                                <span class="changelog-time">2025-11-18 16:45:30</span>
                                <span class="changelog-type modified">修改</span>
                            </div>
                            <div class="changelog-description">
                                重构任务看板的优先级排序算法，综合考虑截止时间、重要性、依赖关系
                            </div>
                            <div class="changelog-files">
                                <span class="changelog-file">task_board.py +67 -43</span>
                                <span class="changelog-file">priority_calculator.py +89 -0</span>
                            </div>
                        </div>
                    </div>

                    <div class="changelog-item">
                        <div class="changelog-marker"></div>
                        <div class="changelog-card">
                            <div class="changelog-header">
                                <span class="changelog-time">2025-11-18 14:20:05</span>
                                <span class="changelog-type deleted">删除</span>
                            </div>
                            <div class="changelog-description">
                                移除废弃的临时缓存系统，统一使用Redis
                            </div>
                            <div class="changelog-files">
                                <span class="changelog-file">temp_cache.py -234</span>
                                <span class="changelog-file">cache_manager.py +45 -12</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 冲突检测 -->
            <div id="noah-conflicts" class="tab-pane">
                <div class="conflict-warning">
                    <span class="warning-icon">⚠</span>
                    <div class="warning-text">
                        <div class="warning-title">检测到2处潜在冲突</div>
                        <div class="warning-description">需要架构师审查并解决，避免影响系统稳定性</div>
                    </div>
                </div>

                <div class="conflict-list">
                    <div class="conflict-card">
                        <div class="conflict-header">
                            <div class="conflict-title">命名冲突: process() 方法</div>
                            <div class="conflict-severity">中等</div>
                        </div>
                        <div class="conflict-description">
                            在architect_service.py和task_board.py中都定义了名为process()的方法，
                            但功能不同。建议重命名为process_command()和process_task()以避免混淆。
                        </div>
                        <div class="conflict-files-grid">
                            <div class="conflict-file-box">
                                <div class="conflict-file-label">文件A</div>
                                <div class="conflict-file-path">/src/core/architect_service.py:45</div>
                            </div>
                            <div class="conflict-file-box">
                                <div class="conflict-file-label">文件B</div>
                                <div class="conflict-file-path">/src/core/task_board.py:78</div>
                            </div>
                        </div>
                    </div>

                    <div class="conflict-card">
                        <div class="conflict-header">
                            <div class="conflict-title">依赖循环: API模块</div>
                            <div class="conflict-severity">高</div>
                        </div>
                        <div class="conflict-description">
                            claude_api.py导入了knowledge_manager.py，
                            而knowledge_manager.py又导入了claude_api.py，形成循环依赖。
                            建议提取共享接口到独立的interface模块。
                        </div>
                        <div class="conflict-files-grid">
                            <div class="conflict-file-box">
                                <div class="conflict-file-label">文件A</div>
                                <div class="conflict-file-path">/src/api/claude_api.py:12</div>
                            </div>
                            <div class="conflict-file-box">
                                <div class="conflict-file-label">文件B</div>
                                <div class="conflict-file-path">/src/core/knowledge_manager.py:8</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 统计分析 -->
            <div id="noah-stats" class="tab-pane">
                <div class="stats-dashboard">
                    <div class="stats-section">
                        <h2 class="stats-section-title">代码规模统计</h2>
                        <div class="stats-grid">
                            <div class="stats-card">
                                <div class="stats-card-value">3,587</div>
                                <div class="stats-card-label">总代码行数</div>
                            </div>
                            <div class="stats-card">
                                <div class="stats-card-value">47</div>
                                <div class="stats-card-label">文件总数</div>
                            </div>
                            <div class="stats-card">
                                <div class="stats-card-value">8</div>
                                <div class="stats-card-label">活跃模块</div>
                            </div>
                            <div class="stats-card">
                                <div class="stats-card-value">2,845</div>
                                <div class="stats-card-label">有效代码行数</div>
                            </div>
                            <div class="stats-card">
                                <div class="stats-card-value">512</div>
                                <div class="stats-card-label">注释行数</div>
                            </div>
                            <div class="stats-card">
                                <div class="stats-card-value">230</div>
                                <div class="stats-card-label">空行</div>
                            </div>
                        </div>
                    </div>

                    <div class="stats-section">
                        <h2 class="stats-section-title">语言分布</h2>
                        <div class="language-breakdown">
                            <div class="language-item">
                                <div class="language-name">Python</div>
                                <div class="language-bar">
                                    <div class="language-bar-fill" style="width: 62%"></div>
                                </div>
                                <div class="language-percentage">62.3%</div>
                            </div>
                            <div class="language-item">
                                <div class="language-name">JavaScript</div>
                                <div class="language-bar">
                                    <div class="language-bar-fill" style="width: 24%"></div>
                                </div>
                                <div class="language-percentage">24.1%</div>
                            </div>
                            <div class="language-item">
                                <div class="language-name">HTML</div>
                                <div class="language-bar">
                                    <div class="language-bar-fill" style="width: 8%"></div>
                                </div>
                                <div class="language-percentage">8.5%</div>
                            </div>
                            <div class="language-item">
                                <div class="language-name">CSS</div>
                                <div class="language-bar">
                                    <div class="language-bar-fill" style="width: 3%"></div>
                                </div>
                                <div class="language-percentage">3.2%</div>
                            </div>
                            <div class="language-item">
                                <div class="language-name">SQL</div>
                                <div class="language-bar">
                                    <div class="language-bar-fill" style="width: 2%"></div>
                                </div>
                                <div class="language-percentage">1.9%</div>
                            </div>
                        </div>
                    </div>

                    <div class="stats-section">
                        <h2 class="stats-section-title">变更活跃度</h2>
                        <div class="stats-grid">
                            <div class="stats-card">
                                <div class="stats-card-value">18</div>
                                <div class="stats-card-label">本周变更</div>
                            </div>
                            <div class="stats-card">
                                <div class="stats-card-value">67</div>
                                <div class="stats-card-label">本月变更</div>
                            </div>
                            <div class="stats-card">
                                <div class="stats-card-value">5</div>
                                <div class="stats-card-label">活跃文件</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    </main>


    
    <script>
        // 清除缓存函数
        function clearCache() {
            if (confirm('确定要清除缓存吗？页面将会刷新。')) {
                // 清除所有缓存
                if ('caches' in window) {
                    caches.keys().then(names => {
                        names.forEach(name => caches.delete(name));
                    });
                }
                // 强制刷新页面
                window.location.reload(true);
            }
        }

        // Tab切换逻辑
        document.addEventListener('DOMContentLoaded', function() {
            const tabButtons = document.querySelectorAll('.tab-button');
            const contentViews = document.querySelectorAll('.content-view');

            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetTab = this.dataset.tab;

                    // 移除所有active类
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    contentViews.forEach(view => view.classList.remove('active'));

                    // 添加active类到当前tab
                    this.classList.add('active');
                    document.querySelector(`[data-view="${targetTab}"]`).classList.add('active');
                });
            });

            // 筛选器切换逻辑
            const filterButtons = document.querySelectorAll('.filter-btn');
            const filterContents = document.querySelectorAll('.filter-content');

            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetFilter = this.dataset.filter;

                    // 移除所有active类
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    filterContents.forEach(content => content.classList.remove('active'));

                    // 添加active类到当前filter
                    this.classList.add('active');
                    document.querySelector(`[data-filter-content="${targetFilter}"]`).classList.add('active');
                });
            });

            // 统计卡片点击效果
            const statCards = document.querySelectorAll('.stat-card');
            statCards.forEach(card => {
                card.addEventListener('click', function() {
                    // 添加点击涟漪效果
                    const ripple = document.createElement('div');
                    ripple.style.cssText = `
                        position: absolute;
                        border-radius: 50%;
                        background: rgba(212, 175, 55, 0.3);
                        width: 100px;
                        height: 100px;
                        margin-top: -50px;
                        margin-left: -50px;
                        animation: ripple 0.6s;
                        pointer-events: none;
                    `;
                    
                    this.appendChild(ripple);
                    
                    setTimeout(() => {
                        ripple.remove();
                    }, 600);
                });
            });

            // 版本按钮切换
            const versionBtns = document.querySelectorAll('.version-btn');
            const versionContents = document.querySelectorAll('.version-content');
            
            versionBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const version = this.dataset.version;
                    
                    // 移除所有active类
                    versionBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // 显示/隐藏内容
                    versionContents.forEach(content => {
                        if (content.dataset.version === version) {
                            content.style.display = 'block';
                        } else {
                            content.style.display = 'none';
                        }
                    });
                    
                    // 版本2和3显示空状态提示
                    if (version === '2' || version === '3') {
                        // 显示空状态信息
                        const emptyMessage = document.getElementById('emptyVersionMessage');
                        if (emptyMessage) emptyMessage.style.display = 'block';
                    } else {
                        const emptyMessage = document.getElementById('emptyVersionMessage');
                        if (emptyMessage) emptyMessage.style.display = 'none';
                    }
                });
            });

            // 架构师模块Tab切换
            window.switchArchitectTab = function(tabName) {
                document.querySelectorAll('.architect-tab-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelectorAll('.architect-tab-pane').forEach(pane => {
                    pane.classList.remove('active');
                });

                event.target.closest('.architect-tab-item').classList.add('active');
                document.getElementById('architect-' + tabName).classList.add('active');
            };

            // 复制架构师提示词（架构师模块用）
            window.copyArchitectOldPrompt = function() {
                const promptText = document.querySelector('.architect-prompt-text').textContent;
                navigator.clipboard.writeText(promptText).then(() => {
                    const button = event.target;
                    const originalText = button.textContent;
                    button.textContent = '已复制到剪贴板';
                    button.style.background = 'var(--noir-graphite)';
                    setTimeout(() => {
                        button.textContent = originalText;
                        button.style.background = 'var(--noir-ink)';
                    }, 2000);
                });
            };

            // 选择架构师对话
            window.selectArchitectConversation = function(id) {
                document.querySelectorAll('.architect-conversation-item').forEach(item => {
                    item.classList.remove('active');
                });
                event.target.closest('.architect-conversation-item').classList.add('active');
            };

            // 切换模块展开/收起
            window.toggleModule = function(moduleId) {
                const module = document.getElementById(moduleId);
                const allModules = document.querySelectorAll('.module-card');
                
                if (module.classList.contains('expanded')) {
                    // 收起当前模块
                    module.classList.remove('expanded');
                } else {
                    // 收起所有模块，展开当前模块
                    allModules.forEach(m => m.classList.remove('expanded'));
                    module.classList.add('expanded');
                }
            };

            // 点击卡片外部收起
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.module-card')) {
                    document.querySelectorAll('.module-card').forEach(m => {
                        m.classList.remove('expanded');
                    });
                }
            });

            // 项目切换功能
            const projectConfigs = {
                zhihuicang: {
                    icon: 'F',
                    name: '指挥舱',
                    version: 'v1.7',
                    description: '企业级AI任务中枢 | 多项目支持 · 智能跟踪管理',
                    meta: [
                        { label: '项目描述', value: '企业级AI任务中枢 | 多项目支持 · 智能跟踪管理' },
                        { label: '预计开发时间', value: '6个月 (2025年11月 - 2026年4月)' },
                        { label: '技术栈', value: 'Python, FastAPI, React, TypeScript' },
                        { label: '核心功能', value: 'AI任务自动化、代码审查、进度监控' },
                        { label: '应用场景', value: 'AI辅助开发、自动化工作流' },
                        { label: '当前版本', value: 'v2.0 升级开发中' }
                    ]
                },
                datacenter: {
                    icon: '📊',
                    name: '数据中心',
                    version: 'v2.0',
                    description: '实时数据分析平台 | 可视化看板 · 智能报表',
                    meta: [
                        { label: '项目描述', value: '企业数据分析中台 | 实时计算 · 可视化展示' },
                        { label: '预计开发时间', value: '5个月 (2025年10月 - 2026年3月)' },
                        { label: '技术栈', value: 'Clickhouse, Grafana, Vue.js, ECharts' },
                        { label: '核心功能', value: '数据采集、实时分析、可视化看板、报表生成' },
                        { label: '应用场景', value: '业务分析、运营监控、决策支持' },
                        { label: '当前版本', value: 'v2.0 稳定运行中' }
                    ]
                },
                monitor: {
                    icon: '📡',
                    name: '监控台',
                    version: 'v1.5',
                    description: '系统监控预警平台 | 实时监控 · 智能告警',
                    meta: [
                        { label: '项目描述', value: '分布式系统监控 | 性能追踪 · 异常告警' },
                        { label: '预计开发时间', value: '4个月 (2025年12月 - 2026年4月)' },
                        { label: '技术栈', value: 'Prometheus, Grafana, Go, Kubernetes' },
                        { label: '核心功能', value: '指标采集、实时监控、告警通知、链路追踪' },
                        { label: '应用场景', value: '系统运维、性能优化、故障排查' },
                        { label: '当前版本', value: 'v1.5 Beta测试中' }
                    ]
                },
                workflow: {
                    icon: '⚙️',
                    name: '工作流',
                    version: 'v3.2',
                    description: '自动化流程引擎 | 可视化编排 · 智能执行',
                    meta: [
                        { label: '项目描述', value: '低代码工作流平台 | 拖拽编排 · 自动执行' },
                        { label: '预计开发时间', value: '7个月 (2025年9月 - 2026年4月)' },
                        { label: '技术栈', value: 'Node.js, React Flow, MongoDB, Redis' },
                        { label: '核心功能', value: '流程设计、自动执行、条件分支、定时任务' },
                        { label: '应用场景', value: '业务流程、审批流转、自动化运维' },
                        { label: '当前版本', value: 'v3.2 功能增强中' }
                    ]
                }
            };

            // 切换项目
            window.switchProject = function(projectKey) {
                const config = projectConfigs[projectKey];
                if (!config) return;

                // 更新项目图标
                document.getElementById('projectIcon').textContent = config.icon;
                
                // 更新项目名称
                document.getElementById('projectName').textContent = config.name;
                
                // 更新版本
                document.getElementById('projectVersion').textContent = config.version;
                
                // 更新描述
                document.getElementById('projectDesc').textContent = config.description;
                
                // 更新元数据卡片
                const metaGrid = document.getElementById('projectMeta');
                metaGrid.innerHTML = config.meta.map(item => `
                    <div class="meta-card">
                        <div class="meta-label">${item.label}</div>
                        <div class="meta-value">${item.value}</div>
                    </div>
                `).join('');

                // 更新切换器选中状态
                document.querySelectorAll('.project-option').forEach(option => {
                    option.classList.remove('active');
                });
                event.target.classList.add('active');

                // 更新页面标题
                document.title = `任务所·Flow - ${config.name}`;
            };

            // 初始化项目
            switchProject('zhihuicang');
        });

        // 架构师工作台Tab切换
        function switchArchitectTab(tabName) {
            // 移除所有active类
            document.querySelectorAll('.architect-tab-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.architect-tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });

            // 添加active类到当前tab
            event.target.closest('.architect-tab-item').classList.add('active');
            document.getElementById('architect-' + tabName).classList.add('active');
        }

        // ========== 待开发任务模块函数 ==========
        function switchPendingTab(tabName) {
            const pendingModule = document.querySelector('.pending-features-module');
            if (!pendingModule) return;
            
            pendingModule.querySelectorAll('.tab-item').forEach(item => {
                item.classList.remove('active');
            });
            pendingModule.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            event.target.closest('.tab-item').classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        function acceptSuggestion(suggestionId) {
            const message = `我采纳建议 ${suggestionId}，请架构师开始执行。`;
            alert(`对话消息已发送给架构师:\n"${message}"\n\n架构师将会:\n1. 记录采纳决策\n2. 分配给相应工程师\n3. 跟踪执行进度`);
            
            const button = event.target;
            button.textContent = '✓ 已采纳 - 架构师正在执行';
            button.style.background = 'var(--status-success)';
            button.disabled = true;
            
            const rejectButton = button.parentElement.querySelector('.reject');
            rejectButton.disabled = true;
            rejectButton.style.opacity = '0.5';
        }

        function rejectSuggestion(suggestionId) {
            const reason = prompt(`请告诉架构师拒绝 ${suggestionId} 的原因:\n（可选，帮助架构师理解决策）`);
            
            if (reason !== null) {
                const message = reason 
                    ? `我拒绝建议 ${suggestionId}，原因: ${reason}`
                    : `我拒绝建议 ${suggestionId}`;
                    
                alert(`对话消息已发送给架构师:\n"${message}"\n\n架构师将会:\n1. 记录拒绝决策和原因\n2. 标记此建议为已处理\n3. 未来不再重复提醒`);
                
                const button = event.target;
                button.textContent = '✓ 已拒绝';
                button.style.background = 'var(--noir-silver)';
                button.disabled = true;
                
                const acceptButton = button.parentElement.querySelector('.accept');
                acceptButton.disabled = true;
                acceptButton.style.opacity = '0.5';
            }
        }

        // ========== 项目透视模块函数 ==========
        function switchTab(tabName) {
            // 项目透视模块的Tab切换
            const insightModule = document.querySelector('.page-container');
            if (!insightModule) return;
            
            insightModule.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            insightModule.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            // 加载对应Tab的数据
            loadInsightData(tabName);
        }

        // 加载透视塔数据
        async function loadInsightData(tabName) {
            try {
                switch(tabName) {
                    case 'implemented':
                        await loadImplementedFeatures();
                        break;
                    case 'partial':
                        await loadPartialFeatures();
                        break;
                    case 'issues':
                        await loadIssues();
                        break;
                    case 'recommendations':
                        await loadRecommendations();
                        break;
                }
            } catch (error) {
                console.error('加载透视塔数据失败:', error);
                showToast('❌ 数据加载失败: ' + error.message);
            }
        }

        // Tab1: 加载已实现功能
        , 1000);
                    }
                    
                    // 更新Tab标题
                    const tabTitle = document.querySelector('#implemented .section-title');
                    if (tabTitle) {
                        tabTitle.textContent = `已实现功能（${data.total}项）`;
                    }
                    
                    showToast(`✓ 已加载 ${data.total} 个已实现功能`);
                }
            } catch (error) {
                console.error('加载已实现功能失败:', error);
                showToast('⚠️ API连接失败，请确保8800端口服务运行中');
            }
        }

        // Tab2: 加载部分实现功能
        async function loadPartialFeatures() {
            try {
                const response = await fetch('http://localhost:8800/api/features/partial');
                const data = await response.json();
                
                if (data.success) {
                    console.log('✅ 部分实现功能数据:', data);
                    // 更新透视塔头部统计数字
                    const countEl = document.getElementById('insightPartialCount');
                    if (countEl) {
                        countEl.textContent = data.total;
                    }
                    
                    // 更新Tab标题
                    const tabTitle = document.querySelector('#partial .section-title');
                    if (tabTitle) {
                        tabTitle.textContent = `部分实现功能（${data.total}个）`;
                    }
                    
                    showToast(`✓ 已加载 ${data.total} 个部分实现功能 (平均进度: ${data.avg_progress}%)`);
                }
            } catch (error) {
                console.error('加载部分实现功能失败:', error);
                showToast('⚠️ API连接失败，请确保8800端口服务运行中');
            }
        }

        // Tab3: 加载问题清单
        async function loadIssues() {
            try {
                const response = await fetch('http://localhost:8800/api/issues');
                const data = await response.json();
                
                if (data.success) {
                    console.log('✅ 问题清单数据:', data);
                    // 更新透视塔头部统计数字
                    const countEl = document.getElementById('insightIssuesCount');
                    if (countEl) {
                        countEl.textContent = data.total;
                    }
                    
                    // 更新Tab标题
                    const tabTitle = document.querySelector('#issues .section-title');
                    if (tabTitle) {
                        tabTitle.textContent = `问题清单（${data.total}个，按优先级排序）`;
                    }
                    
                    // 显示详细统计
                    const stats = data.stats;
                    const statsMsg = `P0: ${stats.by_priority.P0 || 0}, P1: ${stats.by_priority.P1 || 0}, P2: ${stats.by_priority.P2 || 0}`;
                    showToast(`✓ 已加载 ${data.total} 个问题 (${statsMsg})`);
                }
            } catch (error) {
                console.error('加载问题清单失败:', error);
                showToast('⚠️ API连接失败，请确保8800端口服务运行中');
            }
        }

        // Tab4: 加载架构建议
        async function loadRecommendations() {
            try {
                const response = await fetch('http://localhost:8800/api/suggestions');
                const data = await response.json();
                
                if (data.success) {
                    console.log('✅ 架构建议数据:', data);
                    // 更新透视塔头部统计数字
                    const countEl = document.getElementById('insightSuggestionsCount');
                    if (countEl) {
                        countEl.textContent = data.total;
                    }
                    
                    // 更新Tab标题
                    const tabTitle = document.querySelector('#recommendations .section-title');
                    if (tabTitle) {
                        tabTitle.textContent = `架构师建议（${data.total}条优化方案）`;
                    }
                    
                    // 显示详细统计
                    const stats = data.stats;
                    showToast(`✓ 已加载 ${data.total} 条建议 (预估总工时: ${stats.total_estimated_hours}h)`);
                }
            } catch (error) {
                console.error('加载架构建议失败:', error);
                showToast('⚠️ API连接失败，请确保8800端口服务运行中');
            }
        }

        // 刷新透视塔显示数据（不扫描，只从API读取）
        async function refreshInsightData() {
            console.log('🔄 刷新显示数据...');
            showToast('🔄 正在加载最新数据...');
            
            try {
                // 加载所有Tab的统计数据
                await Promise.all([
                    loadImplementedFeatures(),
                    loadPartialFeatures(),
                    loadIssues(),
                    loadRecommendations()
                ]);
                
                showToast('✅ 数据已刷新！');
            } catch (error) {
                console.error('刷新失败:', error);
                showToast('❌ 刷新失败: ' + error.message);
            }
        }
        
        // 页面加载时初始化透视塔数据
        document.addEventListener('DOMContentLoaded', function() {
            // 延迟加载，等待页面完全渲染
            setTimeout(() => {
                console.log('🎯 初始化透视塔数据...');
                console.log('📊 加载所有Tab统计数据...');
                
                // 自动加载所有Tab的统计数据（更新顶部4个数字）
                refreshInsightData();
            }, 2000);  // 增加延迟到2秒，确保页面完全加载
        });

        async function handleRescan() {
            if (confirm('确认重新扫描项目？\n\n将重新统计所有已实现功能\n预计耗时：约10秒\n数据将自动更新')) {
                showToast('🔄 开始扫描项目...');
                
                try {
                    const response = await fetch('http://localhost:8800/api/rescan', {
                        method: 'POST'
                    });
                    const data = await response.json();
                    
                    if (data.success) {
                        showToast('✅ 扫描完成！正在刷新数据...');
                        
                        // 延迟1秒后重新加载所有Tab数据
                        setTimeout(() => {
                            loadImplementedFeatures();
                            loadPartialFeatures();
                            loadIssues();
                            loadRecommendations();
                            showToast('✅ 数据已更新！请查看各Tab');
                        }, 1000);
                    } else {
                        showToast('❌ 扫描失败: ' + data.message);
                    }
                } catch (error) {
                    console.error('重新扫描失败:', error);
                    showToast('❌ 扫描失败: ' + error.message);
                }
            }
        }

        function handleExport() {
            showToast('📄 正在生成报告...');
            setTimeout(() => {
                showToast('✓ 报告生成完成');
            }, 1500);
        }

        function generateTask(issueId) {
            const button = event.target;
            button.textContent = '生成中...';
            button.disabled = true;
            button.style.opacity = '0.6';
            button.style.cursor = 'not-allowed';
            
            setTimeout(() => {
                const taskId = 'TASK-' + String(Math.floor(Math.random() * 100) + 50).padStart(3, '0');
                showToast(`✓ 已生成任务卡片 ${taskId}`);
                button.textContent = '已生成 ' + taskId;
                button.style.background = 'var(--blanc-mist)';
                button.style.color = 'var(--noir-steel)';
                button.style.opacity = '1';
                button.style.cursor = 'not-allowed';
            }, 1500);
        }

        function adoptRecommendation(recId, button) {
            if (button.disabled) return;
            
            button.textContent = '处理中...';
            button.disabled = true;
            button.style.opacity = '0.6';
            button.style.cursor = 'not-allowed';
            
            setTimeout(() => {
                const taskId = 'TASK-' + String(Math.floor(Math.random() * 100) + 50).padStart(3, '0');
                showToast(`✓ 已生成任务卡片 ${taskId}`);
                button.textContent = '已生成任务 ' + taskId;
                button.classList.add('adopted');
                button.style.opacity = '1';
                
                const card = button.closest('.recommendation-card');
                if (!card.querySelector('.adopted-badge')) {
                    const badge = document.createElement('span');
                    badge.className = 'adopted-badge';
                    badge.textContent = '已采纳';
                    card.appendChild(badge);
                }
            }, 2000);
        }

        // 复制架构师扫描指令
        function copyArchitectPrompt() {
            const promptEl = document.getElementById('architectPrompt');
            if (!promptEl) {
                showToast('错误：找不到指令内容');
                return;
            }
            
            const promptText = promptEl.textContent;
            
            // 创建临时textarea
            const textarea = document.createElement('textarea');
            textarea.value = promptText;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            
            // 选择并复制
            textarea.select();
            textarea.setSelectionRange(0, 99999);
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    // 强制显示Toast提醒
                    console.log('✅ 复制成功，显示Toast');
                    showToast('已复制指令，请打开新Cursor粘贴');
                    
                    // 同时alert确保用户看到
                    alert('✅ 已复制指令\n\n请打开新的Cursor窗口粘贴指令');
                    
                    // 按钮视觉反馈
                    const button = event.target;
                    const originalText = button.textContent;
                    
                    button.textContent = '已复制';
                    button.style.background = '#4A7C59';
                    button.style.color = 'white';
                    
                    setTimeout(() => {
                        button.textContent = originalText;
                        button.style.background = '';
                    }, 2000);
                } else {
                    alert('❌ 复制失败，请手动复制');
                }
            } catch (err) {
                alert('❌ 复制失败：' + err.message);
                console.error('复制失败:', err);
            }
            
            // 清理
            document.body.removeChild(textarea);
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 40px;
                right: 40px;
                background: var(--noir-ink);
                color: var(--blanc-pure);
                padding: 16px 24px;
                font-size: var(--text-sm);
                font-weight: var(--weight-medium);
                z-index: 9999;
                box-shadow: var(--shadow-md);
                animation: slideIn 0.3s ease;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // 全栈工程师工作台Tab切换
        // 复制任务提示词
        function copyTaskPrompt(button) {
            const taskItem = button.closest('.engineer-list-item');
            const taskId = taskItem.dataset.taskId;
            const taskTitle = taskItem.dataset.taskTitle;
            const taskContent = taskItem.querySelector('.engineer-item-content').textContent.trim();
            
            const prompt = `# 全栈工程师任务提示词

## 任务信息
- **任务ID**: ${taskId}
- **任务名称**: ${taskTitle}
- **分配给**: Fullstack Engineer AI

## 任务描述
${taskContent}

## 工作流程
1. **理解任务** - 仔细阅读任务描述和技术要求
2. **设计方案** - 制定技术方案，考虑架构和实现细节
3. **编写代码** - 遵循代码规范，编写高质量代码
4. **自测验证** - 本地测试，确保功能正常
5. **提交审查** - 提交代码审查，等待架构师反馈
6. **生成报告** - 编写完成报告，记录关键决策

## 代码规范
- 遵循项目代码规范
- 添加必要的注释
- 完善的错误处理
- 考虑性能优化
- 编写单元测试（覆盖率≥85%）

## 交付物
- ✅ 源代码
- ✅ 单元测试
- ✅ 技术文档
- ✅ 完成报告

请开始执行任务！`;

            navigator.clipboard.writeText(prompt).then(() => {
                const originalText = button.textContent;
                button.textContent = '✓ 已复制到剪贴板';
                button.style.background = '#4A7C59';
                button.style.color = '#FFFFFF';
                button.style.borderColor = '#4A7C59';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                    button.style.color = '';
                    button.style.borderColor = '';
                }, 2000);
            }).catch(err => {
                alert('复制失败: ' + err.message);
            });
        }

        // 重新派发任务
        function reAssignTask(button) {
            const taskItem = button.closest('.engineer-list-item');
            const taskId = taskItem.dataset.taskId;
            const taskTitle = taskItem.dataset.taskTitle;
            
            const reAssignMessage = `# 任务重新派发

## 任务信息
- **任务ID**: ${taskId}
- **任务名称**: ${taskTitle}
- **当前状态**: 进行中（需要重新派发）

## 重新派发原因
[请填写重新派发的原因，例如：]
- 当前负责人遇到技术难点
- 任务优先级调整
- 需要其他工程师协作
- 其他原因...

## 给新负责人的说明
此任务原由Fullstack Engineer AI负责，已完成部分工作。请新负责人：
1. 查看已完成的工作内容
2. 理解当前进度和遇到的问题
3. 继续完成剩余工作
4. 完成后提交完成报告

---

请将此消息发送给架构师，由架构师重新分配此任务。`;

            navigator.clipboard.writeText(reAssignMessage).then(() => {
                const originalText = button.textContent;
                button.textContent = '✓ 派发消息已复制';
                button.style.background = '#C17A40';
                button.style.color = '#FFFFFF';
                button.style.borderColor = '#C17A40';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                    button.style.color = '';
                    button.style.borderColor = '';
                }, 2000);
            }).catch(err => {
                alert('复制失败: ' + err.message);
            });
        }

        // 复制完成报告模板
        function copyCompletionReport(button) {
            const taskItem = button.closest('.engineer-list-item');
            const taskId = taskItem.dataset.taskId;
            const taskTitle = taskItem.dataset.taskTitle;
            
            const report = `# ${taskId} 任务完成报告

## 📋 任务概述
- **任务ID**: ${taskId}
- **任务名称**: ${taskTitle}
- **负责人**: Fullstack Engineer AI
- **开始时间**: [填写]
- **完成时间**: ${new Date().toISOString().slice(0,16).replace('T', ' ')}
- **实际用时**: [填写]

---

## ✅ 完成内容

### 1. 主要实现
- [列出主要实现的功能点]
- [功能点2]
- [功能点3]

### 2. 技术方案
- **技术栈**: [填写]
- **核心逻辑**: [填写]
- **关键代码**: [填写文件路径]

### 3. 测试验证
- ✅ 单元测试覆盖率: [填写]%
- ✅ 功能测试: [填写测试场景]
- ✅ 性能测试: [填写性能指标]

---

## 📂 文件清单
- \`[文件路径1]\` - [说明]
- \`[文件路径2]\` - [说明]

---

## ⚠️ 风险注意
- [列出潜在风险和注意事项]

---

## 🚀 后续建议
- [列出后续优化建议]

---

**状态**: ✅ 已完成  
**提交给**: 架构师审查
`;

            navigator.clipboard.writeText(report).then(() => {
                const originalText = button.textContent;
                button.textContent = '✓ 已复制到剪贴板';
                button.style.background = '#4A7C59';
                button.style.color = '#FFFFFF';
                button.style.borderColor = '#4A7C59';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                    button.style.color = '';
                    button.style.borderColor = '';
                }, 2000);
            }).catch(err => {
                alert('复制失败: ' + err.message);
            });
        }

        // 自动为所有任务项添加操作按钮
        document.addEventListener('DOMContentLoaded', function() {
            const engineerListItems = document.querySelectorAll('#engineer-tasks .engineer-list-item');
            
            engineerListItems.forEach(item => {
                // 如果已经有按钮，跳过
                if (item.querySelector('.engineer-item-actions')) {
                    return;
                }
                
                // 从标题中提取任务ID和标题
                const titleElement = item.querySelector('.engineer-item-title');
                if (!titleElement) return;
                
                const titleText = titleElement.textContent;
                const match = titleText.match(/^([A-Z]+-[A-Z]+-\d+)\s*\|\s*(.+)$/);
                
                if (match) {
                    const taskId = match[1];
                    const taskTitle = match[2];
                    
                    // 设置data属性
                    item.dataset.taskId = taskId;
                    item.dataset.taskTitle = taskTitle;
                    
                    // 判断任务状态
                    const tags = item.querySelectorAll('.engineer-tag');
                    let status = 'pending';
                    tags.forEach(tag => {
                        const tagText = tag.textContent.trim();
                        if (tagText === '进行中') status = 'in_progress';
                        if (tagText === '已完成') status = 'completed';
                    });
                    
                    item.dataset.status = status;
                    
                    // 创建按钮容器
                    const actionsDiv = document.createElement('div');
                    actionsDiv.className = 'engineer-item-actions';
                    
                    // 根据任务状态流转显示对应按钮
                    if (status === 'completed') {
                        // 已完成 → 复制完成报告
                        actionsDiv.innerHTML = `
                            <button class="engineer-action-btn primary" onclick="copyCompletionReport(this)">复制完成报告</button>
                            <button class="engineer-action-btn">查看详情</button>
                        `;
                    } else if (status === 'in_progress') {
                        // 进行中 → 重新派发任务（如果卡住了）
                        actionsDiv.innerHTML = `
                            <button class="engineer-action-btn primary" onclick="reAssignTask(this)">重新派发任务</button>
                            <button class="engineer-action-btn" onclick="copyCompletionReport(this)">提交完成报告</button>
                        `;
                    } else {
                        // 待处理 → 复制提示词（开始任务）
                        actionsDiv.innerHTML = `
                            <button class="engineer-action-btn primary" onclick="copyTaskPrompt(this)">复制提示词</button>
                            <button class="engineer-action-btn">查看详情</button>
                        `;
                    }
                    
                    // 插入按钮
                    item.appendChild(actionsDiv);
                }
            });
        });


        // ========== 记忆空间模块函数 ==========
        function filterMemories(type) {
            document.querySelectorAll('.memory-space-module .filter-chip').forEach(chip => {
                chip.classList.remove('active');
            });
            event.target.classList.add('active');

            const items = document.querySelectorAll('.memory-space-module .memory-item');
            items.forEach(item => {
                if (type === 'all') {
                    item.style.display = 'block';
                } else {
                    const itemTypes = item.dataset.type.split(' ');
                    if (itemTypes.includes(type)) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                }
            });
        }

        function jumpToMemory(memoryId) {
            const element = document.getElementById(memoryId);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                element.style.transform = 'translateX(8px)';
                const card = element.querySelector('.memory-card');
                if (card) {
                    card.style.boxShadow = 'var(--shadow-md)';
                }
                
                setTimeout(() => {
                    element.style.transform = '';
                    if (card) {
                        card.style.boxShadow = '';
                    }
                }, 2000);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.memory-space-module .stat-card').forEach((card) => {
                card.addEventListener('click', () => {
                    const filterType = card.dataset.filter;
                    const buttons = document.querySelectorAll('.memory-space-module .filter-chip');
                    
                    buttons.forEach(btn => {
                        if (btn.textContent.includes('全部') && filterType === 'all') btn.click();
                        if (btn.textContent.includes('决策') && filterType === 'decision') btn.click();
                        if (btn.textContent.includes('方案') && filterType === 'solution') btn.click();
                        if (btn.textContent.includes('重要') && filterType === 'important') btn.click();
                    });
                });
            });
        });

        // ========== 实时脉动模块函数 ==========
        function switchPulseTab(tabName) {
            document.querySelectorAll('.pulse-module .tab-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.pulse-module .tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });

            event.target.closest('.tab-item').classList.add('active');
            document.getElementById('pulse-' + tabName).classList.add('active');
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Checkbox切换
            document.querySelectorAll('.pulse-module .event-checkbox').forEach(checkbox => {
                checkbox.addEventListener('click', function(e) {
                    e.stopPropagation();
                    this.style.background = this.style.background === 'rgb(10, 15, 20)' ? '' : '#0A0F14';
                });
            });

            // 筛选器切换
            document.querySelectorAll('.pulse-module .filter-chip').forEach(chip => {
                chip.addEventListener('click', function() {
                    document.querySelectorAll('.pulse-module .filter-chip').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    
                    const filterText = this.textContent.trim().split(' ')[0];
                    const items = document.querySelectorAll('.pulse-module .event-item');
                    const today = new Date().toISOString().split('T')[0];
                    
                    items.forEach(item => {
                        const category = item.getAttribute('data-category');
                        const date = item.getAttribute('data-date');
                        let show = false;
                        
                        switch(filterText) {
                            case '全部':
                                show = true;
                                break;
                            case '今天':
                                show = (date === today);
                                break;
                            case '本周':
                                const eventDate = new Date(date);
                                const weekAgo = new Date();
                                weekAgo.setDate(weekAgo.getDate() - 7);
                                show = (eventDate >= weekAgo);
                                break;
                            case '决策':
                                show = (category === '决策');
                                break;
                            case '任务':
                                show = (category === '任务');
                                break;
                            case '交接':
                                show = (category === '交接');
                                break;
                            default:
                                show = true;
                        }
                        
                        item.style.display = show ? 'flex' : 'none';
                    });
                });
            });

            // 搜索功能
            const searchInput = document.querySelector('.pulse-module .search-input');
            if (searchInput) {
                searchInput.addEventListener('input', function(e) {
                    const searchTerm = e.target.value.toLowerCase();
                    const items = document.querySelectorAll('.pulse-module .event-item');
                    
                    items.forEach(item => {
                        const text = item.textContent.toLowerCase();
                        item.style.display = text.includes(searchTerm) ? 'flex' : 'none';
                    });
                });
            }

            // 模拟自动刷新时间
            function updatePulseTime() {
                const metaText = document.querySelector('.pulse-module .current-time');
                if (metaText) {
                    const now = new Date();
                    const timeString = now.toISOString().slice(0, 16).replace('T', ' ');
                    metaText.textContent = timeString;
                }
            }
            
            updatePulseTime();
            setInterval(updatePulseTime, 30000);
        });

        // ========== 运维工程师模块函数 ==========
        function switchDevOpsTab(tabName) {
            const devopsModule = document.querySelector('.devops-module');
            if (!devopsModule) return;
            
            devopsModule.querySelectorAll('.devops-tab-item').forEach(item => {
                item.classList.remove('active');
            });
            devopsModule.querySelectorAll('.devops-tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });

            event.target.closest('.devops-tab-item').classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        function updateDevOpsStats() {
            const responseTime = document.querySelector('.devops-module .quick-stats .stat-value');
            const randomTime = Math.floor(Math.random() * 50) + 100;
            if (responseTime) {
                responseTime.textContent = randomTime + 'ms';
            }
        }

        setInterval(updateDevOpsStats, 30000);

        // ========== Noah AI代码管家模块函数 ==========
        function switchNoahTab(event, tabName) {
            // 移除所有active
            document.querySelectorAll('.code-manager-module .tab-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.code-manager-module .tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });

            // 添加active
            event.currentTarget.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // 筛选器点击效果
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.code-manager-module .filter-chip').forEach(chip => {
                chip.addEventListener('click', function() {
                    this.classList.toggle('active');
                });
            });

            // 代码项点击效果
            document.querySelectorAll('.code-manager-module .code-item').forEach(item => {
                item.addEventListener('click', function() {
                    console.log('点击了代码文件');
                });
            });

            // 搜索框键盘快捷键（Cmd+K / Ctrl+K）
            document.addEventListener('keydown', function(e) {
                if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                    e.preventDefault();
                    const searchBox = document.querySelector('.code-manager-module .search-box');
                    if (searchBox) {
                        searchBox.focus();
                    }
                }
            });
        });

    
        // ========== 全栈工程师模块（完整版）函数 ==========

        // Tab切换
        function switchFullstackCompleteTab(tabName) {
            document.querySelectorAll('.fullstack-complete-module .tab-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.fullstack-complete-module .tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });

            event.target.closest('.tab-item').classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // 复制提示词
        function copyFullstackPrompt(e) {
            e.preventDefault();
            
            // 获取任务ID
            const taskCard = e.target.closest('.task-card');
            const taskId = taskCard.querySelector('.task-id').textContent;
            const taskTitle = taskCard.querySelector('.task-title').textContent;
            
            // 构建提示词（示例）
            const prompt = `# 全栈工程师任务提示词

## 任务信息
- 任务ID: ${taskId}
- 任务名称: ${taskTitle}
- 分配给: Fullstack Engineer AI

## 任务要求
请按照以下步骤完成任务：
1. 阅读任务详情和技术规范
2. 设计技术方案
3. 编写高质量代码
4. 编写单元测试（覆盖率≥85%）
5. 提交代码审查
6. 生成完成报告

## 代码规范
- 遵循项目代码规范
- 添加必要的注释
- 错误处理完善
- 性能优化考虑

## 交付物
- 源代码
- 单元测试
- 技术文档
- 完成报告`;

            // 复制到剪贴板
            navigator.clipboard.writeText(prompt).then(() => {
                const button = e.target;
                const originalText = button.textContent;
                button.textContent = '✓ 已复制到剪贴板';
                button.style.background = 'var(--noir-graphite)';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = 'var(--noir-ink)';
                }, 2000);
            }).catch(err => {
                console.error('复制失败:', err);
                alert('复制失败，请手动复制');
            });
        }

        // 选择对话
        function selectFullstackConversation(id) {
            document.querySelectorAll('.fullstack-complete-module .conversation-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.conversation-item').classList.add('active');
        }

        // 切换文档分类
        function toggleFullstackCategory(e) {
            const items = e.target.nextElementSibling;
            items.classList.toggle('active');
        }

        // 选择文档
        function selectFullstackDoc(e) {
            document.querySelectorAll('.fullstack-complete-module .doc-item').forEach(item => {
                item.classList.remove('active');
            });
            e.target.classList.add('active');
        }
    
</script>

    <!-- ==================== 任务所·FLOW FOOTER ==================== -->
    <footer class="taskflow-footer">
        <div class="footer-content">
            
            <!-- 上部分：品牌与链接 -->
            <div class="footer-main">
                
                <!-- 品牌区 -->
                <div class="footer-brand">
                    <div class="footer-logo">任务所·Flow</div>
                    <div class="footer-tagline">
                        始于对话，成于流程
                        <div class="footer-tagline-en">Start with dialogue, finish with process</div>
                    </div>
                    <div class="footer-tagline">
                        AI驱动的智能协作编排系统，让开发流程更加高效流畅
                    </div>
                </div>

                <!-- 产品列 -->
                <div class="footer-column">
                    <div class="footer-column-title">产品矩阵</div>
                    <a href="#" class="footer-link">架构师AI</a>
                    <a href="#" class="footer-link">全栈工程师AI</a>
                    <a href="#" class="footer-link">DevOps工程师</a>
                    <a href="#" class="footer-link">Noah代码管家</a>
                    <a href="#" class="footer-link">
                        实时脉搏
                        <span class="footer-link-badge">NEW</span>
                    </a>
                </div>

                <!-- 资源列 -->
                <div class="footer-column">
                    <div class="footer-column-title">开发资源</div>
                    <a href="#" class="footer-link">使用文档</a>
                    <a href="#" class="footer-link">API参考</a>
                    <a href="#" class="footer-link">架构指南</a>
                    <a href="#" class="footer-link">最佳实践</a>
                    <a href="#" class="footer-link">案例研究</a>
                </div>

                <!-- 关于列 -->
                <div class="footer-column">
                    <div class="footer-column-title">关于我们</div>
                    <a href="#" class="footer-link">产品介绍</a>
                    <a href="#" class="footer-link">团队成员</a>
                    <a href="#" class="footer-link">技术博客</a>
                    <a href="#" class="footer-link">媒体资源</a>
                    <a href="#" class="footer-link">联系方式</a>
                </div>

                <!-- 订阅区 -->
                <div class="footer-subscribe">
                    <div class="footer-subscribe-title">订阅更新</div>
                    <div class="footer-subscribe-desc">
                        订阅邮件通知，第一时间了解新功能和产品动态
                    </div>
                    <form class="subscribe-form" onsubmit="handleSubscribe(event)">
                        <input 
                            type="email" 
                            class="subscribe-input" 
                            placeholder="输入您的邮箱"
                            required
                        >
                        <button type="submit" class="subscribe-button">订阅</button>
                    </form>
                </div>
            </div>

            <!-- 中部分：统计数据 -->
            <div class="footer-stats">
                <div class="stat-item">
                    <div class="stat-value">10,000+</div>
                    <div class="stat-label">活跃项目</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">50,000+</div>
                    <div class="stat-label">完成任务</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">99.8%</div>
                    <div class="stat-label">系统在线率</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">7×24</div>
                    <div class="stat-label">AI在线支持</div>
                </div>
            </div>

            <!-- 下部分：版权与备案 -->
            <div class="footer-bottom">
                <div class="footer-copyright">
                    <div class="copyright-text">
                        © 2025 任务所·Flow 版权所有
                    </div>
                    <div class="copyright-links">
                        <a href="#" class="copyright-link">隐私政策</a>
                        <a href="#" class="copyright-link">服务条款</a>
                        <a href="#" class="copyright-link">Cookie设置</a>
                        <a href="#" class="copyright-link">安全中心</a>
                    </div>
                </div>

                <div class="footer-meta">
                    <div class="meta-item">
                        <span class="meta-badge">v2.1.0</span>
                    </div>
                    <div class="meta-item">
                        精密构建
                    </div>
                    <div class="meta-item">
                        Claude 驱动
                    </div>
                </div>
            </div>

        </div>
    </footer>

    <script>
        // Footer订阅表单处理
        function handleSubscribe(event) {
            event.preventDefault();
            const form = event.target;
            const email = form.querySelector('.subscribe-input').value;
            
            // 这里可以添加实际的订阅逻辑
            console.log('订阅邮箱:', email);
            
            // 显示成功提示
            alert('感谢订阅！我们会及时向您推送最新功能和产品动态。');
            
            // 重置表单
            form.reset();
        }
    </script>

</body>
</html>


