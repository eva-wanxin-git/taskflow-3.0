<!-- 这是原版架构师模块的完整代码片段 -->
<!-- CSS部分 -->
<style>
.architect-module {
    max-width: 1600px;
    margin: 0 auto 48px auto;
    background: var(--blanc-pure);
    border: 1px solid var(--blanc-mist);
    height: 700px;
    display: flex;
    flex-direction: column;
}

/* 模块头部 */
.module-header {
    padding: 32px 40px;
    border-bottom: 1px solid var(--blanc-mist);
}

.header-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
}

.module-title {
    font-family: var(--font-secondary);
    font-size: var(--text-2xl);
    font-weight: var(--weight-light);
    color: var(--noir-ink);
    letter-spacing: -0.02em;
}

.status-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 6px 16px;
    border: 1px solid var(--noir-silver);
    font-size: var(--text-xs);
    font-weight: var(--weight-medium);
    color: var(--noir-charcoal);
}

.status-dot-green {
    width: 6px;
    height: 6px;
    background: #4A7C59;
    animation: pulse-green 2s ease-in-out infinite;
}

@keyframes pulse-green {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.6; transform: scale(0.9); }
}

.architect-info {
    display: flex;
    align-items: center;
    gap: 24px;
    padding: 20px;
    background: var(--blanc-snow);
    border: 1px solid var(--blanc-mist);
}

.info-section {
    display: flex;
    align-items: center;
    gap: 16px;
}

.architect-avatar {
    width: 48px;
    height: 48px;
    background: var(--noir-ink);
    color: var(--blanc-pure);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-base);
    font-weight: var(--weight-medium);
}

.architect-details {
    flex: 1;
}

.architect-name {
    font-size: var(--text-base);
    font-weight: var(--weight-semibold);
    color: var(--noir-charcoal);
    margin-bottom: 4px;
}

.architect-meta {
    font-size: var(--text-xs);
    color: var(--noir-silver);
}

.quick-stats {
    display: flex;
    gap: 32px;
    padding-left: 32px;
    border-left: 1px solid var(--blanc-mist);
}

.stat-item {
    text-align: center;
}

.stat-value-arch {
    font-size: var(--text-xl);
    font-weight: var(--weight-light);
    color: var(--noir-ink);
    margin-bottom: 4px;
}

.stat-label-arch {
    font-size: var(--text-xs);
    color: var(--noir-silver);
}

/* Tab导航 */
.tab-navigation {
    display: flex;
    border-bottom: 1px solid var(--blanc-mist);
    background: var(--blanc-snow);
}

.tab-item {
    padding: 16px 32px;
    font-size: var(--text-sm);
    font-weight: var(--weight-medium);
    color: var(--noir-silver);
    background: transparent;
    border: none;
    border-bottom: 2px solid transparent;
    cursor: pointer;
    transition: all 0.3s ease;
}

.tab-item:hover {
    color: var(--noir-graphite);
    background: var(--blanc-pearl);
}

.tab-item.active {
    color: var(--noir-ink);
    background: var(--blanc-pure);
    border-bottom-color: var(--noir-ink);
}

.tab-badge {
    display: inline-block;
    margin-left: 8px;
    padding: 2px 8px;
    font-size: 11px;
    font-weight: var(--weight-semibold);
    background: var(--blanc-mist);
    color: var(--noir-steel);
}

.tab-item.active .tab-badge {
    background: var(--noir-ink);
    color: var(--blanc-pure);
}

/* Tab内容 */
.tab-content-wrapper {
    flex: 1;
    overflow: hidden;
}

.tab-pane {
    display: none;
    height: 100%;
}

.tab-pane.active {
    display: flex;
}

/* 事件流 */
.event-timeline {
    flex: 1;
    overflow-y: auto;
    padding: 40px;
}

.timeline-filters {
    display: flex;
    gap: 12px;
    margin-bottom: 32px;
    padding-bottom: 24px;
    border-bottom: 1px solid var(--blanc-mist);
}

.filter-chip {
    padding: 8px 16px;
    font-size: var(--text-sm);
    border: 1px solid var(--blanc-cloud);
    background: var(--blanc-pure);
    color: var(--noir-graphite);
    cursor: pointer;
    transition: all 0.3s ease;
}

.filter-chip:hover {
    border-color: var(--noir-steel);
}

.filter-chip.active {
    background: var(--noir-ink);
    color: var(--blanc-pure);
    border-color: var(--noir-ink);
}

.timeline-item {
    position: relative;
    padding-left: 40px;
    padding-bottom: 32px;
}

.timeline-item::before {
    content: '';
    position: absolute;
    left: 11px;
    top: 24px;
    bottom: 0;
    width: 1px;
    background: var(--blanc-mist);
}

.timeline-item:last-child::before {
    display: none;
}

.timeline-marker {
    position: absolute;
    left: 0;
    top: 0;
    width: 24px;
    height: 24px;
    border: 2px solid var(--noir-ink);
    background: var(--blanc-pure);
    display: flex;
    align-items: center;
    justify-content: center;
}

.event-card-arch {
    background: var(--blanc-snow);
    border: 1px solid var(--blanc-mist);
    padding: 24px;
    transition: all 0.3s ease;
}

.event-card-arch:hover {
    box-shadow: var(--shadow-sm);
    transform: translateX(4px);
}

.event-header-arch {
    display: flex;
    justify-content: space-between;
    align-items: start;
    margin-bottom: 12px;
}

.event-title-arch {
    font-size: var(--text-base);
    font-weight: var(--weight-semibold);
    color: var(--noir-charcoal);
    margin-bottom: 6px;
}

.event-meta-arch {
    font-size: var(--text-xs);
    color: var(--noir-silver);
}

.event-time-arch {
    font-size: var(--text-xs);
    color: var(--noir-silver);
    white-space: nowrap;
}

.event-description-arch {
    font-size: var(--text-sm);
    color: var(--noir-steel);
    line-height: var(--leading-relaxed);
    margin-top: 12px;
}

.event-tags-arch {
    display: flex;
    gap: 8px;
    margin-top: 16px;
}

.event-tag-arch {
    padding: 4px 12px;
    font-size: 11px;
    border: 1px solid var(--blanc-cloud);
    color: var(--noir-graphite);
}

/* 提示词面板 */
.prompt-panel {
    flex: 1;
    overflow-y: auto;
    padding: 40px;
}

.prompt-container {
    max-width: 900px;
    margin: 0 auto;
}

.prompt-header {
    margin-bottom: 32px;
    padding-bottom: 24px;
    border-bottom: 1px solid var(--blanc-mist);
}

.prompt-title {
    font-family: var(--font-secondary);
    font-size: var(--text-2xl);
    font-weight: var(--weight-light);
    color: var(--noir-ink);
    margin-bottom: 12px;
}

.prompt-meta {
    display: flex;
    gap: 24px;
    font-size: var(--text-sm);
    color: var(--noir-silver);
}

.prompt-content {
    background: var(--blanc-snow);
    border: 1px solid var(--blanc-mist);
    padding: 32px;
    margin-bottom: 24px;
}

.prompt-text {
    font-family: var(--font-mono);
    font-size: var(--text-sm);
    line-height: var(--leading-relaxed);
    color: var(--noir-graphite);
    white-space: pre-wrap;
    max-height: 600px;
    overflow-y: auto;
}

.copy-button {
    width: 100%;
    padding: 16px 32px;
    font-size: var(--text-base);
    font-weight: var(--weight-medium);
    color: var(--blanc-pure);
    background: var(--noir-ink);
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
}

.copy-button:hover {
    background: var(--noir-charcoal);
}

.copy-button:active {
    transform: scale(0.98);
}

/* 对话历史 */
.conversation-layout {
    display: flex;
    height: 100%;
}

.conversation-list {
    width: 380px;
    border-right: 1px solid var(--blanc-mist);
    background: var(--blanc-snow);
    display: flex;
    flex-direction: column;
}

.conversation-search {
    padding: 20px 20px 16px 20px;
    border-bottom: 1px solid var(--blanc-mist);
}

.search-input {
    width: 100%;
    padding: 12px 16px;
    border: 1px solid var(--blanc-cloud);
    font-size: var(--text-sm);
    background: var(--blanc-pure);
    color: var(--noir-graphite);
}

.search-input:focus {
    outline: none;
    border-color: var(--noir-silver);
}

.conversation-items {
    flex: 1;
    overflow-y: auto;
}

.conversation-item-arch {
    padding: 20px;
    border-bottom: 1px solid var(--blanc-mist);
    cursor: pointer;
    transition: all 0.3s ease;
}

.conversation-item-arch:hover {
    background: var(--blanc-pearl);
}

.conversation-item-arch.active {
    background: var(--blanc-pure);
    border-left: 2px solid var(--noir-ink);
}

.conversation-item-header-arch {
    display: flex;
    justify-content: space-between;
    align-items: start;
    margin-bottom: 8px;
}

.conversation-item-title-arch {
    font-size: var(--text-sm);
    font-weight: var(--weight-semibold);
    color: var(--noir-charcoal);
}

.conversation-item-time-arch {
    font-size: 11px;
    color: var(--noir-silver);
}

.conversation-item-preview {
    font-size: var(--text-sm);
    color: var(--noir-steel);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-bottom: 8px;
}

.conversation-item-meta-arch {
    display: flex;
    gap: 16px;
    font-size: 11px;
    color: var(--noir-silver);
}

.conversation-detail {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: var(--blanc-pure);
}

.detail-header {
    padding: 24px 32px;
    border-bottom: 1px solid var(--blanc-mist);
}

.detail-title {
    font-size: var(--text-xl);
    font-weight: var(--weight-semibold);
    color: var(--noir-ink);
    margin-bottom: 12px;
}

.detail-meta {
    display: flex;
    gap: 24px;
    font-size: var(--text-sm);
    color: var(--noir-steel);
}

.messages-container {
    flex: 1;
    overflow-y: auto;
    padding: 32px;
}

.message {
    display: flex;
    gap: 16px;
    margin-bottom: 32px;
}

.message-avatar {
    width: 40px;
    height: 40px;
    flex-shrink: 0;
    background: var(--noir-ink);
    color: var(--blanc-pure);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-sm);
    font-weight: var(--weight-medium);
}

.message-avatar.user {
    background: var(--noir-graphite);
}

.message-content {
    flex: 1;
}

.message-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 8px;
}

.message-sender {
    font-size: var(--text-sm);
    font-weight: var(--weight-semibold);
    color: var(--noir-charcoal);
}

.message-time {
    font-size: var(--text-xs);
    color: var(--noir-silver);
}

.message-text {
    font-size: var(--text-sm);
    color: var(--noir-graphite);
    line-height: var(--leading-relaxed);
    padding: 16px 20px;
    background: var(--blanc-snow);
    border: 1px solid var(--blanc-mist);
}

.message-text pre {
    background: var(--noir-ink);
    color: var(--blanc-pure);
    padding: 16px;
    margin: 16px 0;
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    overflow-x: auto;
}

.message-text strong {
    font-weight: var(--weight-semibold);
    color: var(--noir-charcoal);
}

/* 空状态 */
.empty-state {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px;
    text-align: center;
}

.empty-title {
    font-size: var(--text-lg);
    font-weight: var(--weight-medium);
    color: var(--noir-charcoal);
    margin-bottom: 8px;
}

.empty-description {
    font-size: var(--text-sm);
    color: var(--noir-silver);
}
</style>

<!-- HTML部分 -->
<div class="architect-module">
    <!-- 模块头部 -->
    <div class="module-header">
        <div class="header-row">
            <h1 class="module-title">架构师工作台</h1>
            <span class="status-badge">
                <span class="status-dot-green"></span>
                在线
            </span>
        </div>

        <div class="architect-info">
            <div class="info-section">
                <div class="architect-avatar">AI</div>
                <div class="architect-details">
                    <div class="architect-name">AI Architect</div>
                    <div class="architect-meta">Expert Level · 接手: 2025-11-18 20:00 · 工作时长: 1天6小时</div>
                </div>
            </div>
            <div class="quick-stats">
                <div class="stat-item">
                    <div class="stat-value-arch">125K</div>
                    <div class="stat-label-arch">Token已用</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value-arch">v4.0</div>
                    <div class="stat-label-arch">提示词</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value-arch">89</div>
                    <div class="stat-label-arch">事件</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tab导航 -->
    <div class="tab-navigation">
        <button class="tab-item active" onclick="switchTab('events')">
            事件流
            <span class="tab-badge">89</span>
        </button>
        <button class="tab-item" onclick="switchTab('prompt')">
            认命指令
        </button>
        <button class="tab-item" onclick="switchTab('conversations')">
            对话历史
            <span class="tab-badge">12</span>
        </button>
    </div>

    <!-- Tab内容 -->
    <div class="tab-content-wrapper">
        <!-- Tab 1: 事件流 -->
        <div id="events" class="tab-pane active">
            <div class="event-timeline">
                <div class="timeline-filters">
                    <button class="filter-chip active">全部</button>
                    <button class="filter-chip">今天</button>
                    <button class="filter-chip">本周</button>
                    <button class="filter-chip">决策</button>
                    <button class="filter-chip">任务</button>
                    <button class="filter-chip">交接</button>
                </div>

                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="event-card-arch">
                        <div class="event-header-arch">
                            <div>
                                <div class="event-title-arch">任务完成: Dashboard架构重构</div>
                                <div class="event-meta-arch">AI Architect · TASK-045</div>
                            </div>
                            <div class="event-time-arch">2025-11-19 14:30</div>
                        </div>
                        <div class="event-description-arch">
                            完成了Dashboard模块的完整重构，采用模块化架构，拆分为7个独立组件。提交了完成报告，等待审查。
                        </div>
                        <div class="event-tags-arch">
                            <span class="event-tag-arch">架构重构</span>
                            <span class="event-tag-arch">Dashboard</span>
                            <span class="event-tag-arch">已完成</span>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="event-card-arch">
                        <div class="event-header-arch">
                            <div>
                                <div class="event-title-arch">记录架构决策: ADR-012 采用事件驱动架构</div>
                                <div class="event-meta-arch">AI Architect · 决策</div>
                            </div>
                            <div class="event-time-arch">2025-11-19 11:30</div>
                        </div>
                        <div class="event-description-arch">
                            经过技术调研和团队讨论，决定采用事件驱动架构来处理系统间的异步通信。记录了决策背景、备选方案和实施计划。
                        </div>
                        <div class="event-tags-arch">
                            <span class="event-tag-arch">ADR</span>
                            <span class="event-tag-arch">架构决策</span>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="event-card-arch">
                        <div class="event-header-arch">
                            <div>
                                <div class="event-title-arch">发起任务: API集成开发</div>
                                <div class="event-meta-arch">AI Architect · TASK-048</div>
                            </div>
                            <div class="event-time-arch">2025-11-18 16:00</div>
                        </div>
                        <div class="event-description-arch">
                            创建了API集成开发任务，需要集成8个外部API模块，包括Notion、Claude、知识图谱等。预估工时6.5小时。
                        </div>
                        <div class="event-tags-arch">
                            <span class="event-tag-arch">API开发</span>
                            <span class="event-tag-arch">集成</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 2: 认命指令（提示词） -->
        <div id="prompt" class="tab-pane">
            <div class="prompt-panel">
                <div class="prompt-container">
                    <div class="prompt-header">
                        <h2 class="prompt-title">架构师认命指令</h2>
                        <div class="prompt-meta">
                            <span>版本: v4.0 (看板优先版)</span>
                            <span>字数: 8,247字</span>
                            <span>最后修改: 2天前</span>
                        </div>
                    </div>

                    <div class="prompt-content">
                        <pre class="prompt-text"># 架构师AI System Prompt v4.0 (看板优先版)

## 首要职责（NO.1优先级）
你的首要工作不是写代码，而是维护项目的真实地图：
1. docs/tasks/task-board.md - 任务看板（唯一真相）
2. docs/arch/ - 架构文档</pre>
                    </div>

                    <button class="copy-button" onclick="copyPrompt()">
                        复制完整提示词
                    </button>
                </div>
            </div>
        </div>

        <!-- Tab 3: 对话历史 -->
        <div id="conversations" class="tab-pane">
            <div class="conversation-layout">
                <div class="conversation-list">
                    <div class="conversation-search">
                        <input type="text" class="search-input" placeholder="搜索对话...">
                    </div>
                    <div class="conversation-items">
                        <div class="conversation-item-arch active" onclick="selectConversation(1)">
                            <div class="conversation-item-header-arch">
                                <div class="conversation-item-title-arch">Dashboard架构重构</div>
                                <div class="conversation-item-time-arch">2025-11-19 14:30</div>
                            </div>
                            <div class="conversation-item-preview">
                                分析了Dashboard的架构问题，给出了3个重构方案...
                            </div>
                            <div class="conversation-item-meta-arch">
                                <span>6条消息</span>
                                <span>1h 15min</span>
                            </div>
                        </div>

                        <div class="conversation-item-arch" onclick="selectConversation(2)">
                            <div class="conversation-item-header-arch">
                                <div class="conversation-item-title-arch">API集成方案讨论</div>
                                <div class="conversation-item-time-arch">2025-11-18 10:00</div>
                            </div>
                            <div class="conversation-item-preview">
                                讨论了如何集成8个API模块，解决了CORS问题...
                            </div>
                            <div class="conversation-item-meta-arch">
                                <span>12条消息</span>
                                <span>2h 30min</span>
                            </div>
                        </div>

                        <div class="conversation-item-arch" onclick="selectConversation(3)">
                            <div class="conversation-item-header-arch">
                                <div class="conversation-item-title-arch">知识库数据库设计</div>
                                <div class="conversation-item-time-arch">2025-11-17 15:20</div>
                            </div>
                            <div class="conversation-item-preview">
                                设计了Neo4j数据库结构，包含知识节点...
                            </div>
                            <div class="conversation-item-meta-arch">
                                <span>8条消息</span>
                                <span>45min</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="conversation-detail">
                    <div class="detail-header">
                        <h2 class="detail-title">Dashboard架构重构</h2>
                        <div class="detail-meta">
                            <span>2025-11-18 22:30</span>
                            <span>6条消息</span>
                            <span>1h 15min</span>
                            <span>25,000 tokens</span>
                        </div>
                    </div>

                    <div class="messages-container">
                        <div class="message">
                            <div class="message-avatar user">U</div>
                            <div class="message-content">
                                <div class="message-header">
                                    <span class="message-sender">用户</span>
                                    <span class="message-time">22:30</span>
                                </div>
                                <div class="message-text">
                                    帮我分析一下当前Dashboard的架构问题，我觉得代码太混乱了，想做个重构。
                                </div>
                            </div>
                        </div>

                        <div class="message">
                            <div class="message-avatar">AI</div>
                            <div class="message-content">
                                <div class="message-header">
                                    <span class="message-sender">AI Architect</span>
                                    <span class="message-time">22:32</span>
                                </div>
                                <div class="message-text">
                                    好的，我来帮你做一次完整的架构分析。首先让我查看一下当前的代码结构...<br><br>
                                    
                                    <strong>当前架构问题诊断：</strong><br><br>
                                    
                                    1. 组件耦合度过高<br>
                                    - Dashboard.tsx包含了3000+行代码<br>
                                    - 所有功能都写在一个文件里<br>
                                    - 状态管理混乱，props drilling严重<br><br>
                                    
                                    2. 缺乏模块化设计<br>
                                    - 看板、事件流、对话历史都是内联实现<br>
                                    - 无法独立开发和测试<br>
                                    - 代码复用率低<br><br>
                                    
                                    3. 性能问题<br>
                                    - 没有合理的懒加载<br>
                                    - 重渲染频繁<br>
                                    - 大数据列表没有虚拟滚动<br><br>
                                    
                                    我建议采用模块化架构，将Dashboard拆分为7个独立模块...
                                </div>
                            </div>
                        </div>

                        <div class="message">
                            <div class="message-avatar user">U</div>
                            <div class="message-content">
                                <div class="message-header">
                                    <span class="message-sender">用户</span>
                                    <span class="message-time">22:35</span>
                                </div>
                                <div class="message-text">
                                    听起来不错！具体怎么拆分？能给我个详细方案吗？
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Tab切换
function switchTab(tabName) {
    document.querySelectorAll('.tab-item').forEach(item => {
        item.classList.remove('active');
    });
    document.querySelectorAll('.tab-pane').forEach(pane => {
        pane.classList.remove('active');
    });

    event.target.closest('.tab-item').classList.add('active');
    document.getElementById(tabName).classList.add('active');
}

// 复制提示词
function copyPrompt() {
    const promptText = document.querySelector('.prompt-text').textContent;
    navigator.clipboard.writeText(promptText).then(() => {
        const button = event.target;
        const originalText = button.textContent;
        button.textContent = '已复制到剪贴板';
        button.style.background = 'var(--noir-graphite)';
        setTimeout(() => {
            button.textContent = originalText;
            button.style.background = 'var(--noir-ink)';
        }, 2000);
    });
}

// 选择对话
function selectConversation(id) {
    document.querySelectorAll('.conversation-item-arch').forEach(item => {
        item.classList.remove('active');
    });
    event.target.closest('.conversation-item-arch').classList.add('active');
}
</script>

