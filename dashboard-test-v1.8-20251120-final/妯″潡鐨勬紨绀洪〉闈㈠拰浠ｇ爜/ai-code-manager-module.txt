<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noah - AI代码管家 - TASKFLOW</title>
    
    <style>
        /* ==================== 白色奢华美学系统 ==================== */
        :root {
            /* 白色光谱 */
            --blanc-pure: #FFFFFF;
            --blanc-snow: #FAFBFC;
            --blanc-pearl: #F6F8FA;
            --blanc-silk: #F0F3F5;
            --blanc-mist: #E8ECEF;
            --blanc-cloud: #DFE4E8;

            /* 黑色层次 */
            --noir-ink: #0A0F14;
            --noir-charcoal: #1A2027;
            --noir-graphite: #2E3742;
            --noir-steel: #495057;
            --noir-silver: #6C757D;
            --noir-ash: #8B95A1;

            /* 阴影 */
            --shadow-xs: 0 1px 3px rgba(0, 0, 0, 0.04);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);

            /* 字体系统 */
            --font-primary: 'SF Pro Display', 'Helvetica Neue', -apple-system, system-ui, sans-serif;
            --font-secondary: 'Playfair Display', Georgia, serif;
            --font-mono: 'SF Mono', Monaco, monospace;

            /* 字号 */
            --text-xs: 12px;
            --text-sm: 14px;
            --text-base: 16px;
            --text-lg: 18px;
            --text-xl: 21px;
            --text-2xl: 28px;
            --text-3xl: 36px;

            /* 字重 */
            --weight-light: 300;
            --weight-regular: 400;
            --weight-medium: 500;
            --weight-semibold: 600;

            /* 行高 */
            --leading-tight: 1.2;
            --leading-normal: 1.5;
            --leading-relaxed: 1.75;

            /* 代码主题色（唯一的功能色） */
            --code-green: #4A7C59;
            --code-orange: #C17A40;
            --code-red: #A84848;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-primary);
            background: var(--blanc-pearl);
            color: var(--noir-graphite);
            line-height: var(--leading-normal);
            padding: 40px;
        }

        .code-manager-module {
            max-width: 1600px;
            margin: 0 auto;
            background: var(--blanc-pure);
            border: 1px solid var(--blanc-mist);
            height: calc(100vh - 80px);
            display: flex;
            flex-direction: column;
        }

        /* ==================== 模块头部 ==================== */
        .module-header {
            padding: 32px 40px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .module-title {
            font-family: var(--font-secondary);
            font-size: var(--text-2xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            letter-spacing: -0.02em;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 16px;
            border: 1px solid var(--noir-silver);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            background: var(--code-green);
            animation: pulse-green 2s ease-in-out infinite;
        }

        @keyframes pulse-green {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(0.9); }
        }

        /* ==================== 代码统计卡片 ==================== */
        .code-stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        .stat-card {
            padding: 20px;
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: var(--blanc-pearl);
            box-shadow: var(--shadow-sm);
        }

        .stat-value {
            font-family: var(--font-mono);
            font-size: var(--text-3xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            margin-bottom: 8px;
            letter-spacing: -0.03em;
        }

        .stat-label {
            font-size: var(--text-sm);
            color: var(--noir-silver);
            font-weight: var(--weight-regular);
        }

        .stat-change {
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            color: var(--noir-ash);
            margin-top: 4px;
        }

        .stat-change.positive {
            color: var(--code-green);
        }

        .stat-change.negative {
            color: var(--code-red);
        }

        /* ==================== Tab导航 ==================== */
        .tab-navigation {
            display: flex;
            border-bottom: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
        }

        .tab-item {
            padding: 16px 32px;
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-silver);
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-item:hover {
            color: var(--noir-graphite);
            background: var(--blanc-pearl);
        }

        .tab-item.active {
            color: var(--noir-ink);
            background: var(--blanc-pure);
            border-bottom-color: var(--noir-ink);
        }

        .tab-badge {
            display: inline-block;
            margin-left: 8px;
            padding: 2px 8px;
            font-size: 11px;
            font-weight: var(--weight-semibold);
            background: var(--blanc-mist);
            color: var(--noir-steel);
            font-family: var(--font-mono);
        }

        .tab-item.active .tab-badge {
            background: var(--noir-ink);
            color: var(--blanc-pure);
        }

        /* ==================== Tab内容 ==================== */
        .tab-content-wrapper {
            flex: 1;
            overflow: hidden;
        }

        .tab-pane {
            display: none;
            height: 100%;
            flex-direction: column;
        }

        .tab-pane.active {
            display: flex;
        }

        /* ==================== 代码索引页面 ==================== */
        .search-header {
            padding: 24px 40px;
            background: var(--blanc-snow);
            border-bottom: 1px solid var(--blanc-mist);
        }

        .search-box-wrapper {
            position: relative;
            max-width: 800px;
        }

        .search-box {
            width: 100%;
            padding: 16px 48px 16px 20px;
            font-size: var(--text-base);
            font-family: var(--font-mono);
            background: var(--blanc-pure);
            border: 2px solid var(--blanc-mist);
            color: var(--noir-ink);
            transition: all 0.3s ease;
        }

        .search-box:focus {
            outline: none;
            border-color: var(--noir-ink);
            box-shadow: var(--shadow-sm);
        }

        .search-box::placeholder {
            color: var(--noir-ash);
            font-family: var(--font-mono);
        }

        .search-icon {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .search-filters {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        .filter-chip {
            padding: 6px 12px;
            font-size: var(--text-xs);
            font-family: var(--font-mono);
            border: 1px solid var(--blanc-cloud);
            background: var(--blanc-pure);
            color: var(--noir-graphite);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-chip:hover {
            border-color: var(--noir-steel);
        }

        .filter-chip.active {
            background: var(--noir-ink);
            color: var(--blanc-pure);
            border-color: var(--noir-ink);
        }

        /* ==================== 代码列表 ==================== */
        .code-list {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
        }

        .code-directory {
            margin-bottom: 40px;
        }

        .directory-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            margin-bottom: 16px;
            border-bottom: 1px solid var(--blanc-mist);
        }

        .directory-icon {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .directory-path {
            font-family: var(--font-mono);
            font-size: var(--text-base);
            font-weight: var(--weight-medium);
            color: var(--noir-charcoal);
        }

        .directory-count {
            margin-left: auto;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            color: var(--noir-ash);
        }

        .code-item {
            padding: 20px;
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            margin-bottom: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .code-item:hover {
            background: var(--blanc-pearl);
            box-shadow: var(--shadow-sm);
            transform: translateX(4px);
        }

        .code-item-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 12px;
        }

        .code-filename {
            font-family: var(--font-mono);
            font-size: var(--text-base);
            font-weight: var(--weight-medium);
            color: var(--noir-ink);
        }

        .code-extension {
            padding: 2px 8px;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            background: var(--blanc-mist);
            color: var(--noir-steel);
        }

        .code-lines {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .code-item-meta {
            display: flex;
            gap: 24px;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            color: var(--noir-ash);
        }

        .code-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .code-tag {
            padding: 4px 10px;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            background: var(--blanc-pearl);
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
        }

        /* ==================== 代码详情页面 ==================== */
        .code-detail-view {
            display: flex;
            height: 100%;
        }

        .code-detail-sidebar {
            width: 320px;
            border-right: 1px solid var(--blanc-mist);
            background: var(--blanc-snow);
            overflow-y: auto;
            padding: 32px;
        }

        .detail-section {
            margin-bottom: 32px;
        }

        .detail-section-title {
            font-size: var(--text-sm);
            font-weight: var(--weight-semibold);
            color: var(--noir-charcoal);
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .detail-info-grid {
            display: grid;
            gap: 16px;
        }

        .detail-info-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .detail-info-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
        }

        .detail-info-value {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--noir-ink);
            word-break: break-all;
        }

        .code-detail-main {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
        }

        .code-preview {
            background: var(--noir-ink);
            border: 1px solid var(--noir-charcoal);
            padding: 24px;
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            line-height: var(--leading-relaxed);
            color: var(--blanc-snow);
            overflow-x: auto;
        }

        .code-line {
            display: flex;
            gap: 24px;
        }

        .line-number {
            color: var(--noir-silver);
            user-select: none;
            text-align: right;
            min-width: 40px;
        }

        .line-content {
            flex: 1;
            color: var(--blanc-pearl);
        }

        /* ==================== 变更历史页面 ==================== */
        .changelog-container {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
        }

        .changelog-item {
            position: relative;
            padding-left: 40px;
            padding-bottom: 32px;
        }

        .changelog-item::before {
            content: '';
            position: absolute;
            left: 11px;
            top: 24px;
            bottom: 0;
            width: 1px;
            background: var(--blanc-mist);
        }

        .changelog-item:last-child::before {
            display: none;
        }

        .changelog-marker {
            position: absolute;
            left: 4px;
            top: 4px;
            width: 16px;
            height: 16px;
            background: var(--blanc-pure);
            border: 2px solid var(--noir-ink);
        }

        .changelog-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 24px;
            transition: all 0.3s ease;
        }

        .changelog-card:hover {
            box-shadow: var(--shadow-sm);
        }

        .changelog-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .changelog-time {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .changelog-type {
            padding: 4px 10px;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            border: 1px solid var(--blanc-cloud);
        }

        .changelog-type.added {
            color: var(--code-green);
            border-color: var(--code-green);
        }

        .changelog-type.modified {
            color: var(--code-orange);
            border-color: var(--code-orange);
        }

        .changelog-type.deleted {
            color: var(--code-red);
            border-color: var(--code-red);
        }

        .changelog-description {
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
            margin-bottom: 12px;
        }

        .changelog-files {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .changelog-file {
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            padding: 4px 10px;
            background: var(--blanc-pearl);
            border: 1px solid var(--blanc-cloud);
            color: var(--noir-graphite);
        }

        /* ==================== 冲突检测页面 ==================== */
        .conflict-warning {
            padding: 24px 40px;
            background: var(--blanc-snow);
            border-bottom: 1px solid var(--blanc-mist);
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .warning-icon {
            font-family: var(--font-mono);
            font-size: var(--text-lg);
            color: var(--code-orange);
        }

        .warning-text {
            flex: 1;
        }

        .warning-title {
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
            margin-bottom: 4px;
        }

        .warning-description {
            font-size: var(--text-sm);
            color: var(--noir-steel);
        }

        .conflict-list {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
        }

        .conflict-card {
            background: var(--blanc-snow);
            border: 2px solid var(--code-orange);
            padding: 24px;
            margin-bottom: 20px;
        }

        .conflict-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .conflict-title {
            font-family: var(--font-mono);
            font-size: var(--text-base);
            font-weight: var(--weight-semibold);
            color: var(--noir-ink);
        }

        .conflict-severity {
            padding: 4px 12px;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            font-weight: var(--weight-medium);
            background: var(--code-orange);
            color: var(--blanc-pure);
        }

        .conflict-description {
            font-size: var(--text-sm);
            color: var(--noir-graphite);
            line-height: var(--leading-relaxed);
            margin-bottom: 16px;
        }

        .conflict-files-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-top: 16px;
        }

        .conflict-file-box {
            padding: 16px;
            background: var(--blanc-pearl);
            border: 1px solid var(--blanc-cloud);
        }

        .conflict-file-label {
            font-size: var(--text-xs);
            color: var(--noir-silver);
            margin-bottom: 8px;
        }

        .conflict-file-path {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--noir-ink);
            word-break: break-all;
        }

        /* ==================== 统计分析页面 ==================== */
        .stats-dashboard {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
        }

        .stats-section {
            margin-bottom: 48px;
        }

        .stats-section-title {
            font-family: var(--font-secondary);
            font-size: var(--text-xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            margin-bottom: 24px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .stats-card {
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            padding: 32px;
            text-align: center;
        }

        .stats-card-value {
            font-family: var(--font-mono);
            font-size: var(--text-3xl);
            font-weight: var(--weight-light);
            color: var(--noir-ink);
            margin-bottom: 8px;
        }

        .stats-card-label {
            font-size: var(--text-sm);
            color: var(--noir-silver);
        }

        .language-breakdown {
            margin-top: 32px;
        }

        .language-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--blanc-snow);
            border: 1px solid var(--blanc-mist);
            margin-bottom: 12px;
        }

        .language-name {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            font-weight: var(--weight-medium);
            color: var(--noir-ink);
            min-width: 120px;
        }

        .language-bar {
            flex: 1;
            height: 8px;
            background: var(--blanc-pearl);
            position: relative;
            overflow: hidden;
        }

        .language-bar-fill {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background: var(--noir-ink);
            transition: width 0.6s ease;
        }

        .language-percentage {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--noir-silver);
            min-width: 60px;
            text-align: right;
        }

        /* ==================== 响应式 ==================== */
        @media (max-width: 1200px) {
            .code-stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 20px;
            }

            .code-stats-grid,
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .code-detail-view {
                flex-direction: column;
            }

            .code-detail-sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid var(--blanc-mist);
            }

            .conflict-files-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="code-manager-module">
        <!-- 模块头部 -->
        <div class="module-header">
            <div class="header-row">
                <h1 class="module-title">Noah - AI代码管家</h1>
                <div style="display: flex; align-items: center; gap: 16px;">
                    <div class="status-badge">
                        <span class="status-dot"></span>
                        实时监控中
                    </div>
                    <div style="font-family: var(--font-mono); font-size: var(--text-xs); color: var(--noir-silver); letter-spacing: 0.05em;">
                        "EVERY LINE MATTERS"
                    </div>
                </div>
            </div>

            <!-- 代码统计卡片 -->
            <div class="code-stats-grid">
                <div class="stat-card">
                    <div class="stat-value">3,587</div>
                    <div class="stat-label">总代码行数</div>
                    <div class="stat-change positive">+124 今日</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">47</div>
                    <div class="stat-label">文件总数</div>
                    <div class="stat-change positive">+3 今日</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">8</div>
                    <div class="stat-label">活跃模块</div>
                    <div class="stat-change">无变化</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">2</div>
                    <div class="stat-label">潜在冲突</div>
                    <div class="stat-change negative">需关注</div>
                </div>
            </div>
        </div>

        <!-- Tab导航 -->
        <nav class="tab-navigation">
            <button class="tab-item active" onclick="switchTab(event, 'index')">
                代码索引
                <span class="tab-badge">47</span>
            </button>
            <button class="tab-item" onclick="switchTab(event, 'detail')">
                文件详情
            </button>
            <button class="tab-item" onclick="switchTab(event, 'changelog')">
                变更历史
                <span class="tab-badge">18</span>
            </button>
            <button class="tab-item" onclick="switchTab(event, 'conflicts')">
                冲突检测
                <span class="tab-badge">2</span>
            </button>
            <button class="tab-item" onclick="switchTab(event, 'stats')">
                统计分析
            </button>
        </nav>

        <!-- Tab内容 -->
        <div class="tab-content-wrapper">
            <!-- 代码索引 -->
            <div id="index" class="tab-pane active">
                <div class="search-header">
                    <div class="search-box-wrapper">
                        <input 
                            type="text" 
                            class="search-box" 
                            placeholder="搜索文件名、路径、标签... (支持正则表达式)"
                        >
                        <span class="search-icon">⌘K</span>
                    </div>
                    <div class="search-filters">
                        <button class="filter-chip active">全部</button>
                        <button class="filter-chip">.py</button>
                        <button class="filter-chip">.js</button>
                        <button class="filter-chip">.html</button>
                        <button class="filter-chip">.css</button>
                        <button class="filter-chip">核心</button>
                        <button class="filter-chip">工具</button>
                        <button class="filter-chip">配置</button>
                    </div>
                </div>

                <div class="code-list">
                    <!-- 目录：核心模块 -->
                    <div class="code-directory">
                        <div class="directory-header">
                            <span class="directory-icon">▾</span>
                            <span class="directory-path">/src/core/</span>
                            <span class="directory-count">12 files</span>
                        </div>

                        <div class="code-item">
                            <div class="code-item-header">
                                <span class="code-filename">architect_service.py</span>
                                <span class="code-extension">PY</span>
                                <span class="code-lines">287 lines</span>
                            </div>
                            <div class="code-item-meta">
                                <span>最后修改: 2025-11-19 14:30</span>
                                <span>ID: CORE-001</span>
                                <span>架构师服务主入口</span>
                            </div>
                            <div class="code-tags">
                                <span class="code-tag">核心</span>
                                <span class="code-tag">服务层</span>
                                <span class="code-tag">已索引</span>
                            </div>
                        </div>

                        <div class="code-item">
                            <div class="code-item-header">
                                <span class="code-filename">knowledge_manager.py</span>
                                <span class="code-extension">PY</span>
                                <span class="code-lines">342 lines</span>
                            </div>
                            <div class="code-item-meta">
                                <span>最后修改: 2025-11-19 11:20</span>
                                <span>ID: CORE-002</span>
                                <span>知识库管理器</span>
                            </div>
                            <div class="code-tags">
                                <span class="code-tag">核心</span>
                                <span class="code-tag">数据层</span>
                                <span class="code-tag">已索引</span>
                            </div>
                        </div>

                        <div class="code-item">
                            <div class="code-item-header">
                                <span class="code-filename">task_board.py</span>
                                <span class="code-extension">PY</span>
                                <span class="code-lines">198 lines</span>
                            </div>
                            <div class="code-item-meta">
                                <span>最后修改: 2025-11-18 16:45</span>
                                <span>ID: CORE-003</span>
                                <span>任务看板核心逻辑</span>
                            </div>
                            <div class="code-tags">
                                <span class="code-tag">核心</span>
                                <span class="code-tag">业务层</span>
                                <span class="code-tag">已索引</span>
                            </div>
                        </div>
                    </div>

                    <!-- 目录：API层 -->
                    <div class="code-directory">
                        <div class="directory-header">
                            <span class="directory-icon">▾</span>
                            <span class="directory-path">/src/api/</span>
                            <span class="directory-count">8 files</span>
                        </div>

                        <div class="code-item">
                            <div class="code-item-header">
                                <span class="code-filename">claude_api.py</span>
                                <span class="code-extension">PY</span>
                                <span class="code-lines">156 lines</span>
                            </div>
                            <div class="code-item-meta">
                                <span>最后修改: 2025-11-19 09:15</span>
                                <span>ID: API-001</span>
                                <span>Claude API集成</span>
                            </div>
                            <div class="code-tags">
                                <span class="code-tag">API</span>
                                <span class="code-tag">集成层</span>
                                <span class="code-tag">已索引</span>
                            </div>
                        </div>

                        <div class="code-item">
                            <div class="code-item-header">
                                <span class="code-filename">notion_api.py</span>
                                <span class="code-extension">PY</span>
                                <span class="code-lines">223 lines</span>
                            </div>
                            <div class="code-item-meta">
                                <span>最后修改: 2025-11-18 20:30</span>
                                <span>ID: API-002</span>
                                <span>Notion API集成</span>
                            </div>
                            <div class="code-tags">
                                <span class="code-tag">API</span>
                                <span class="code-tag">集成层</span>
                                <span class="code-tag">已索引</span>
                            </div>
                        </div>
                    </div>

                    <!-- 目录：前端组件 -->
                    <div class="code-directory">
                        <div class="directory-header">
                            <span class="directory-icon">▾</span>
                            <span class="directory-path">/src/components/</span>
                            <span class="directory-count">15 files</span>
                        </div>

                        <div class="code-item">
                            <div class="code-item-header">
                                <span class="code-filename">Dashboard.jsx</span>
                                <span class="code-extension">JSX</span>
                                <span class="code-lines">412 lines</span>
                            </div>
                            <div class="code-item-meta">
                                <span>最后修改: 2025-11-19 15:00</span>
                                <span>ID: UI-001</span>
                                <span>主仪表盘组件</span>
                            </div>
                            <div class="code-tags">
                                <span class="code-tag">前端</span>
                                <span class="code-tag">React</span>
                                <span class="code-tag">已索引</span>
                            </div>
                        </div>

                        <div class="code-item">
                            <div class="code-item-header">
                                <span class="code-filename">TaskCard.jsx</span>
                                <span class="code-extension">JSX</span>
                                <span class="code-lines">178 lines</span>
                            </div>
                            <div class="code-item-meta">
                                <span>最后修改: 2025-11-19 10:20</span>
                                <span>ID: UI-002</span>
                                <span>任务卡片组件</span>
                            </div>
                            <div class="code-tags">
                                <span class="code-tag">前端</span>
                                <span class="code-tag">React</span>
                                <span class="code-tag">已索引</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 文件详情 -->
            <div id="detail" class="tab-pane">
                <div class="code-detail-view">
                    <aside class="code-detail-sidebar">
                        <div class="detail-section">
                            <h3 class="detail-section-title">文件信息</h3>
                            <div class="detail-info-grid">
                                <div class="detail-info-item">
                                    <div class="detail-info-label">文件名</div>
                                    <div class="detail-info-value">architect_service.py</div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">文件ID</div>
                                    <div class="detail-info-value">CORE-001</div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">路径</div>
                                    <div class="detail-info-value">/src/core/architect_service.py</div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">代码行数</div>
                                    <div class="detail-info-value">287</div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">文件大小</div>
                                    <div class="detail-info-value">8.4 KB</div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">创建时间</div>
                                    <div class="detail-info-value">2025-11-17 10:00</div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">最后修改</div>
                                    <div class="detail-info-value">2025-11-19 14:30</div>
                                </div>
                            </div>
                        </div>

                        <div class="detail-section">
                            <h3 class="detail-section-title">索引标签</h3>
                            <div class="code-tags">
                                <span class="code-tag">核心</span>
                                <span class="code-tag">服务层</span>
                                <span class="code-tag">已索引</span>
                                <span class="code-tag">Python</span>
                            </div>
                        </div>

                        <div class="detail-section">
                            <h3 class="detail-section-title">依赖关系</h3>
                            <div class="detail-info-grid">
                                <div class="detail-info-item">
                                    <div class="detail-info-label">导入自</div>
                                    <div class="detail-info-value">
                                        knowledge_manager.py<br>
                                        task_board.py<br>
                                        claude_api.py
                                    </div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">被导入</div>
                                    <div class="detail-info-value">
                                        main.py<br>
                                        api_router.py
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="detail-section">
                            <h3 class="detail-section-title">变更记录</h3>
                            <div class="detail-info-grid">
                                <div class="detail-info-item">
                                    <div class="detail-info-label">修改次数</div>
                                    <div class="detail-info-value">12次</div>
                                </div>
                                <div class="detail-info-item">
                                    <div class="detail-info-label">最近变更</div>
                                    <div class="detail-info-value">新增process_command方法</div>
                                </div>
                            </div>
                        </div>
                    </aside>

                    <main class="code-detail-main">
                        <h2 style="font-size: var(--text-xl); font-weight: var(--weight-semibold); color: var(--noir-ink); margin-bottom: 24px;">
                            代码预览
                        </h2>

                        <div class="code-preview">
                            <div class="code-line">
                                <span class="line-number">1</span>
                                <span class="line-content">"""</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">2</span>
                                <span class="line-content">架构师服务主入口</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">3</span>
                                <span class="line-content">负责协调各个子系统的运作</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">4</span>
                                <span class="line-content">"""</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">5</span>
                                <span class="line-content"></span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">6</span>
                                <span class="line-content">from typing import Dict, List, Optional</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">7</span>
                                <span class="line-content">from datetime import datetime</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">8</span>
                                <span class="line-content"></span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">9</span>
                                <span class="line-content">from .knowledge_manager import KnowledgeManager</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">10</span>
                                <span class="line-content">from .task_board import TaskBoard</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">11</span>
                                <span class="line-content">from ..api.claude_api import ClaudeAPI</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">12</span>
                                <span class="line-content"></span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">13</span>
                                <span class="line-content">class ArchitectService:</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">14</span>
                                <span class="line-content">    """架构师服务主类"""</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">15</span>
                                <span class="line-content">    </span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">16</span>
                                <span class="line-content">    def __init__(self):</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">17</span>
                                <span class="line-content">        self.knowledge = KnowledgeManager()</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">18</span>
                                <span class="line-content">        self.task_board = TaskBoard()</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">19</span>
                                <span class="line-content">        self.claude = ClaudeAPI()</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">20</span>
                                <span class="line-content">        </span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">21</span>
                                <span class="line-content">    def process_command(self, command: str) -> Dict:</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">22</span>
                                <span class="line-content">        """处理用户命令"""</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">23</span>
                                <span class="line-content">        # 实现细节...</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">24</span>
                                <span class="line-content">        pass</span>
                            </div>
                        </div>
                    </main>
                </div>
            </div>

            <!-- 变更历史 -->
            <div id="changelog" class="tab-pane">
                <div class="changelog-container">
                    <div class="changelog-item">
                        <div class="changelog-marker"></div>
                        <div class="changelog-card">
                            <div class="changelog-header">
                                <span class="changelog-time">2025-11-19 14:30:25</span>
                                <span class="changelog-type added">新增</span>
                            </div>
                            <div class="changelog-description">
                                在架构师服务中新增process_command方法，用于处理用户的自然语言命令并转换为系统操作
                            </div>
                            <div class="changelog-files">
                                <span class="changelog-file">architect_service.py +45 -2</span>
                                <span class="changelog-file">command_parser.py +87 -0</span>
                            </div>
                        </div>
                    </div>

                    <div class="changelog-item">
                        <div class="changelog-marker"></div>
                        <div class="changelog-card">
                            <div class="changelog-header">
                                <span class="changelog-time">2025-11-19 11:20:15</span>
                                <span class="changelog-type modified">修改</span>
                            </div>
                            <div class="changelog-description">
                                优化知识库管理器的查询性能，使用SQLite FTS5全文搜索替代原有的简单字符串匹配
                            </div>
                            <div class="changelog-files">
                                <span class="changelog-file">knowledge_manager.py +32 -18</span>
                                <span class="changelog-file">database_schema.sql +15 -5</span>
                            </div>
                        </div>
                    </div>

                    <div class="changelog-item">
                        <div class="changelog-marker"></div>
                        <div class="changelog-card">
                            <div class="changelog-header">
                                <span class="changelog-time">2025-11-19 09:15:40</span>
                                <span class="changelog-type added">新增</span>
                            </div>
                            <div class="changelog-description">
                                集成Claude API，实现与Claude Sonnet 4.5的通信功能
                            </div>
                            <div class="changelog-files">
                                <span class="changelog-file">claude_api.py +156 -0</span>
                                <span class="changelog-file">config.py +8 -2</span>
                            </div>
                        </div>
                    </div>

                    <div class="changelog-item">
                        <div class="changelog-marker"></div>
                        <div class="changelog-card">
                            <div class="changelog-header">
                                <span class="changelog-time">2025-11-18 20:30:12</span>
                                <span class="changelog-type modified">修改</span>
                            </div>
                            <div class="changelog-description">
                                修复Notion API同步时的时区问题，统一使用UTC时间戳
                            </div>
                            <div class="changelog-files">
                                <span class="changelog-file">notion_api.py +23 -15</span>
                            </div>
                        </div>
                    </div>

                    <div class="changelog-item">
                        <div class="changelog-marker"></div>
                        <div class="changelog-card">
                            <div class="changelog-header">
                                <span class="changelog-time">2025-11-18 16:45:30</span>
                                <span class="changelog-type modified">修改</span>
                            </div>
                            <div class="changelog-description">
                                重构任务看板的优先级排序算法，综合考虑截止时间、重要性、依赖关系
                            </div>
                            <div class="changelog-files">
                                <span class="changelog-file">task_board.py +67 -43</span>
                                <span class="changelog-file">priority_calculator.py +89 -0</span>
                            </div>
                        </div>
                    </div>

                    <div class="changelog-item">
                        <div class="changelog-marker"></div>
                        <div class="changelog-card">
                            <div class="changelog-header">
                                <span class="changelog-time">2025-11-18 14:20:05</span>
                                <span class="changelog-type deleted">删除</span>
                            </div>
                            <div class="changelog-description">
                                移除废弃的临时缓存系统，统一使用Redis
                            </div>
                            <div class="changelog-files">
                                <span class="changelog-file">temp_cache.py -234</span>
                                <span class="changelog-file">cache_manager.py +45 -12</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 冲突检测 -->
            <div id="conflicts" class="tab-pane">
                <div class="conflict-warning">
                    <span class="warning-icon">⚠</span>
                    <div class="warning-text">
                        <div class="warning-title">检测到2处潜在冲突</div>
                        <div class="warning-description">需要架构师审查并解决，避免影响系统稳定性</div>
                    </div>
                </div>

                <div class="conflict-list">
                    <div class="conflict-card">
                        <div class="conflict-header">
                            <div class="conflict-title">命名冲突: process() 方法</div>
                            <div class="conflict-severity">中等</div>
                        </div>
                        <div class="conflict-description">
                            在architect_service.py和task_board.py中都定义了名为process()的方法，
                            但功能不同。建议重命名为process_command()和process_task()以避免混淆。
                        </div>
                        <div class="conflict-files-grid">
                            <div class="conflict-file-box">
                                <div class="conflict-file-label">文件A</div>
                                <div class="conflict-file-path">/src/core/architect_service.py:45</div>
                            </div>
                            <div class="conflict-file-box">
                                <div class="conflict-file-label">文件B</div>
                                <div class="conflict-file-path">/src/core/task_board.py:78</div>
                            </div>
                        </div>
                    </div>

                    <div class="conflict-card">
                        <div class="conflict-header">
                            <div class="conflict-title">依赖循环: API模块</div>
                            <div class="conflict-severity">高</div>
                        </div>
                        <div class="conflict-description">
                            claude_api.py导入了knowledge_manager.py，
                            而knowledge_manager.py又导入了claude_api.py，形成循环依赖。
                            建议提取共享接口到独立的interface模块。
                        </div>
                        <div class="conflict-files-grid">
                            <div class="conflict-file-box">
                                <div class="conflict-file-label">文件A</div>
                                <div class="conflict-file-path">/src/api/claude_api.py:12</div>
                            </div>
                            <div class="conflict-file-box">
                                <div class="conflict-file-label">文件B</div>
                                <div class="conflict-file-path">/src/core/knowledge_manager.py:8</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 统计分析 -->
            <div id="stats" class="tab-pane">
                <div class="stats-dashboard">
                    <div class="stats-section">
                        <h2 class="stats-section-title">代码规模统计</h2>
                        <div class="stats-grid">
                            <div class="stats-card">
                                <div class="stats-card-value">3,587</div>
                                <div class="stats-card-label">总代码行数</div>
                            </div>
                            <div class="stats-card">
                                <div class="stats-card-value">47</div>
                                <div class="stats-card-label">文件总数</div>
                            </div>
                            <div class="stats-card">
                                <div class="stats-card-value">8</div>
                                <div class="stats-card-label">活跃模块</div>
                            </div>
                            <div class="stats-card">
                                <div class="stats-card-value">2,845</div>
                                <div class="stats-card-label">有效代码行数</div>
                            </div>
                            <div class="stats-card">
                                <div class="stats-card-value">512</div>
                                <div class="stats-card-label">注释行数</div>
                            </div>
                            <div class="stats-card">
                                <div class="stats-card-value">230</div>
                                <div class="stats-card-label">空行</div>
                            </div>
                        </div>
                    </div>

                    <div class="stats-section">
                        <h2 class="stats-section-title">语言分布</h2>
                        <div class="language-breakdown">
                            <div class="language-item">
                                <div class="language-name">Python</div>
                                <div class="language-bar">
                                    <div class="language-bar-fill" style="width: 62%"></div>
                                </div>
                                <div class="language-percentage">62.3%</div>
                            </div>
                            <div class="language-item">
                                <div class="language-name">JavaScript</div>
                                <div class="language-bar">
                                    <div class="language-bar-fill" style="width: 24%"></div>
                                </div>
                                <div class="language-percentage">24.1%</div>
                            </div>
                            <div class="language-item">
                                <div class="language-name">HTML</div>
                                <div class="language-bar">
                                    <div class="language-bar-fill" style="width: 8%"></div>
                                </div>
                                <div class="language-percentage">8.5%</div>
                            </div>
                            <div class="language-item">
                                <div class="language-name">CSS</div>
                                <div class="language-bar">
                                    <div class="language-bar-fill" style="width: 3%"></div>
                                </div>
                                <div class="language-percentage">3.2%</div>
                            </div>
                            <div class="language-item">
                                <div class="language-name">SQL</div>
                                <div class="language-bar">
                                    <div class="language-bar-fill" style="width: 2%"></div>
                                </div>
                                <div class="language-percentage">1.9%</div>
                            </div>
                        </div>
                    </div>

                    <div class="stats-section">
                        <h2 class="stats-section-title">变更活跃度</h2>
                        <div class="stats-grid">
                            <div class="stats-card">
                                <div class="stats-card-value">18</div>
                                <div class="stats-card-label">本周变更</div>
                            </div>
                            <div class="stats-card">
                                <div class="stats-card-value">67</div>
                                <div class="stats-card-label">本月变更</div>
                            </div>
                            <div class="stats-card">
                                <div class="stats-card-value">5</div>
                                <div class="stats-card-label">活跃文件</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab切换功能
        function switchTab(event, tabName) {
            // 移除所有active
            document.querySelectorAll('.tab-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });

            // 添加active
            event.currentTarget.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // 筛选器点击效果
        document.querySelectorAll('.filter-chip').forEach(chip => {
            chip.addEventListener('click', function() {
                this.classList.toggle('active');
            });
        });

        // 代码项点击效果
        document.querySelectorAll('.code-item').forEach(item => {
            item.addEventListener('click', function() {
                // 这里可以添加跳转到详情页的逻辑
                console.log('点击了代码文件');
            });
        });

        // 搜索框键盘快捷键（Cmd+K / Ctrl+K）
        document.addEventListener('keydown', function(e) {
            if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                e.preventDefault();
                document.querySelector('.search-box').focus();
            }
        });
    </script>
</body>
</html>